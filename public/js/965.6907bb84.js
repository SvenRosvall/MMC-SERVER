(globalThis["webpackChunkMMC_CLIENT"]=globalThis["webpackChunkMMC_CLIENT"]||[]).push([[965],{4083:(e,l,t)=>{e.exports=t.p+"img/Long_Events_Sheet.7ab3be03.png"},6965:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>Gd});var a=t(1758),o=t(8734),n=t(8790),s=(t(9862),t(4907)),i=t(8336),d=(t(310),t(95),t(5565)),r=t(3141),u=t(4667);const c="EventFunctions";async function m(e,l,t){console.log(c+": refreshEventIndexes: Node "+l),e.methods.request_all_node_events(l)}function b(e,l,t){console.log(c+`: createNewEvent: ${l} : ${t}`);var a=!1,o=e.state.nodes[l];if(void 0==o.storedEventsNI[t]){o.storedEventsNI[t]={eventIdentifier:t,eventIndex:1,node:l,variables:{}},o.storedEventsNI[t].variables[0]=o.parameters[5];for(var n=1;n<=o.parameters[5];n++)o.storedEventsNI[t].variables[n]=0;a=!0}else console.log(c+`: createNewEvent: event already exists ${l} : ${t}`);return a}function v(e,l){for(var t=0,a=e;a<=l;a++)t+=1<<a;return t}function p(e,l,t,a,o){if(void 0!=a&&void 0!=o)var n=v(a,o);else a=0,n=255;void 0==l&&(l=1),void 0==t&&(t=0);let s=e;s&=n,s>>=a,s*=l,s+=t;let i=0;return l<1&&(i=1),l<.1&&(i=2),l<.01&&(i=3),s=s.toFixed(i),s}function g(e,l,t,a,o,n){if(void 0!=o&&void 0!=n)var s=v(o,n);else s=255,o=0;void 0==t&&(t=1),void 0==a&&(a=0);let i=e,d=l-a;return d=(d/t).toFixed(0),d<<=o,i|=d&s,i&=d|~s,i}function f(e){let l;return void 0!=e.linkedVariables&&(l=void 0!=e.linkedVariables.EV?e.linkedVariables.EV:void 0),l}function _(e){let l;return void 0!=e.linkedVariables&&(l=void 0!=e.linkedVariables.NV?e.linkedVariables.NV:void 0),l}const y={__name:"EventVariableBit",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},label:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),n={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},s=(0,o.KR)(!1),i=(0,a.EW)(()=>t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex));(0,a.wB)(i,()=>{s.value=!!(i.value&n[l.bit])});const d=(e,l)=>{r()},r=()=>{let e=i.value;s.value?e|=n[l.bit]:e&=~n[l.bit],t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,e,!0,f(l.configuration))};return(0,a.sV)(()=>{var e=t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);s.value=!!(e&n[l.bit])}),(l,t)=>{const o=(0,a.g2)("q-checkbox"),n=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.Wv)(n,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{dense:"","min-width":"100",modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),d],label:e.label,"right-label":""},null,8,["modelValue","label"])]),_:1})}}};var h=t(4189),k=t(7022),N=t(8582),x=t.n(N);const w=y,q=w;x()(y,"components",{QCardSection:h.A,QCheckbox:k.A});const F={class:"text-h6"},V={class:"text-subtitle2"},C={__name:"EventVariableBitArray",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(l,t)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding",style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",F,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",V,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(s,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.bitCollection,l=>((0,a.uX)(),(0,a.CE)("div",{key:l},[(0,a.bF)((0,o.R1)(q),{nodeNumber:e.nodeNumber,eventVariableIndex:e.eventVariableIndex,eventIdentifier:e.eventIdentifier,bit:l.bitPosition,label:l.label,configuration:e.configuration},null,8,["nodeNumber","eventVariableIndex","eventIdentifier","bit","label","configuration"])]))),128))]),_:1})]),_:1})]),_:1})}}};var A=t(3316);const E=C,R=E;x()(C,"components",{QCard:A.A,QCardSection:h.A});const Q={class:"text-h6"},I={class:"text-subtitle2"},L={__name:"EventVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(l,t)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Q,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",I,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(q),{nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit,configuration:e.configuration},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit","configuration"])]),_:1})]),_:1})}}},S=L,W=S;x()(L,"components",{QCard:A.A,QCardSection:h.A});const B={class:"q-pa-xs no-margin"},T={style:{border:"2px solid grey"},class:"q-py-none no-margin"},D={class:"GroupTitle q-py-none no-margin"},K={__name:"EventVariableGroup",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(l,t)=>{const s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.CE)("div",B,[(0,a.Lk)("div",T,[(0,a.Lk)("div",D,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)(s,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,n.v_)(e.configuration.displaySubTitle),1)]),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(Le),{configuration:e.configuration.groupItems,nodeNumber:e.nodeNumber,eventIdentifier:e.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])]),_:1})])])}}};var U=t(2807);const O=(0,U.A)(K,[["__scopeId","data-v-35e13b86"]]),M=O;x()(K,"components",{QCardSection:h.A});const X={class:"text-h6"},P={class:"text-subtitle2"},z={__name:"EventVariableNumber",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,a.EW)(()=>{let e=255*l.displayScale+l.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":e>100?"###":e>10?"##.#":e>1?"#.##":".###"}),d=(0,a.EW)(()=>{let e=0;return l.displayScale<1&&(e=1),l.displayScale<.1&&(e=2),l.displayScale<.01&&(e=3),(l.min*l.displayScale+l.displayOffset).toFixed(e)}),r=(0,a.EW)(()=>{let e=0;try{let t=0;l.displayScale<1&&(t=1),l.displayScale<.1&&(t=2),l.displayScale<.01&&(t=3);let a=2**(l.endBit-l.startBit+1)-1,o=l.max<a?l.max:a;e=(o*l.displayScale+l.displayOffset).toFixed(t)}catch{}return e}),u=(0,a.EW)(()=>t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex));(0,a.wB)(u,()=>{s.value=p(u.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)});const c=e=>{let a=u.value,o=Number(e);o<d.value&&(o=d.value),o>r.value&&(o=r.value),a=g(a,o,l.displayScale,l.displayOffset,l.startBit,l.endBit),t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,a,!0,f(l.configuration)),s.value=p(u.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)};return(0,a.sV)(()=>{s.value=p(u.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)}),(l,t)=>{const o=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),b=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(b,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",X,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",P,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(u,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)(" range "+(0,n.v_)(d.value)+" to "+(0,n.v_)(r.value)+" "+(0,n.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(m,{class:"ev_input_box",mask:i.value,"reverse-fill-mask":"",debounce:"10",dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),outlined:"",onChange:c},null,8,["mask","modelValue"])]),_:1})]),_:1})}}};var j=t(3954),$=t(7837),G=t(7156);const H=(0,U.A)(z,[["__scopeId","data-v-7e74a342"]]),Y=H;x()(z,"components",{QCard:A.A,QCardSection:h.A,QBadge:j.A,QInput:$.A,QField:G.A});var J=t(8433),Z=t.n(J);class ee{constructor(){this.node=void 0,this.eventIdentifier=void 0;var e=function(e){return this.node.storedEventsNI[this.eventIdentifier].variables[e]}.bind(this);Z().add_operation("EV",e);var l=function(e,l){let t=!1,a=this.node.storedEventsNI[this.eventIdentifier].variables[e];return(a&2**l)>0&&(t=!0),t}.bind(this);Z().add_operation("EVbit",l);var t=function(e){return this.node.parameters[e]}.bind(this);Z().add_operation("NP",t);var a=function(e,l){let t=!1;return(this.node.parameters[e]&2**l)>0&&(t=!0),t}.bind(this);Z().add_operation("NPbit",a);var o=function(e){return this.node.nodeVariables[e]}.bind(this);Z().add_operation("NV",o);var n=function(e,l){let t=!1;return(this.node.nodeVariables[e]&2**l)>0&&(t=!0),t}.bind(this);Z().add_operation("NVbit",n)}evaluate(e,l,t){this.node=e,this.eventIdentifier=t;try{let e=Z().apply(l);return e}catch(e){return console.log("mdfLogic.parse "+e),!1}}}var le=t(2490),te=t.n(le);function ae(e,l,t){var a=null;const o=te().upperCaseKeys(l).NV;if(o){var n=t.state.nodes[e].nodeVariables[o];for(var s in l.labels)n==l.labels[s].value&&(a=l.labels[s].label)}return a}function oe(e,l,t,a){var o=!0;if(void 0!=l.evBit)if(void 0!=a){var n=t.state.nodes[e].storedEventsNI[a];if(n){var s=n.variables[l.evBit.index];s=(s&2**l.evBit.bit)>>l.evBit.bit,o=ne(s,l)}else console.log("parseLogicElement: ERROR: evBit - event variables undefined ")}else console.log("parseLogicElement: ERROR: evBit - event index (argument3) not defined ");if(void 0!=l.ev)if(void 0!=a){n=t.state.nodes[e].storedEventsNI[a];if(n){s=n.variables[l.ev];o=ne(s,l)}else console.log("parseLogicElement: ERROR: ev - event variables undefined ")}else console.log("parseLogicElement: ERROR: ev - event index (argument3) not defined ");if(void 0!=l.nvBit){s=t.state.nodes[e].nodeVariables[l.nvBit.index];s=(s&2**l.nvBit.bit)>>l.nvBit.bit,o=ne(s,l)}if(void 0!=l.nv){s=t.state.nodes[e].nodeVariables[l.nv];o=ne(s,l)}if(void 0!=l.JLL){let n=new ee;o=n.evaluate(t.state.nodes[e],l.JLL,a)}return o}function ne(e,l){var t=!0;return void 0!=l.equals&&l.equals!=e&&(t=!1),void 0!=l.greaterThan&&e<=l.greaterThan&&(t=!1),void 0!=l.in&&(t=!1,l.in.forEach(function(l){e==l&&(t=!0)})),void 0!=l.lessThan&&e>=l.lessThan&&(t=!1),void 0!=l.notEqual&&l.notEqual==e&&(t=!1),t}const se={class:"text-h6"},ie={class:"text-subtitle2"},de={__name:"EventVariableSelect",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(l.name?l.name:l.eventVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)();var i=(0,o.KR)();const d=(0,a.EW)(()=>t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex));(0,a.wB)(d,()=>{s.value=d.value&l.bitMask});const r=e=>{let a=d.value;a|=e.value&l.bitMask,a&=e.value|~l.bitMask,t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,a,!0,f(l.configuration))};return(0,a.sV)(()=>{let e=t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);for(var a in s.value=e&l.bitMask,i.value=[],l.options)if(void 0!=l.options[a].overload){var o=ae(l.nodeNumber,l.options[a].overload,t);if(o){var n={value:l.options[a].value,label:o};i.value.push(n)}}else void 0!=l.options[a].label&&i.value.push(l.options[a])}),(l,t)=>{const d=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-select"),c=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(c,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",se,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(d,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",ie,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(u,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),r],dense:"",options:(0,o.R1)(i),"popup-content-class":"no-margin no-padding","map-options":""},null,8,["modelValue","options"])]),_:1})]),_:1})}}};var re=t(4940);const ue=de,ce=ue;x()(de,"components",{QCard:A.A,QCardSection:h.A,QSelect:re.A});const me={class:"text-h6"},be={class:"text-subtitle2"},ve="EventVariableSlider",pe={__name:"EventVariableSlider",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,a.EW)(()=>{for(var e=0,t=l.startBit;t<=l.endBit;t++)e+=1<<t;return e}),r=(0,a.EW)(()=>{var e=u.value*l.displayScale+l.displayOffset;return l.displayScale>=1||(e=l.displayScale>=.1?e.toFixed(1):l.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e}),u=(0,a.EW)({get(){return(t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex)&d.value)>>l.startBit},set(e){let a=t.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex);if(e<=l.max&&e>=l.min){let o=e;o<<=l.startBit,a|=o&d.value,a&=o|~d.value,s.value=!1,i.value="",t.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,a,!0,f(l.configuration))}else console.log(ve+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.sV)(()=>{});const c=()=>{console.log(ve+": clickNegative"),u.value>l.min&&u.value--},m=()=>{console.log(ve+": clickNegative"),u.value>l.min+5?u.value-=5:u.value=l.min},b=()=>{console.log(ve+": clickPositive"),u.value<l.max&&u.value++},v=()=>{console.log(ve+": clickPositive"),u.value<l.max-5?u.value+=5:u.value=l.max};return(l,t)=>{const o=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-badge"),i=(0,a.g2)("q-slider"),d=(0,a.g2)("q-btn"),p=(0,a.g2)("q-space"),g=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(g,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{style:{height:"150px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",me,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.eventVariableIndex),1)]),_:1})]),(0,a.Lk)("div",be,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(s,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(r.value)+" "+(0,n.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(i,{"model-value":u.value,max:e.max,min:e.min,onChange:t[0]||(t[0]=e=>{u.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(g,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:t[1]||(t[1]=e=>c()),"no-caps":""})]),_:1}),(0,a.bF)(p),(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:t[2]||(t[2]=e=>m()),"no-caps":""})]),_:1}),(0,a.bF)(p),(0,a.bF)(p),(0,a.bF)(p),(0,a.bF)(p),(0,a.bF)(p),(0,a.bF)(p),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:t[3]||(t[3]=e=>v()),"no-caps":""})]),_:1}),(0,a.bF)(p),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:t[4]||(t[4]=e=>b()),"no-caps":""})]),_:1})]),_:1})]),_:1})]),_:1})}}};var ge=t(1444),fe=t(1693),_e=t(3676);const ye=pe,he=ye;x()(pe,"components",{QCard:A.A,QCardSection:h.A,QBadge:j.A,QSlider:ge.A,QBtn:fe.A,QSpace:_e.A});const ke={class:"no-padding no-margin"},Ne={class:"no-padding no-margin"},xe={class:"no-padding no-margin",style:{border:"1px solid grey"}},we={__name:"EventVariableTabs",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,t=(0,o.KR)(),s=(0,o.KR)();(0,a.WQ)("store");return(0,a.sV)(()=>{t.value=l.configuration.tabPanels,s.value=t.value[0].displayTitle}),(e,i)=>{const d=(0,a.g2)("q-tab"),r=(0,a.g2)("q-tabs"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab-panel"),m=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",ke,[(0,a.bF)(r,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),(0,a.Lk)("div",Ne,[(0,a.bF)(m,{"keep-alive":"",modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value=e)},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,e=>((0,a.uX)(),(0,a.Wv)(c,{key:e.displayTitle,name:e.displayTitle},{default:(0,a.k6)(()=>[(0,a.Lk)("div",xe,[(0,a.bF)(u,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,n.v_)(e.displaySubTitle),1)]),_:2},1024),(0,a.bF)(u,{class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(Le),{configuration:e.items,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])]),_:2},1024)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])])}}};var qe=t(2980),Fe=t(327),Ve=t(9041),Ce=t(1746);const Ae=we,Ee=Ae;x()(we,"components",{QTabs:qe.A,QTab:Fe.A,QTabPanels:Ve.A,QTabPanel:Ce.A,QCardSection:h.A});const Re={class:"q-pa-xs row"},Qe={__name:"EventVariables",props:{configuration:Object,nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),n=e=>{var a=!0;return e.visibilityLogic&&(a=oe(l.nodeNumber,e.visibilityLogic,t,l.eventIdentifier)),a};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{}),(t,s)=>((0,a.uX)(),(0,a.CE)("div",Re,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,e=>((0,a.uX)(),(0,a.CE)("div",{key:e},["EventVariableBitArray"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(R),{key:0,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitCollection:e.bitCollection,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"EventVariableBitSingle"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(W),{key:1,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bit:e.bit,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,configuration:e},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bit","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"EventVariableGroup"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(M),{key:2,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0),"EventVariableNumber"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Y),{key:3,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayOffset:e.displayOffset,displayUnits:e.displayUnits,startBit:e.startBit,endBit:e.endBit,min:e.min,max:e.max,configuration:e},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayOffset","displayUnits","startBit","endBit","min","max","configuration"])):(0,a.Q3)("",!0),"EventVariableSelect"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(ce),{key:4,nodeNumber:l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,bitMask:e.bitMask,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,options:e.options,configuration:e},null,8,["nodeNumber","eventIdentifier","eventVariableIndex","bitMask","displayTitle","displaySubTitle","options","configuration"])):(0,a.Q3)("",!0),"EventVariableSlider"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(he),{key:5,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,eventVariableIndex:e.eventVariableIndex,displayTitle:e.displayTitle,displaySubTitle:e.displaySubTitle,displayScale:e.displayScale,displayUnits:e.displayUnits,displayOffset:e.displayOffset,min:e.min,max:e.max,startBit:e.startBit,endBit:e.endBit,configuration:e},null,8,["node-number","eventIdentifier","eventVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"EventVariableTabs"==e.type&&n(e)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ee),{key:6,"node-number":l.nodeNumber,eventIdentifier:l.eventIdentifier,configuration:e},null,8,["node-number","eventIdentifier","configuration"])):(0,a.Q3)("",!0)]))),128))]))}},Ie=Qe,Le=Ie,Se="EventRawVariableSingle",We={__name:"EventRawVariableSingle",props:{nodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0},eventVariableIndex:{type:Number,required:!0},numberBase:{type:String,default:"decimal"}},setup(e){const l=e,t="Variable "+l.eventVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(),u=(0,a.EW)(()=>n.getters.event_variable_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex));(0,a.wB)(u,()=>{b(u.value)});const c=(0,a.EW)(()=>l.numberBase);(0,a.wB)(c,()=>{b(u.value)});const m=e=>{try{let t=e,a=e.toUpperCase().split("X");t=a.length>1?parseInt(a[1],16):parseInt(a[0]),t<0||t>255||Number.isNaN(t)?(console.log(Se+`: value error ${t}`),s.value=!0,i.value="Invalid Value"):(i.value="",s.value=!1,n.methods.event_teach_by_identifier(l.nodeNumber,l.eventIdentifier,l.eventVariableIndex,t))}catch(e){console.log(Se+": update_event : "+e)}},b=e=>{"decimal"==l.numberBase?r.value=e:r.value="0x"+(0,d.xT)(e,2)};return(0,a.sV)(()=>{b(u.value)}),(e,l)=>{const o=(0,a.g2)("q-input"),n=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(n,{class:"q-pa-xs",flat:"",style:{width:"120px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{class:"bg-white",filled:"",label:t,mask:"NNNN",debounce:"100",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),outlined:"","error-message":i.value,error:s.value,onChange:m},null,8,["modelValue","error-message","error"])]),_:1})}}},Be=We,Te=Be;x()(We,"components",{QCard:A.A,QInput:$.A});const De={class:"text-h6"},Ke={class:"q-pa-none row"},Ue="EventRawVariables",Oe={__name:"EventRawVariables",props:{nodeNumber:{type:Number,default:0},eventIdentifier:{type:String,required:!0}},setup(e){const l=(0,a.WQ)("store"),t=(0,o.KR)("decimal"),s=e,i=()=>{console.log(Ue+": clickToggle"),t.value="decimal"==t.value?t.value="hex":t.value="decimal"};return(e,d)=>{const r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-card-actions"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-separator");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(m,{flat:"",class:"q-pa-none q-ma-none row justify-between"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"text-primary"},{default:(0,a.k6)(()=>d[1]||(d[1]=[(0,a.Lk)("div",{class:"text-h6"},"Raw view",-1)])),_:1,__:[1]}),(0,a.bF)(c,{class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{size:"sm",color:"blue",label:"Toggle",onClick:d[0]||(d[0]=e=>i())}),d[2]||(d[2]=(0,a.eW)("    ")),(0,a.Lk)("div",De," display in "+(0,n.v_)(t.value),1)]),_:1,__:[2]}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>d[3]||(d[3]=[(0,a.Lk)("div",{class:"text-body"},"Enter value in decimal, or hexadecimal preceeded by '0x' (e.g. 0x55), irrespective of display format ",-1)])),_:1,__:[3]})]),_:1}),(0,a.Lk)("div",Ke,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodes[s.nodeNumber].parameters[5],e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(Te),{eventVariableIndex:e,nodeNumber:s.nodeNumber,eventIdentifier:s.eventIdentifier,key:e,numberBase:t.value},null,8,["eventVariableIndex","nodeNumber","eventIdentifier","numberBase"]))),128)),(0,a.bF)(b)])],64)}}};var Me=t(2669),Xe=t(386);const Pe=Oe,ze=Pe;x()(Oe,"components",{QCard:A.A,QCardSection:h.A,QCardActions:Me.A,QBtn:fe.A,QSeparator:Xe.A});var je=t(9104);const $e={class:"text-h6"},Ge="NodeChannelNamesDialog",He={__name:"NodeChannelNamesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},numberOfChannels:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=e,i=l,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}}),r=(0,o.KR)([]),u=[{name:"channelNumber",field:"channelNumber",required:!0,label:"Channel Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name (click to edit)",align:"left",sortable:!0}],c=async()=>{r.value=[];for(let e=1;e<=s.numberOfChannels;e++)r.value.push({channelNumber:e,name:t.getters.node_channel_name(s.nodeNumber,e)})},m=(e,l)=>{console.log(Ge+`: nameChanged: ${l} ${e}`),t.setters.node_channel_name(s.nodeNumber,l,e),c()};(0,a.$u)(()=>{c()});return(l,s)=>{const i=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),b=(0,a.g2)("q-td"),v=(0,a.g2)("q-input"),p=(0,a.g2)("q-popup-edit"),g=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),_=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"min-width":"500px"}},{default:(0,a.k6)(()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",$e," Edit channel names for : "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(y,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{flat:"",bordered:"",dense:"",rows:r.value,columns:u,"row-key":"channelNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(g,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{key:"channelNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.channelNumber),1)]),_:2},1032,["props"]),(0,a.bF)(b,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.name)+" ",1),(0,a.bF)(p,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l,buttons:"",onSave:l=>m(l,e.row.channelNumber)},{default:(0,a.k6)(e=>[(0,a.bF)(v,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:"",counter:"",onKeyup:(0,je.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var Ye=t(2156),Je=t(6868),Ze=t(9212),el=t(4488),ll=t(5262),tl=t(3486),al=t(8672);const ol=He,nl=ol;x()(He,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QPopupEdit:tl.A,QInput:$.A}),x()(He,"directives",{ClosePopup:al.A});const sl={class:"text-caption"},il={class:"text-h6"},dl="WaitingOnBusTrafficDialog",rl={__name:"WaitingOnBusTrafficDialog",props:{modelValue:{type:Boolean,required:!0},message:{type:String,required:!0},callingModule:{type:String,default:""}},emits:["update:modelValue","WaitingOnBusTrafficDialogEvent"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),o=e,s=l,i=(0,a.EW)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,async()=>{1==i.value&&await r()});const r=async()=>{t.state.cbusTrafficTimeStamp=Date.now();while(Date.now()-t.state.cbusTrafficTimeStamp<1e3)await(0,d.yy)(10);(0,d.Qn)(dl+": waitOnBusTraffic ended "+(Date.now()-t.state.cbusTrafficTimeStamp)),s("WaitingOnBusTrafficDialogEvent","finished"),i.value=!1};return(l,t)=>{const o=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-spinner-orbit"),d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-card"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",sl,(0,n.v_)(e.callingModule),1),(0,a.Lk)("div",il,(0,n.v_)(e.message),1),t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"},"Please wait",-1))]),_:1,__:[1]}),(0,a.bF)(o,{class:"text-h6",align:"center"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",size:"2em"})]),_:1}),(0,a.bF)(r,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",label:"Close"},null,512),[[m]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var ul=t(7288);const cl=rl,ml=cl;x()(rl,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QSpinnerOrbit:ul.A,QCardActions:Me.A,QBtn:fe.A}),x()(rl,"directives",{ClosePopup:al.A});const bl={class:"text-h6"},vl="MDFDownloadDialog",pl={__name:"MDFDownloadDialog",props:{modelValue:{type:Boolean,required:!0},moduleDescriptorFilename:{type:String}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),o=e,s=l,i=(0,a.EW)({get(){return o.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,()=>{console.log(vl+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const r=async e=>{console.log(vl+": actionDownload"),await(0,d.yy)(500);let l=JSON.stringify(t.state.exported_MDF,null,"  "),a=document.createElement("a");a.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(l)),a.setAttribute("download",e),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)};return(l,t)=>{const o=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-actions"),u=(0,a.g2)("q-card"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",bl," Download "+(0,n.v_)(e.moduleDescriptorFilename),1)]),_:1}),(0,a.bF)(u,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(o,{color:"positive",label:"Download",onClick:t[0]||(t[0]=l=>r(e.moduleDescriptorFilename))},null,512),[[m,2]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},gl=pl,fl=gl;x()(pl,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardActions:Me.A}),x()(pl,"directives",{ClosePopup:al.A});const _l={class:"text-subtitle2"},yl="MDFUploadDialog",hl={__name:"MDFUploadDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(),r=e,u=l,c=(0,a.EW)({get(){return r.modelValue},set(e){u("update:modelValue",e)}});(0,a.wB)(c,()=>{console.log(yl+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const m=()=>{if(d.value){var e=d.value.name;console.log(yl+": selected filename "+e);let l=new FileReader;l.readAsText(d.value),l.onload=function(){try{var a=JSON.parse(l.result);a["moduleDescriptorFilename"]=e,console.log(yl+": actionUpload: "+a.moduleDescriptorFilename),i.methods.import_module_descriptor(r.nodeNumber,a)}catch(e){t.notify({message:"Module Descriptor file upload has failed",caption:"please check the file is valid JSON, and try again",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}},d.value=null}else console.log(yl+": actionUpload: uploadFile no value ")};return(e,l)=>{const t=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-file"),b=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=e=>c.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])]),default:(0,a.k6)(()=>[l[3]||(l[3]=(0,a.Lk)("div",{class:"text-h6"}," MDF upload ",-1))]),_:1,__:[3]}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>l[4]||(l[4]=[(0,a.Lk)("div",{class:"text-subtitle2"},"Select a file to upload",-1),(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file will be stored with it's original filename"),(0,a.Lk)("br"),(0,a.eW)(" If the module name is currently unknown, the 'name' portion from the filename will be used"),(0,a.Lk)("br"),(0,a.eW)(" The filename format is moduleName-moduleIdentity-moduleVersion.json ")],-1)])),_:1,__:[4]}),(0,a.bF)(u,{modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=e=>d.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(r,null,{default:(0,a.k6)(()=>[l[8]||(l[8]=(0,a.Lk)("div",{class:"text-subtitle2"},"Current node:",-1)),(0,a.Lk)("div",_l,[(0,a.eW)(" Module name: "+(0,n.v_)((0,o.R1)(i).state.nodes[(0,o.R1)(i).state.selected_node].moduleName),1),l[5]||(l[5]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module identifier: "+(0,n.v_)((0,o.R1)(i).state.nodes[(0,o.R1)(i).state.selected_node].moduleIdentifier),1),l[6]||(l[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module version: "+(0,n.v_)((0,o.R1)(i).state.nodes[(0,o.R1)(i).state.selected_node].moduleVersion),1),l[7]||(l[7]=(0,a.Lk)("br",null,null,-1))])]),_:1,__:[8]}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>l[9]||(l[9]=[(0,a.Lk)("div",{class:"text-subtitle2"},"If this module descriptor already exists on the server, it will be overwritten ",-1)])),_:1,__:[9]}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{color:"positive",label:"Upload",onClick:l[1]||(l[1]=e=>m())},null,512),[[g]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var kl=t(9980);const Nl=hl,xl=Nl;x()(hl,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QFile:kl.A,QCardActions:Me.A}),x()(hl,"directives",{ClosePopup:al.A});const wl={class:"text-subtitle2"},ql={class:"q-pa-xs row"},Fl={class:"text-body2"},Vl="MDFDialog",Cl={__name:"MDFDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(),m=(0,o.KR)(),b=(0,o.KR)(),v=(0,o.KR)(!1),p=e,g=l,f=(0,a.EW)({get(){return p.modelValue},set(e){g("update:modelValue",e)}});(0,a.wB)(f,()=>{v.value=!1,q(),F(),h()});const _=(0,a.EW)(()=>i.state.MDFupdateTimestamp);(0,a.wB)(_,()=>{q(),F(),h()});const y=(0,a.EW)(()=>i.state.server.nodes[p.nodeNumber]);(0,a.wB)(y,()=>{q(),F()});const h=()=>{m.value="",b.value="";try{m.value=i.state.nodeDescriptors[p.nodeNumber].moduleDescriptorFilename,m.value&&(b.value=i.state.nodeDescriptors[p.nodeNumber].moduleDescriptorLocation)}catch{}},k=(0,o.KR)([]),N=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],x=(0,o.KR)([]),w=[{name:"file",field:"file",required:!0,label:"File",align:"left",sortable:!0},{name:"timestamp",field:"timestamp",required:!0,label:"Timestamp",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],q=async()=>{void 0!=y.value&&(k.value=[],void 0!=y.value.SYSTEM_MDF_List&&y.value.SYSTEM_MDF_List.forEach(e=>{k.value.push({file:e[0],timestamp:d.Fm(e[1])})}),k.value.sort(function(e,l){return e.file<l.file?-1:1}))},F=async()=>{void 0!=y.value&&(x.value=[],void 0!=y.value.USER_MDF_List&&y.value.USER_MDF_List.forEach(e=>{let l=!1;void 0!=y.value.SYSTEM_MDF_List&&y.value.SYSTEM_MDF_List.forEach(t=>{t[0].toUpperCase()==e[0].toUpperCase()&&t[1]>e[1]&&(l=!0)}),x.value.push({file:e[0],timestamp:d.Fm(e[1]),obsolete:l})}),x.value.sort(function(e,l){return e.file<l.file?-1:1}))};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{});const V=e=>{console.log(Vl+": clickDelete "+e);t.notify({message:"Are you sure you want to delete file "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.request_MDF_delete(e,p.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})},C=()=>{console.log(Vl+": clickToggleModuleDescriptor"),v.value=!v.value},A=e=>{console.log(Vl+": clickSystemDownload"),i.methods.request_MDF_export("SYSTEM",e),c.value=e,r.value=!0},E=e=>{console.log(Vl+": clickUserDownload"),i.methods.request_MDF_export("USER",e),c.value=e,r.value=!0},R=()=>{console.log(Vl+": clickUpload"),u.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),g=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-card"),h=(0,a.g2)("q-td"),q=(0,a.g2)("q-tr"),F=(0,a.g2)("q-table"),Q=(0,a.g2)("q-chip"),I=(0,a.g2)("q-dialog"),L=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(I,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=e=>f.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(y,{class:"q-pa-none q-ma-none",style:{"min-width":"1100px","min-height":"60vh"}},{default:(0,a.k6)(()=>[(0,a.bF)(g,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[L,3]])]),default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"}," Module Descriptor File Management ",-1))]),_:1,__:[5]})]),_:1}),(0,a.bF)(g,{style:{"max-height":"85vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{flat:"",style:{"min-width":"950px"},class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{style:{width:"450px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[t[12]||(t[12]=(0,a.Lk)("div",{class:"text-h6"},"Current node:",-1)),(0,a.Lk)("div",wl,[(0,a.eW)(" Module name: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleName),1),t[6]||(t[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module identifier: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleIdentifier),1),t[7]||(t[7]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Module version: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleVersion),1),t[8]||(t[8]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Processor type: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].cpuName),1),t[9]||(t[9]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Processor code: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].parameters[9]),1),t[10]||(t[10]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Current module descriptor: "+(0,n.v_)(m.value),1),t[11]||(t[11]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Current descriptor location: "+(0,n.v_)(b.value),1)])]),_:1,__:[12]}),(0,a.bF)(g,{style:{width:"600px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The file is matched using the module identifier, version number and processor code, the name portion is not used"),(0,a.Lk)("br"),(0,a.eW)(" If no match is found, then it will fall back to using just the module identifier and the version number"),(0,a.Lk)("br"),(0,a.eW)(" Modules that need files using the processor code are the exception, most won't use it"),(0,a.Lk)("br"),(0,a.eW)(" User files always take precedence if same filename exists in System, allowing permanent override of System files"),(0,a.Lk)("br"),(0,a.eW)(" User file timestamp is in red if a newer System file exists - to use the newer System file, delete the User file"),(0,a.Lk)("br")],-1)),(0,a.bF)(_,{class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"positive",size:"sm",label:"Upload new file",onClick:t[0]||(t[0]=e=>R())})]),_:1})]),_:1,__:[13]})]),_:1}),(0,a.bF)(y,{flat:"",style:{"max-height":"70vh","min-width":"950px"},class:"no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{flat:"",class:"no-margin q-pa-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{flat:"",style:{"max-height":"49vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{class:"no-margin q-pa-xs",style:{"min-width":"430px"}},{default:(0,a.k6)(()=>[t[14]||(t[14]=(0,a.Lk)("div",{class:"text-h6"},"System files for this module type",-1)),(0,a.bF)(F,{flat:"",bordered:"",dense:"",rows:k.value,columns:N,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(q,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{key:"file",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.file),1)]),_:2},1032,["props"]),(0,a.bF)(h,{key:"timestamp",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.timestamp),1)]),_:2},1032,["props"]),(0,a.bF)(h,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:l=>A(e.row.file),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1,__:[14]})]),_:1}),(0,a.bF)(y,{flat:"",style:{"max-height":"50vh"},class:"scroll no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{class:"no-margin q-py-xs",style:{"min-width":"500px"}},{default:(0,a.k6)(()=>[t[15]||(t[15]=(0,a.Lk)("div",{class:"text-h6"},"User files for this module type",-1)),(0,a.bF)(F,{flat:"",bordered:"",dense:"",rows:x.value,columns:w,"row-key":"file","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(q,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{key:"file",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.file),1)]),_:2},1032,["props"]),(0,a.bF)(h,{key:"timestamp",props:e},{default:(0,a.k6)(()=>[e.row.obsolete?((0,a.uX)(),(0,a.Wv)(Q,{key:0,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.timestamp),1)]),_:2},1024)):((0,a.uX)(),(0,a.Wv)(Q,{key:1,dense:"",color:"white","text-color":"black"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.timestamp),1)]),_:2},1024))]),_:2},1032,["props"]),(0,a.bF)(h,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Download",onClick:l=>E(e.row.file),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Delete",onClick:l=>V(e.row.file),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1,__:[15]})]),_:1})]),_:1})]),_:1}),(0,a.bF)(_,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle current module descriptor view",onClick:t[1]||(t[1]=e=>C())})]),_:1}),v.value?((0,a.uX)(),(0,a.Wv)(g,{key:0,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",ql,[t[16]||(t[16]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Module descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Fl,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(i).state.nodeDescriptors[p.nodeNumber]),1)])])]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(fl),{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),moduleDescriptorFilename:c.value},null,8,["modelValue","moduleDescriptorFilename"]),(0,a.bF)((0,o.R1)(xl),{modelValue:u.value,"onUpdate:modelValue":t[4]||(t[4]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}};var Al=t(6760);const El=Cl,Rl=El;x()(Cl,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QCardActions:Me.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QChip:Al.A}),x()(Cl,"directives",{ClosePopup:al.A});const Ql={class:"text-h6"},Il={key:0,class:"text-h6"},Ll={class:"q-pa-xs row"},Sl={class:"q-pa-xs row"},Wl={class:"text-body2"},Bl={class:"q-pa-xs row"},Tl={class:"text-body2"},Dl="EventVariablesDialog",Kl={__name:"EventVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0},eventIdentifier:{type:String,required:!0},newEvent:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),{registerTimeout:i}=(0,u.A)(),c=(0,a.WQ)("store"),m=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),_=(0,o.KR)(!1),y=(0,o.KR)(!1),h=(0,o.KR)(),k=(0,o.KR)(),N=(0,o.KR)(0),x=(0,o.KR)(""),w=(0,o.KR)(""),q=e,F=l,V=(0,a.EW)({get(){return q.modelValue},set(e){F("update:modelValue",e)}});(0,a.wB)(V,()=>{1==V.value&&(_.value=!1,void 0==A.value?(v.value=!0,g.value=!0):(v.value=!1,g.value=!1,k.value=A.value,h.value=c.state.nodeDescriptors[q.nodeNumber].eventVariableInformation,C()),N.value=(0,r.r)(c,q.nodeNumber))});const C=()=>{let e=t.notify({message:"updating channel names",caption:"please wait....",timeout:0,position:"center",color:"primary"});i(()=>{k.value=(0,d.Gk)(c,A.value,q.nodeNumber),e()},300)};(0,a.wB)(p,()=>{try{0==p.value&&C()}catch{}});const A=(0,a.EW)(()=>{var e=void 0;try{e=c.state.nodeDescriptors[q.nodeNumber].eventVariables}catch{}return e});(0,a.wB)(A,()=>{1==V.value&&(void 0==A.value?(v.value=!0,g.value=!0):(g.value=!1,h.value=c.state.nodeDescriptors[q.nodeNumber].eventVariableInformation,C()),N.value=(0,r.r)(c,q.nodeNumber))}),(0,a.$u)(async()=>{});const E=async()=>{w.value="Loading Event Indexes",(0,d.Qn)(Dl+`: ${w.value}`),x.value="",m.value=!0,c.methods.request_all_node_events(q.nodeNumber);let e=Date.now();while(Date.now()-e<6e4){if(x.value.length>0)break;await(0,d.yy)(10)}m.value=!1},R=()=>{(0,d.Qn)(Dl+`: clickChannelNames: number ${N.value}`),N.value>0&&(p.value=!0)},Q=async()=>{if((0,d.Qn)(Dl+": clickClose: node "+q.nodeNumber+" eventIdentifier "+q.eventIdentifier),q.newEvent){(0,d.Qn)(Dl+": clickClose: new event");try{var e=c.state.nodes[q.nodeNumber];try{var l=e.storedEventsNI[q.eventIdentifier].variables[1];void 0==l&&(l=0)}catch(e){b(c,q.nodeNumber,q.eventIdentifier),l=0}c.methods.event_teach_by_identifier(q.nodeNumber,q.eventIdentifier,1,l),await(0,d.yy)(250),c.methods.request_all_node_events(q.nodeNumber)}catch(e){(0,d.Qn)(Dl+": clickClose "+e)}}},I=async()=>{(0,d.Qn)(Dl+": clickRefresh"),0==c.state.nodes[q.nodeNumber].VLCB&&await E(),c.methods.request_event_variables_by_identifier(q.nodeNumber,q.eventIdentifier),w.value="Loading Event Variables",m.value=!0},L=()=>{(0,d.Qn)(Dl+": clickToggleVariablesDescriptor"),_.value=!_.value},S=()=>{(0,d.Qn)(Dl+": clickToggleRaw"),v.value=!v.value},W=()=>{(0,d.Qn)(Dl+": clickToggleStoredEvents:"),y.value=!y.value},B=()=>{(0,d.Qn)(Dl+": clickUpdateModuleDescriptor"),c.methods.request_matching_mdf_list(q.nodeNumber,"USER"),c.methods.request_matching_mdf_list(q.nodeNumber,"SYSTEM"),f.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-separator"),u=(0,a.g2)("q-card"),b=(0,a.g2)("q-card-actions"),F=(0,a.g2)("q-dialog"),C=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{modelValue:V.value,"onUpdate:modelValue":t[7]||(t[7]=e=>V.value=e),persistent:"","full-width":"","full-height":"",position:"right"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{class:"q-pa-none q-ml-xl"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[0==!N.value?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"channel names",onClick:t[0]||(t[0]=e=>R())})):(0,a.Q3)("",!0),(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[1]||(t[1]=e=>B())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:t[2]||(t[2]=e=>I())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close",onClick:Q},null,512),[[C]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Ql," Node: "+(0,n.v_)((0,o.R1)(c).getters.node_name(q.nodeNumber))+"       Event: "+(0,n.v_)((0,o.R1)(c).getters.event_name(q.eventIdentifier))+"       ",1)]),_:1})]),_:1}),(0,a.bF)(u,{class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"scroll no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"update Module Descriptor",onClick:t[3]||(t[3]=e=>B())})]),default:(0,a.k6)(()=>[g.value?((0,a.uX)(),(0,a.CE)("div",Il," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0)]),_:1}),h.value?((0,a.uX)(),(0,a.Wv)(d,{key:0,class:"q-pa-none q-ma-none text-h6"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(h.value),1)]),_:1})):(0,a.Q3)("",!0),(0,a.Lk)("div",Ll,[(0,o.R1)(c).state.nodeDescriptors[q.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Le),{key:0,configuration:k.value,nodeNumber:q.nodeNumber,eventIdentifier:q.eventIdentifier},null,8,["configuration","nodeNumber","eventIdentifier"])):(0,a.Q3)("",!0)]),(0,a.bF)(r),v.value?((0,a.uX)(),(0,a.Wv)(d,{key:1,class:"q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(ze),{nodeNumber:e.nodeNumber,eventIdentifier:q.eventIdentifier},null,8,["nodeNumber","eventIdentifier"]),(0,a.bF)(r)]),_:1})):(0,a.Q3)("",!0),y.value?((0,a.uX)(),(0,a.Wv)(d,{key:2,class:"q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Sl,[t[12]||(t[12]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Stored event"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Wl,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(c).state.nodes[e.nodeNumber].storedEventsNI[e.eventIdentifier]),1)])]),(0,a.bF)(r)]),_:1})):(0,a.Q3)("",!0),_.value?((0,a.uX)(),(0,a.Wv)(d,{key:3,class:"q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Bl,[t[13]||(t[13]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Tl,[(0,a.Lk)("pre",null,(0,n.v_)(A.value),1)])]),(0,a.bF)(r)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:t[4]||(t[4]=e=>S())}),(0,a.bF)(s,{flat:"",label:"Toggle stored event view",onClick:t[5]||(t[5]=e=>W())}),(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:t[6]||(t[6]=e=>L())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Rl),{modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=e=>f.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)(nl,{modelValue:p.value,"onUpdate:modelValue":t[9]||(t[9]=e=>p.value=e),nodeNumber:e.nodeNumber,numberOfChannels:N.value},null,8,["modelValue","nodeNumber","numberOfChannels"]),(0,a.bF)((0,o.R1)(ml),{modelValue:m.value,"onUpdate:modelValue":t[10]||(t[10]=e=>m.value=e),callingModule:"EventVariablesDialog",message:w.value,onWaitingOnBusTrafficDialogEvent:t[11]||(t[11]=e=>x.value=e)},null,8,["modelValue","message"])],64)}}},Ul=Kl,Ol=Ul;x()(Kl,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QSeparator:Xe.A,QCardActions:Me.A}),x()(Kl,"directives",{ClosePopup:al.A});const Ml={class:"text-h6"},Xl={key:0,class:"text-h6"},Pl={key:0},zl="AddEventDialog",jl={__name:"AddEventDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:void 0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),i=(0,s.A)(),d=(0,o.KR)(),r=(0,o.KR)(),u=(0,o.KR)(),c=(0,o.KR)(),m=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!0),g=(0,o.KR)(!1),f=(0,o.KR)(),_=(0,o.KR)(!1),y=(0,o.KR)(""),h=(0,o.KR)("");var k=null;const N=e,x=l,w=(0,a.EW)({get(){return N.modelValue},set(e){x("update:modelValue",e)}});(0,a.wB)(w,()=>{1==w.value&&(f.value=void 0,void 0==N.nodeNumber?h.value="Add event":h.value="Add event for node "+t.getters.node_name(N.nodeNumber))}),(0,a.wB)(r,()=>{void 0==d.value&&"short"!=f.value||(v.value=!0)}),(0,a.wB)(d,()=>{void 0!=r.value&&(v.value=!0)});const q=e=>{e&&e in t.state.layout.eventDetails&&(g.value=!0,u.value=t.getters.event_name(e),c.value=t.getters.event_group(e))};(0,a.$u)(()=>{void 0!=N.nodeNumber&&0==t.state.nodes[N.nodeNumber].parameters[4]&&p.value,d.value=null,r.value=null,u.value=null,f.value=null,m.value=!1,v.value=!1,g.value=!1});const F=()=>{console.log(zl+": clickAddEvent "+d.value+" "+r.value),y.value=k,void 0!=N.nodeNumber&&b(t,N.nodeNumber,y.value)&&(_.value=!0),g.value||(t.setters.event_name(y.value,u.value),t.setters.event_group(y.value,c.value)),w.value=!1},V=()=>{console.log(zl+": clickNext "),"short"==f.value&&(d.value=0),k=parseInt(d.value).toString(16).toUpperCase().padStart(4,0),k+=parseInt(r.value).toString(16).toUpperCase().padStart(4,0),console.log(zl+": entered_event_identifier: "+k),q(k),console.log(zl+": eventAlreadyExistsInLayoutData: "+g.value);var e=!1;if(N.nodeNumber?void 0!=t.state.nodes[N.nodeNumber].storedEventsNI[k]&&(e=!0):g.value&&(e=!0),e){i.notify({message:"This event already exists",timeout:0,position:"center",color:"primary",actions:[{label:"continue",color:"white",handler:async()=>{}}]})}else m.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-radio"),N=(0,a.g2)("q-space"),x=(0,a.g2)("q-input"),q=(0,a.g2)("q-card"),C=(0,a.g2)("q-card-actions"),A=(0,a.g2)("q-dialog"),E=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(A,{modelValue:w.value,"onUpdate:modelValue":t[9]||(t[9]=e=>w.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{width:"600px","min-height":"200px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[E]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Ml,(0,n.v_)(h.value),1)]),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)(()=>[0==p.value?((0,a.uX)(),(0,a.CE)("div",Xl," This module does not support any stored events ")):(0,a.Q3)("",!0)]),_:1}),p.value?((0,a.uX)(),(0,a.CE)("div",Pl,[(0,a.bF)(b,{class:"q-py-none q-ma-xs row"},{default:(0,a.k6)(()=>[(0,a.bF)(k,{dense:"",modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),val:"long",label:"Long event"},null,8,["modelValue"]),(0,a.bF)(N),(0,a.bF)(k,{dense:"",modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=e=>f.value=e),val:"short",label:"Short event"},null,8,["modelValue"]),(0,a.bF)(N),(0,a.bF)(N)]),_:1}),(0,a.bF)(q,{style:{"min-height":"280px"}},{default:(0,a.k6)(()=>[(0,a.bF)(b,{style:{"min-height":"80px"}},{default:(0,a.k6)(()=>["long"==f.value?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>t[11]||(t[11]=[(0,a.Lk)("div",{class:"text-body"},"Consumed events will need the number of the node that produces the event",-1),(0,a.Lk)("div",{class:"text-body"},"Events produced by this node will need the number of this node, as well as editing the event variables",-1)])),_:1,__:[11]})):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(q,{class:"q-py-none q-ma-xs row"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{width:"200px"}},{default:(0,a.k6)(()=>["long"==f.value?((0,a.uX)(),(0,a.Wv)(b,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>t[12]||(t[12]=[(0,a.Lk)("div",{class:"text-h6"},"Node Number",-1)])),_:1,__:[12]}),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{dense:"",modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),type:"number",autofocus:""},null,8,["modelValue"])]),_:1}),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>t[13]||(t[13]=[(0,a.Lk)("div",{class:"text-h6"},"Event Number",-1)])),_:1,__:[13]}),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{dense:"",modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),type:"number"},null,8,["modelValue"])]),_:1})]),_:1})):(0,a.Q3)("",!0),"short"==f.value?((0,a.uX)(),(0,a.Wv)(b,{key:1},{default:(0,a.k6)(()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>t[14]||(t[14]=[(0,a.Lk)("div",{class:"text-h6"},"Device Number",-1)])),_:1,__:[14]}),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{dense:"",modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=e=>r.value=e),type:"number",autofocus:""},null,8,["modelValue"])]),_:1})]),_:1})):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(b,{style:{width:"350px"}},{default:(0,a.k6)(()=>[m.value||null==f.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(C,{key:0,align:"center",class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{disable:!v.value,color:"blue",label:"check event",onClick:t[5]||(t[5]=e=>V())},null,8,["disable"]),[[E]])]),_:1})),m.value?((0,a.uX)(),(0,a.Wv)(b,{key:1,class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>t[15]||(t[15]=[(0,a.Lk)("div",{class:"text-h6",style:{color:"dodgerblue"}},"Event OK",-1)])),_:1,__:[15]})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)(()=>[t[18]||(t[18]=(0,a.Lk)("div",{class:"text-body"},"Event Name and Event Group are optional values",-1)),t[19]||(t[19]=(0,a.Lk)("div",{class:"text-body"},"Input will be disabled if previously entered",-1)),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>t[16]||(t[16]=[(0,a.Lk)("div",{class:"text-h6"},"Event Name",-1)])),_:1,__:[16]}),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{disable:g.value,dense:"",modelValue:u.value,"onUpdate:modelValue":t[6]||(t[6]=e=>u.value=e)},null,8,["disable","modelValue"])]),_:1}),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>t[17]||(t[17]=[(0,a.Lk)("div",{class:"text-h6"},"Event Group",-1)])),_:1,__:[17]}),(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{disable:g.value,dense:"",modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=e=>c.value=e)},null,8,["disable","modelValue"])]),_:1})]),_:1,__:[18,19]}),(0,a.bF)(b,null,{default:(0,a.k6)(()=>[(0,a.bF)(C,{align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{disable:!m.value,color:"blue",label:"Add Event",onClick:t[8]||(t[8]=e=>F())},null,8,["disable"]),[[E]])]),_:1})]),_:1})])):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Ol),{modelValue:_.value,"onUpdate:modelValue":t[10]||(t[10]=e=>_.value=e),nodeNumber:e.nodeNumber,eventIdentifier:y.value,newEvent:!0},null,8,["modelValue","nodeNumber","eventIdentifier"])],64)}}};var $l=t(7878);const Gl=jl,Hl=Gl;x()(jl,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QRadio:$l.A,QSpace:_e.A,QInput:$.A,QCardActions:Me.A}),x()(jl,"directives",{ClosePopup:al.A});const Yl={class:"text-h6"},Jl="AdvancedEventsDialog",Zl={__name:"AdvancedEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}}),c=()=>{console.log(Jl+": deleteAllEvents "+d.nodeNumber);t.notify({message:"Are you sure you want to delete all events for node "+i.getters.node_name(d.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_all_events(d.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),r=(0,a.g2)("q-card-actions"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(b,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(m,{style:{"min-width":"600px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Yl," Advanced events functions for node "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(r,{align:"left",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Delete all events",onClick:t[0]||(t[0]=e=>c())},null,512),[[v]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},et=Zl,lt=et;x()(Zl,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardActions:Me.A}),x()(Zl,"directives",{ClosePopup:al.A});const tt={class:"text-h6"},at={class:"text-h6"},ot={class:"text-h6"},nt={class:"q-pa-md q-gutter-sm"},st="SendEventDialog",it={__name:"SendEventDialog",props:{modelValue:{type:Boolean,required:!0},eventNumber:{type:Number,required:!0},sendingNodeNumber:{type:Number,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,()=>{console.log(st+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const u=()=>{console.log("send on "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?t.methods.short_on_event(i.sendingNodeNumber,i.eventNumber):t.methods.long_on_event(e,i.eventNumber)},c=()=>{console.log("send off "+i.eventIdentifier);var e=parseInt(i.eventIdentifier.slice(0,4),16);0==e?t.methods.short_off_event(i.sendingNodeNumber,i.eventNumber):t.methods.long_off_event(e,i.eventNumber)};return(e,l)=>{const d=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),v=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",tt," Test event : "+(0,n.v_)((0,o.R1)(t).getters.event_name(i.eventIdentifier)),1)]),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",at,"Sending Node "+(0,n.v_)(i.sendingNodeNumber),1),(0,a.Lk)("div",ot,"Event "+(0,n.v_)(s.value)+":"+(0,n.v_)(i.eventNumber),1)]),_:1}),(0,a.bF)(b,{class:"q-pa-md"},{default:(0,a.k6)(()=>[l[3]||(l[3]=(0,a.Lk)("div",{class:"text-h6"},"Generate event",-1)),l[4]||(l[4]=(0,a.Lk)("div",{class:"text-subtitle2"},"Send this event as ON or OFF",-1)),(0,a.Lk)("div",nt,[(0,a.bo)((0,a.bF)(d,{color:"green",label:"ON",onClick:l[0]||(l[0]=e=>u())},null,512),[[f]]),(0,a.bo)((0,a.bF)(d,{color:"negative",label:"OFF",onClick:l[1]||(l[1]=e=>c())},null,512),[[f]])])]),_:1,__:[3,4]}),(0,a.bF)(v,{align:"right",class:"text-primary"})]),_:1})]),_:1},8,["modelValue"])}}},dt=it,rt=dt;x()(it,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QCardActions:Me.A}),x()(it,"directives",{ClosePopup:al.A});const ut={class:"text-h6"},ct="NameEventDialog",mt={__name:"NameEventDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(""),i=(0,o.KR)(""),d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)(()=>{t.state.layout.eventDetails[d.eventIdentifier]&&(s.value=t.state.layout.eventDetails[d.eventIdentifier].name,i.value=t.state.layout.eventDetails[d.eventIdentifier].group)});const c=()=>{console.log(ct+": clickAccept: name: "+d.eventIdentifier+" "+s.value),t.setters.event_name(d.eventIdentifier,s.value),t.setters.event_group(d.eventIdentifier,i.value),s.value="",i.value=""};return(e,l)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-input"),v=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(g,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",ut," Edit name for event : "+(0,n.v_)((0,o.R1)(t).getters.event_name(d.eventIdentifier)),1)]),_:1}),(0,a.bF)(v,{class:"q-pt-none"},{default:(0,a.k6)(()=>[l[4]||(l[4]=(0,a.Lk)("div",{class:"text-h6"},"Event name",-1)),(0,a.bF)(b,{dense:"",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[4]}),(0,a.bF)(v,{class:"q-pt-none"},{default:(0,a.k6)(()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"},"Event group",-1)),(0,a.bF)(b,{dense:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[5]}),(0,a.bF)(p,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",label:"Accept",onClick:l[2]||(l[2]=e=>c())},null,512),[[_]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},bt=mt,vt=bt;x()(mt,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QInput:$.A,QCardActions:Me.A}),x()(mt,"directives",{ClosePopup:al.A});const pt={class:"text-h6"},gt={class:"q-pa-xs q-gutter-sm"},ft="EventTeachDialog",_t={__name:"EventTeachDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),u=(0,o.KR)(""),c=(0,o.KR)(),m=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(""),f=(0,o.KR)(""),_=e,y=l,h=(0,a.EW)({get(){return _.modelValue},set(e){y("update:modelValue",e)}});(0,a.wB)(h,()=>{k.value=""});const k=(0,o.KR)(),N=(0,o.KR)([]),x=(0,o.KR)([]),w=(0,o.KR)([]),q=[{name:"number",field:"number",required:!0,label:"Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"index",field:"index",required:!0,label:"Index",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],F=(0,a.EW)(()=>i.state.nodes.updateTimestamp);(0,a.wB)(F,()=>{_.eventIdentifier&&V()});const V=async()=>{try{w.value=[],x.value=[];var e=Object.values(i.state.nodes);e.forEach(e=>{if(e.nodeNumber>0&&e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let l=Object.values(e.storedEventsNI);l.forEach(async l=>{if(l.eventIdentifier==_.eventIdentifier){x.value.push(e.nodeNumber);var t=i.getters.node_name(e.nodeNumber);w.value.push({number:e.nodeNumber,name:t,eventIndex:l.eventIndex,eventIdentifier:l.eventIdentifier})}})}}),C()}catch(e){(0,d.Qn)(ft+": update_taught_nodes "+e)}},C=()=>{try{N.value=[];var e=i.state.nodes;for(var l in e){let e=!0;for(var t in x.value)x.value[t]==l&&(e=!1);if(1!=i.state.nodes[l].status&&(e=!1),1!=i.state.nodes[l].flim&&(e=!1),e&&l>0){var a=l+": ";i.state.layout&&(a+=i.getters.node_name(l),N.value.push(a))}}}catch(e){(0,d.Qn)(ft+": update_available_nodes: "+e)}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{_.eventIdentifier&&V()});const A=async e=>{if((0,r.g)(i,e));else{g.value="",f.value="Loading Node Parameters",p.value=!0,i.methods.request_all_node_parameters(e,20,100);let l=Date.now();while(Date.now()-l<6e4){if(g.value.length>0)break;await(0,d.yy)(100)}p.value=!1}},E=async e=>{var l=i.state.nodes[e].parameters[6];if(void 0!=i.state.nodes[e].nodeVariables[l]);else{g.value="",f.value="Loading Node Variables",i.methods.request_all_node_variables(e),p.value=!0;for(let e=0;e<1e4;e++){if(g.value.length>0)break;await(0,d.yy)(10)}p.value=!1}},R=async()=>{f.value="Loading Event Indexes",(0,d.Qn)(ft+`: ${f.value}`),g.value="",p.value=!0,i.methods.request_all_node_events(_.nodeNumber);let e=Date.now();while(Date.now()-e<6e4){if(g.value.length>0)break;await(0,d.yy)(10)}p.value=!1},Q=async()=>{if((0,d.Qn)(ft+`: clickTeachEvent: ${k.value} : ${_.eventIdentifier}`),""!=k.value){var e=k.value.split(":"),l=parseInt(e[0]);if(c.value=l,i.state.nodes[l].eventSpaceLeft>0)await A(l),await E(l),b(i,l,_.eventIdentifier),u.value=_.eventIdentifier,v.value=!0,m.value=!0;else{t.notify({message:"no event space left",timeout:0,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}k.value=void 0}},I=async(e,l)=>{let t=parseInt(e);(0,d.Qn)(ft+": clickVariables "+t+" "+l),c.value=t,u.value=l,v.value=!1,await A(t),await E(t),0==i.state.nodes[e].VLCB&&await R(),await i.methods.request_event_variables_by_identifier(t,l),m.value=!0};return(e,l)=>{const t=(0,a.g2)("q-btn"),s=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-select"),b=(0,a.g2)("q-card"),y=(0,a.g2)("q-td"),x=(0,a.g2)("q-tr"),F=(0,a.g2)("q-table"),V=(0,a.g2)("q-dialog"),C=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(V,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[C]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",pt," Teach event : "+(0,n.v_)((0,o.R1)(i).getters.event_name(_.eventIdentifier)),1)]),_:1})]),_:1}),(0,a.bF)(b,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{"max-height":"75vh"},class:"q-py-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{style:{width:"250px",height:"200px"},class:"q-ma-md q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-pa-xs"},{default:(0,a.k6)(()=>[l[6]||(l[6]=(0,a.Lk)("div",{class:"text-h6"},"Teach Event",-1)),l[7]||(l[7]=(0,a.Lk)("div",{class:"text-subtitle2"},"Select node",-1)),(0,a.bF)(r,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),options:N.value},null,8,["modelValue","options"]),(0,a.Lk)("div",gt,[(0,a.bF)(t,{color:"negative",label:"Teach",onClick:l[1]||(l[1]=e=>Q()),"no-caps":""})])]),_:1,__:[6,7]})]),_:1}),(0,a.bF)(b,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"no-margin q-py-none-xs",style:{width:"450px"}},{default:(0,a.k6)(()=>[l[8]||(l[8]=(0,a.Lk)("div",{class:"text-h6"},"Taught Events",-1)),l[9]||(l[9]=(0,a.Lk)("div",{class:"text-subtitle2"},"Nodes using this event",-1)),(0,a.bF)(F,{flat:"",bordered:"",dense:"",rows:w.value,columns:q,"row-key":"number","hide-header":"","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(x,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{key:"number",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.number),1)]),_:2},1032,["props"]),(0,a.bF)(y,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.name),1)]),_:2},1032,["props"]),(0,a.bF)(y,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(t,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:l=>I(e.row.number,e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1,__:[8,9]})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Ol),{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),nodeNumber:c.value,eventIdentifier:u.value,newEvent:v.value},null,8,["modelValue","nodeNumber","eventIdentifier","newEvent"]),(0,a.bF)((0,o.R1)(ml),{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=e=>p.value=e),callingModule:"Event Teach",message:f.value,onWaitingOnBusTrafficDialogEvent:l[5]||(l[5]=e=>g.value=e)},null,8,["modelValue","message"])],64)}}},yt=_t,ht=yt;x()(_t,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QSelect:re.A,QTable:Ze.A,QTr:el.A,QTd:ll.A}),x()(_t,"directives",{ClosePopup:al.A});const kt={__name:"EventsByNodeViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events By Node View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[2]||(l[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of the events for a specific node ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[4]||(l[4]=[(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[5]||(l[5]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[6]||(l[6]=[(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[7]||(l[7]=[(0,a.Lk)("div",{class:"text_body1"}," The event source shows if the event has been read from the module (stored event) or if the event hasn't been read from the module, but has been seen on the CAN bus (Bus event), which is the case for default events on some modules that can't be read from the module ",-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"])}}},Nt=kt,xt=Nt;x()(kt,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A}),x()(kt,"directives",{ClosePopup:al.A});const wt={style:{height:"35vh"}},qt={class:"text-h6"},Ft={class:"text-h6",style:{"min-width":"250px"}},Vt={class:"full-width"},Ct="EventsListByNode",At={__name:"EventsListByNode",props:{nodeNumber:{type:Number,required:!0}},setup(e){const l=(0,s.A)(),t=(0,a.WQ)("store"),i=(0,o.KR)([]),r=(0,o.KR)(""),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),_=(0,o.KR)(),y=(0,o.KR)(""),h=((0,o.KR)(0),(0,o.KR)(0)),k=(0,o.KR)(""),N=(0,o.KR)(""),x=e,w=[{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!1,label:"Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",required:!1,label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Event type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Event source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],q=(0,a.EW)(()=>x.nodeNumber);(0,a.wB)(q,()=>{x.nodeNumber&&A()});const F=(0,a.EW)(()=>Object.values(t.state.busEvents));(0,a.wB)(F,()=>{x.nodeNumber&&A()});const V=(0,a.EW)(()=>t.state.layout.updateTimestamp);(0,a.wB)(V,()=>{x.nodeNumber&&A()});const C=(0,a.EW)(()=>t.state.nodes.updateTimestamp);(0,a.wB)(C,()=>{x.nodeNumber&&A()});const A=()=>{i.value=[];try{var e=Object.values(t.state.nodes[x.nodeNumber].storedEventsNI);e.forEach(e=>{var l=parseInt(e.eventIdentifier.substr(0,4),16),a=parseInt(e.eventIdentifier.substr(4,4),16);if("short"==t.state.events_view_mode&&l>0||"long"==t.state.events_view_mode&&0==l||"named"==t.state.events_view_mode&&""==t.state.layout.eventDetails[e.eventIdentifier].name.length);else{let o={};o["eventIdentifier"]=e.eventIdentifier,o["eventName"]=t.getters.event_name(e.eventIdentifier),o["eventGroup"]=t.getters.event_group(e.eventIdentifier),o["nodeNumber"]=l,o["eventNumber"]=a,o["eventType"]=0==l?"short":"long",o["storedEvent"]=!0,o["source"]="stored event",i.value.push(o)}});var l=Object.values(t.state.busEvents);l.forEach(l=>{if(l.nodeNumber==x.nodeNumber){var a=!1,o=l.eventIdentifier;if("short"==l.type&&(o="0000"+o.substr(4,4)),e.forEach(e=>{o==e.eventIdentifier&&(a=!0)}),0==a){let e={};e["eventIdentifier"]=o,e["eventName"]=t.getters.event_name(o),e["eventGroup"]=t.getters.event_group(o),e["nodeNumber"]=l.nodeNumber,e["eventNumber"]=l.eventNumber,e["eventType"]=l.type,e["storedEvent"]=!1,e["source"]="bus event",i.value.push(e)}}}),i.value.sort(function(e,l){return e.eventIdentifier<l.eventIdentifier?-1:1})}catch{}};(0,a.KC)(()=>{x.nodeNumber&&A()});const E=async()=>{N.value="Loading Event Indexes",(0,d.Qn)(Ct+`: ${N.value}`),k.value="",m.value=!0,t.methods.request_all_node_events(x.nodeNumber);let e=Date.now();while(Date.now()-e<6e4){if(k.value.length>0)break;await(0,d.yy)(10)}m.value=!1},R=async e=>{(0,d.Qn)(Ct+": getEventVariables:"),k.value="",N.value="Loading Event Variables",m.value=!0,t.methods.request_event_variables_by_identifier(x.nodeNumber,e);let l=Date.now();while(Date.now()-l<6e4){if(k.value.length>0)break;await(0,d.yy)(10)}m.value=!1},Q=()=>{if((0,d.Qn)(Ct+": clickAddEvent"),t.state.nodes[x.nodeNumber].eventSpaceLeft>0)u.value=!0;else{l.notify({message:"no event space left",timeout:0,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}},I=()=>{(0,d.Qn)(Ct+": clickAdvanced"),c.value=!0},L=e=>{(0,d.Qn)(Ct+": clickDelete");l.notify({message:"Are you sure you want to delete event "+t.getters.event_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{(0,d.Qn)("removeEvent "+x.nodeNumber+" "+e),t.methods.remove_event(x.nodeNumber,e)}},{label:"NO",color:"white",handler:()=>{}}]})},S=e=>{(0,d.Qn)(Ct+": clickEventName "+e),y.value=e,_.value=t.getters.event_name(e),g.value=!0},W=()=>{(0,d.Qn)(Ct+": clickInfo"),p.value=!0},B=()=>{(0,d.Qn)(Ct+": clickRefresh"),t.methods.request_all_node_events(x.nodeNumber),A()},T=e=>{(0,d.Qn)(Ct+": send OFF "+e);var l=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==l?t.methods.short_off_event(x.nodeNumber,a):t.methods.long_off_event(l,a)},D=e=>{(0,d.Qn)(Ct+": send ON "+e);var l=parseInt(e.slice(0,4),16),a=parseInt(e.slice(4,8),16);0==l?t.methods.short_on_event(x.nodeNumber,a):t.methods.long_on_event(l,a)},K=e=>{(0,d.Qn)(Ct+": clickTeach"),y.value=e,b.value=!0},U=()=>{switch((0,d.Qn)(Ct+": clickToggleViewMode"),t.state.events_view_mode){case"all":t.state.events_view_mode="short";break;case"short":t.state.events_view_mode="long";break;case"long":t.state.events_view_mode="named";break;case"named":t.state.events_view_mode="all";break;default:t.state.events_view_mode="all"}A()},O=async e=>{(0,d.Qn)(Ct+`: clickVariables: node ${x.nodeNumber} event ${e}`),y.value=e,0==t.state.nodes[x.nodeNumber].VLCB&&await E(),await R(e),v.value=!0};return(l,s)=>{const d=(0,a.g2)("q-btn"),_=(0,a.g2)("q-space"),q=(0,a.g2)("q-icon"),F=(0,a.g2)("q-input"),V=(0,a.g2)("q-banner"),C=(0,a.g2)("q-td"),A=(0,a.g2)("q-tr"),E=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",wt,[(0,a.bF)(V,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:s[0]||(s[0]=e=>U())}),(0,a.Lk)("div",Ft,"view "+(0,n.v_)((0,o.R1)(t).state.events_view_mode)+" events",1),(0,a.bF)(d,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:s[1]||(s[1]=e=>W())}),(0,a.bF)(_),s[15]||(s[15]=(0,a.eW)("      ")),(0,a.bF)(F,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=e=>r.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),s[16]||(s[16]=(0,a.eW)("    ")),(0,a.bF)(d,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:s[3]||(s[3]=e=>Q())}),(0,a.bF)(d,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:s[4]||(s[4]=e=>I())}),(0,a.bF)(d,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:s[5]||(s[5]=e=>B())})]),default:(0,a.k6)(()=>[(0,a.Lk)("div",qt," Events for node : "+(0,n.v_)((0,o.R1)(t).getters.node_name(x.nodeNumber)),1)]),_:1}),(0,a.Lk)("div",Vt,[(0,a.bF)(E,{class:"events-list-by-node-table",bordered:"",dense:"",rows:i.value,columns:w,filter:r.value,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(A,{props:e,class:(0,n.C4)([y.value==e.row.eventIdentifier?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)(()=>[(0,a.bF)(C,{key:"eventIdentifier",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventName),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventGroup",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventGroup),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"nodeNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventType),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"source",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.source),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>S(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",disabled:!e.row.storedEvent,color:"primary",size:"md",label:"Variables",onClick:l=>O(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>K(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>D(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>s[17]||(s[17]=[(0,a.eW)("send ON")])),_:2,__:[17]},1032,["onClick"]),(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>T(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>s[18]||(s[18]=[(0,a.eW)("send OFF")])),_:2,__:[18]},1032,["onClick"]),(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>L(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]),_:1},8,["rows","filter"])]),(0,a.bF)((0,o.R1)(Hl),{modelValue:u.value,"onUpdate:modelValue":s[6]||(s[6]=e=>u.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(lt),{modelValue:c.value,"onUpdate:modelValue":s[7]||(s[7]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(vt),{modelValue:g.value,"onUpdate:modelValue":s[8]||(s[8]=e=>g.value=e),eventIdentifier:y.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(ht),{modelValue:b.value,"onUpdate:modelValue":s[9]||(s[9]=e=>b.value=e),eventIdentifier:y.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(rt),{modelValue:f.value,"onUpdate:modelValue":s[10]||(s[10]=e=>f.value=e),sendingNodeNumber:e.nodeNumber,eventNumber:h.value,eventIdentifier:y.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(Ol),{modelValue:v.value,"onUpdate:modelValue":s[11]||(s[11]=e=>v.value=e),nodeNumber:e.nodeNumber,eventIdentifier:y.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(xt),{modelValue:p.value,"onUpdate:modelValue":s[12]||(s[12]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ml),{modelValue:m.value,"onUpdate:modelValue":s[13]||(s[13]=e=>m.value=e),callingModule:"EventsListByNode",message:N.value,onWaitingOnBusTrafficDialogEvent:s[14]||(s[14]=e=>k.value=e)},null,8,["modelValue","message"])])}}};var Et=t(492);const Rt=(0,U.A)(At,[["__scopeId","data-v-7ca5b1f0"]]),Qt=Rt;x()(At,"components",{QBanner:Je.A,QBtn:fe.A,QSpace:_e.A,QInput:$.A,QIcon:Et.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QField:G.A});const It={__name:"ProgramNodeInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about Node Programming ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[2]||(l[2]=[(0,a.Lk)("div",{class:"text_body1"}," Configuration memory is used to enable or disable hardware features of the MCU. ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text_body1"}," EEPROM memory is used to hold non-volatile settings for the firmware (such as node number, events etc..) ",-1),(0,a.Lk)("div",{class:"text_body1"}," Re-programming EEPROM memory will force the node into an un-initialsed state (green led lit) and will need to be re-initialised with a node number (typically started by holding the button down until the yellow led starts flashing) ",-1)])),_:1,__:[3]})]),_:1})]),_:1},8,["modelValue"])}}},Lt=It,St=Lt;x()(It,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A}),x()(It,"directives",{ClosePopup:al.A});const Wt={class:"text-h6"},Bt={class:"q-pa-xs row"},Tt={key:0,class:"text-body1"},Dt={class:"text-h6"},Kt="ProgramNodeDialog",Ut={__name:"programNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number},mode:{type:String,default:"NORMAL"}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(null),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(),_=(0,o.KR)(""),y=(0,o.KR)(null),h=(0,o.KR)(null),k=(0,o.KR)(null),N=(0,o.KR)(!1),x=(0,o.KR)(!1),w=(0,o.KR)();var q=0,F=void 0;const V=e,C=l,A=(0,a.EW)({get(){return V.modelValue},set(e){C("update:modelValue",e)}});(0,a.wB)(A,()=>{w.value="program node "+i.getters.node_name(V.nodeNumber),E(),"BOOT"==V.mode&&(c.value=!0,b.value=!0,m.value=!0,v.value=!0,p.value=!0,g.value=!0,w.value="program node in boot mode")}),(0,a.wB)(r,()=>{null!=r.value&&((0,d.Qn)(Kt+`: WATCH uploadFile ${r.value.name}`),i.methods.request_firmware_info(r.value))}),(0,a.wB)(u,()=>{u.value&&t.notify({message:"WARNING: Programming the CONFIG may break the bootloader",caption:"Proceed only if the firmware explicitly requires it, otherwise CANCEL",timeout:0,position:"center",color:"primary",actions:[{label:"PROCEED",color:"white",handler:async()=>{}},{label:"CANCEL",color:"white",handler:()=>{u.value=!1}}]})}),(0,a.wB)(m,()=>{m.value?(c.value=!0,v.value=!0):(c.value=!1,v.value=!1)}),i.eventBus.on("PROGRAM_NODE_PROGRESS",e=>{if(A.value&&((0,d.Qn)(Kt+": PROGRAM_NODE_PROGRESS event: "+e),_.value=e,e.includes("FIRMWARE:"))){const l=e.split("FIRMWARE:");f.value=l[1]}});const E=()=>{(0,d.Qn)(Kt+": clearFileSelected"),r.value=null,x.value=!1,u.value=!1,c.value=!1,m.value=!1,b.value=!1,v.value=!1,g.value=!1,p.value=!1};i.eventBus.on("FIRMWARE_INFO",e=>{if(A.value){(0,d.Qn)(Kt+": FIRMWARE_INFO event:");let l=i.state.nodes[V.nodeNumber].parameters[9],a=i.state.nodes[V.nodeNumber].parameters[3];y.value="A5"+(0,d.xT)(e.moduleID,2),h.value=e.targetCpuType,k.value=e.versionNumber,e.betaNumber>0&&(k.value+=" beta "+e.betaNumber),x.value=!0,void 0!=l&&h.value!=l&&(m.value=!0,g.value=!0,t.notify({message:"WARNING: CPU types do not match",caption:"PROCEED accepts the mismatch, and forces EEPROM to be programmed, CANCEL clears all selections",timeout:0,position:"center",color:"primary",actions:[{label:"PROCEED",color:"white",handler:async()=>{(0,d.Qn)(Kt+": FIRMWARE_INFO event: PROCEED")}},{label:"CANCEL",color:"white",handler:()=>{(0,d.Qn)(Kt+": FIRMWARE_INFO event: CANCEL"),E()}}]})),void 0!=a&&e.moduleID!=a&&(c.value=!0,v.value=!0,t.notify({message:"WARNING: Module types do not match",caption:"PROCEED accepts the mismatch, and forces EEPROM to be programmed, CANCEL clears all selections",timeout:0,position:"center",color:"primary",actions:[{label:"PROCEED",color:"white",handler:async()=>{(0,d.Qn)(Kt+": FIRMWARE_INFO event: PROCEED")}},{label:"CANCEL",color:"white",handler:()=>{(0,d.Qn)(Kt+": FIRMWARE_INFO event: CANCEL"),E()}}]}))}}),(0,a.KC)(()=>{(0,d.Qn)(Kt+`: onBeforeMount node ${V.nodeNumber}`)}),(0,a.sV)(()=>{(0,d.Qn)(Kt+`: onMounted node ${V.nodeNumber}`)}),(0,a.$u)(()=>{(0,d.Qn)(Kt+`: onUpdated node ${V.nodeNumber}`)});const R=()=>{console.log(Kt+": clickInfo"),N.value=!0},Q=async()=>{q=u.value?1|q:-2&q,q=c.value?2|q:-3&q,q=m.value?4|q:-5&q,q=b.value?8|q:-9&q,F=i.state.nodes[V.nodeNumber].parameters[9],console.log(Kt+": clickProgram: node: "+V.nodeNumber+" cpuType: "+F+" flags: "+q),f.value="",r.value?i.methods.program_node(V.nodeNumber,F,q,r.value):console.log(Kt+": clickProgram: uploadFile no value ")},I=async()=>{console.log(Kt+": clickClose: flags: "+q),2&q?i.methods.query_all_nodes():i.methods.request_all_node_parameters(V.nodeNumber,20,100),A.value=!1};return(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-space"),q=(0,a.g2)("q-banner"),F=(0,a.g2)("q-file"),V=(0,a.g2)("q-card-section"),C=(0,a.g2)("q-checkbox"),E=(0,a.g2)("q-card"),L=(0,a.g2)("q-card-actions"),S=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(S,{modelValue:A.value,"onUpdate:modelValue":t[8]||(t[8]=e=>A.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(E,{style:{"min-width":"750px"}},{default:(0,a.k6)(()=>[(0,a.bF)(q,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[0]||(t[0]=e=>R())}),(0,a.bF)(d),(0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close",onClick:t[1]||(t[1]=e=>I())})]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Wt,"   "+(0,n.v_)(w.value),1)]),_:1}),(0,a.Lk)("div",Bt,[(0,a.bF)(E,{flat:"",style:{width:"370px"}},{default:(0,a.k6)(()=>[(0,a.bF)(V,null,{default:(0,a.k6)(()=>[t[10]||(t[10]=(0,a.Lk)("div",{class:"text-h6"},"Select a file to upload",-1)),(0,a.bF)(F,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=e=>r.value=e),label:"Pick one file",dense:"",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"])]),_:1,__:[10]}),(0,a.bF)(V,{style:{"min-height":"100px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[x.value?((0,a.uX)(),(0,a.CE)("div",Tt,[(0,a.eW)(" File module type: "+(0,n.v_)((0,o.R1)(i).state.moduleNames[y.value].name)+" ",1),t[11]||(t[11]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" File CPU type: "+(0,n.v_)(h.value)+" ",1),t[12]||(t[12]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" File version: "+(0,n.v_)(k.value)+" ",1),t[13]||(t[13]=(0,a.Lk)("br",null,null,-1))])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(V,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>t[14]||(t[14]=[(0,a.eW)(" FLASH memory is always programmed ")])),_:1,__:[14]}),(0,a.bF)(V,{style:{"max-width":"300px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(C,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),label:"Program configuration"},null,8,["modelValue"]),(0,a.bF)(C,{disable:v.value,modelValue:c.value,"onUpdate:modelValue":t[4]||(t[4]=e=>c.value=e),label:"Program EEPROM"},null,8,["disable","modelValue"]),(0,a.bF)(C,{disable:g.value,modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=e=>m.value=e),label:"Ignore CPU type"},null,8,["disable","modelValue"]),(0,a.bF)(C,{disable:p.value,modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),label:"Program in Boot Mode"},null,8,["disable","modelValue"])]),_:1})]),_:1}),(0,a.bF)(E,{flat:"",class:"q-pa-sm",style:{width:"370px"}},{default:(0,a.k6)(()=>["NORMAL"==e.mode?((0,a.uX)(),(0,a.Wv)(V,{key:0},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Dt,[(0,a.eW)(" Node Module type: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].moduleName)+" ",1),t[15]||(t[15]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" Node CPU type: "+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].cpuName)+" ("+(0,n.v_)((0,o.R1)(i).state.nodes[e.nodeNumber].parameters[9])+") ",1)]),t[16]||(t[16]=(0,a.Lk)("br",null,null,-1))]),_:1,__:[16]})):(0,a.Q3)("",!0),"BOOT"==e.mode?((0,a.uX)(),(0,a.Wv)(V,{key:1},{default:(0,a.k6)(()=>t[17]||(t[17]=[(0,a.Lk)("div",{class:"text-h6"}," Program in boot mode ",-1),(0,a.Lk)("div",{class:"text-body1"}," Note that in this mode the cpu type can't be checked ",-1),(0,a.Lk)("br",null,null,-1)])),_:1,__:[17]})):(0,a.Q3)("",!0),t[18]||(t[18]=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Warnings: "),(0,a.Lk)("br")],-1)),t[19]||(t[19]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Disconnect all SLiM nodes to prevent corruption. "),(0,a.Lk)("br")],-1)),t[20]||(t[20]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)(" Ensure there is mimimal or no traffic on the CAN bus before programming to avoid failure (issue with older bootloader firmware). "),(0,a.Lk)("br")],-1)),t[21]||(t[21]=(0,a.Lk)("div",{class:"text-body1"}," In the event of a failure, and if the node is left in bootmode (both leds lit), then retry with the 'Program in Boot Mode' option checked. ",-1))]),_:1,__:[18,19,20,21]})]),(0,a.bF)(V,{class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{align:"left",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",label:"Program",onClick:t[7]||(t[7]=e=>Q())})]),_:1}),(0,a.bF)(E,{align:"center",flat:"",class:"text-h6",style:{width:"370px"}},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(f.value),1)]),_:1})]),_:1}),(0,a.bF)(V,{class:"bg-info text-h6 text-white"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null," Status: "+(0,n.v_)(_.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(St),{modelValue:N.value,"onUpdate:modelValue":t[9]||(t[9]=e=>N.value=e)},null,8,["modelValue"])],64)}}},Ot=Ut,Mt=Ot;x()(Ut,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QSpace:_e.A,QCardSection:h.A,QFile:kl.A,QCheckbox:k.A,QCardActions:Me.A});const Xt={class:"text-h6"},Pt={class:"text-h6"},zt="NodeBackupDialog",jt={__name:"NodeBackupDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(!1),u=(0,o.KR)(""),c=(0,o.KR)(""),b=(0,o.KR)("starting"),v=e,p=l,g=(0,a.EW)({get(){return v.modelValue},set(e){p("update:modelValue",e)}});(0,a.wB)(g,()=>{g.value&&f()});const f=async()=>{console.log(zt+": backupNode "+v.nodeNumber);var e=!1,l="",a="negative";b.value="refresh event variables",await m(i,v.nodeNumber);let o=Date.now();b.value="loading node variables",e=await _(),0==e&&(console.log(zt+": backupNode "+v.nodeNumber+" failed to load Node variables"),l="Node variable load failed"),b.value="waiting for events";while(Date.now()-o<1e3)await(0,d.yy)(100);e&&(b.value="loading event variables",e=await y(),0==e&&(console.log(zt+": backupNode "+v.nodeNumber+" failed to load Event variables"),l="Event variable load failed")),e?(i.methods.save_node_backup(v.nodeNumber,i.state.nodes[v.nodeNumber]),b.value="Backup completed",i.eventBus.emit("NODE_BACKUP_COMPLETED")):(b.value=l,t.notify({message:l,timeout:1e3,type:a,position:"center",actions:[{label:"Dismiss",handler:()=>{}}]}))},_=async()=>{var e=!1;i.methods.request_all_node_variables(v.nodeNumber),c.value="Loading Node Variables",u.value="",r.value=!0;var l=Date.now();while(Date.now()-l<6e4){if(u.value.length>0){e=!0;break}await(0,d.yy)(100)}return r.value=!1,e},y=async()=>{var e=!1;try{c.value="Loading Event Variables",u.value="",r.value=!0,i.methods.requestAllEventVariablesForNode(v.nodeNumber);var l=Date.now();while(Date.now()-l<12e4){if(u.value.length>0){e=!0;break}await(0,d.yy)(100)}r.value=!1}catch(e){console.log(zt+": loadEventVariables: "+e)}return e};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),p=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(v,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=e=>g.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(m,{style:{"min-width":"450px","min-height":"300px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[p]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Xt," Backup node "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(m,{style:{height:"200px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-primary"},"status",-1)),(0,a.Lk)("div",Pt,(0,n.v_)(b.value),1)]),_:1,__:[3]})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(ml),{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),callingModule:"Node Backup",message:c.value,onWaitingOnBusTrafficDialogEvent:t[2]||(t[2]=e=>u.value=e)},null,8,["modelValue","message"])],64)}}},$t=jt,Gt=$t;x()(jt,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A}),x()(jt,"directives",{ClosePopup:al.A});const Ht={class:"text-h6"},Yt={style:{"max-height":"85vh"},class:"scroll no-margin no-padding"},Jt={class:"q-pa-md row",style:{"max-height":"80vh"}},Zt={class:"text-subtitle2"},ea={class:"text-subtitle2"},la={class:"text-subtitle2"},ta={class:"text-subtitle2"},aa={class:"text-subtitle2"},oa={class:"text-subtitle2"},na={class:"text-h6"},sa="NodeBackupAndRestoreDialog",ia={__name:"NodeBackupAndRestoreDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(""),u=(0,o.KR)(!1),c=(0,o.KR)(""),m=(0,o.KR)(!1),b=(0,o.KR)([]),v=(0,o.KR)(""),p=(0,o.KR)(""),g=(0,o.KR)(""),f=(0,o.KR)(""),_=(0,o.KR)("awaiting backup selection"),y=(0,o.KR)(!1),h=(0,o.KR)(!1),k=(0,o.KR)(!1),N=(0,o.KR)(),x=(0,o.KR)(""),w=(0,o.KR)(""),q=(0,o.KR)(!1),F=[{name:"backup",field:"backup",required:!0,label:"backup",align:"left",sortable:!0}],V=e,C=l,A=(0,a.EW)({get(){return V.modelValue},set(e){C("update:modelValue",e)}});(0,a.wB)(A,()=>{A.value&&(r.value=void 0,u.value=!1,v.value="",p.value="",g.value="",f.value="",y.value=!1,i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,V.nodeNumber),i.state.restoredData={})});const E=(0,a.EW)(()=>i.state.restoredData);(0,a.wB)(E,()=>{try{c.value=E.value.backupNode,v.value=c.value.moduleName,p.value=c.value.parameters[6],g.value=c.value.eventCount,f.value=c.value.parameters[5]}catch(e){console.log(sa+": WATCH restoredData "+e),c.value={},v.value="",p.value="",g.value="",f.value=""}});const R=(0,a.EW)(()=>i.state.backups_list);(0,a.wB)(R,()=>{Q()});const Q=()=>{b.value=[],R.value.forEach(e=>{b.value.push({backup:e})})},I=async()=>{console.log(sa+": restoreNodeVariables"),_.value="restoring Node Variables",y.value=!0;try{let e=c.value.nodeVariables;for(let l of Object.keys(e).sort(function(e,l){return e-l}))if(l>0){let t=e[l];console.log(sa+`: restoreNodeVariables: ${l} ${t}`);let a=!1;i.methods.update_node_variable(V.nodeNumber,l,t,a),await(0,d.yy)(100)}}catch(e){console.log(sa+": restoreNodeVariables: "+e)}await(0,d.yy)(2e3);while(Date.now()-i.state.cbusTrafficTimeStamp<500)await(0,d.yy)(100);y.value=!1},L=async()=>{console.log(sa+": restoreEvents"),y.value=!0;try{_.value="erasing Events",i.methods.delete_all_events(V.nodeNumber),await(0,d.yy)(2e3),_.value="restoring Events & Variables";var e=c.value.storedEventsNI;console.log(sa+`: restoreEventVariables: storedEventsNI ${JSON.stringify(e)}`);for(const l in e)console.log(sa+": restoreEvents: "+l),await S(l)}catch(e){console.log(sa+": restoreEvents: "+e)}await(0,d.yy)(2e3);while(Date.now()-i.state.cbusTrafficTimeStamp<1e3)await(0,d.yy)(100);y.value=!1},S=async e=>{try{let l=c.value.storedEventsNI[e].variables;for(let t of Object.keys(l).sort(function(e,l){return e-l}))if(t>0){let l=c.value.storedEventsNI[e].variables[t],a=!1;i.methods.event_teach_by_identifier(V.nodeNumber,e,t,l,a),await(0,d.yy)(200)}}catch(e){console.log(sa+": restoreEventVariables: "+e)}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),i.eventBus.on("NODE_BACKUP_COMPLETED",()=>{i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,V.nodeNumber)}),i.eventBus.on("NODE_BACKUP_SAVED",e=>{A.value&&t.notify({message:"Backup saved",caption:e,timeout:2e3,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})});const W=async()=>{console.log(sa+": actionUpload");if(N.value){var e=N.value.name;console.log(sa+": selected filename "+e);let l=new FileReader;l.readAsText(N.value),l.onload=async function(){try{var e=JSON.parse(l.result);i.methods.save_node_backup(V.nodeNumber,e.backupNode),await(0,d.yy)(500),i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,V.nodeNumber)}catch(e){t.notify({message:"backup file upload has failed",caption:"please check the file is valid JSON, and try again",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})}},N.value=null}else console.log(sa+": actionUpload: uploadFile no value ")},B=async()=>{console.log(sa+": clickBackup"),q.value=!0},T=async()=>{console.log(sa+`: clickChangeFilename ${w.value} ${x.value}`),x.value.length>0&&i.methods.rename_node_backup(i.state.layout.layoutDetails.title,V.nodeNumber,w.value,x.value),x.value=""},D=e=>{console.log(sa+": clickBackupList on ",e),r.value=e,i.methods.request_node_backup(i.state.layout.layoutDetails.title,V.nodeNumber,r.value),u.value=!0,_.value="ready to restore"},K=e=>{console.log(sa+": clickDelete ",e);t.notify({message:"Are you sure you want to delete backup "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_node_backup(i.state.layout.layoutDetails.title,V.nodeNumber,e),await(0,d.yy)(50),i.methods.request_node_backups_list(i.state.layout.layoutDetails.title,V.nodeNumber)}},{label:"NO",color:"white",handler:()=>{}}]})},U=async()=>{console.log(sa+`: clickDownload ${r.value}`);let e=JSON.stringify(i.state.restoredData,null,"  "),l=document.createElement("a");l.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(e)),l.setAttribute("download",r.value),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)},O=()=>{console.log(sa+": clickImport"),k.value=!0},M=async e=>{if(u.value=!1,console.log(sa+": clickRestore"),v.value==i.getters.module_name(V.nodeNumber))_.value="restore in progress",await I(),await L(),_.value="node resetting",i.methods.reset_node(V.nodeNumber),await(0,d.yy)(2e3),i.methods.request_all_node_variables(V.nodeNumber,i.state.nodes[V.nodeNumber].parameters[6]),await(0,d.yy)(1e3),i.methods.request_all_node_events(V.nodeNumber),_.value="restore complete\n(select a backup to run again)";else{t.notify({message:"backup module name '"+v.value+"' doesnt match restore module name",caption:"restore module name '"+i.getters.module_name(V.nodeNumber)+"'",timeout:0,position:"center",color:'negative"',multiLine:!0,actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}},X=()=>{console.log(sa+": clickToggleBackupJSON"),m.value=!m.value};return(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),V=(0,a.g2)("q-card-section"),C=(0,a.g2)("q-space"),E=(0,a.g2)("q-card-actions"),R=(0,a.g2)("q-card"),Q=(0,a.g2)("q-separator"),I=(0,a.g2)("q-td"),L=(0,a.g2)("q-table"),S=(0,a.g2)("q-spinner-orbit"),P=(0,a.g2)("q-dialog"),z=(0,a.g2)("q-input"),j=(0,a.g2)("q-file"),$=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(P,{modelValue:A.value,"onUpdate:modelValue":t[5]||(t[5]=e=>A.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(R,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(V,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[$]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Ht," Backup & Restore Node: "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1})]),_:1}),(0,a.bF)(R,{align:"right",flat:"",inline:"",class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)(C),(0,a.bF)(C),(0,a.bF)(C),t[14]||(t[14]=(0,a.Lk)("div",{class:"text-h6"},"Backup this node",-1)),t[15]||(t[15]=(0,a.eW)("   ")),(0,a.bF)(E,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",label:"backup",onClick:t[0]||(t[0]=e=>B())})]),_:1}),(0,a.bF)(C)]),_:1,__:[14,15]}),(0,a.bF)(Q),(0,a.Lk)("div",Yt,[(0,a.Lk)("div",Jt,[(0,a.bF)(R,{flat:"",inline:"",class:"q-pa-none q-ma-none",style:{width:"500px"}},{default:(0,a.k6)(()=>[t[16]||(t[16]=(0,a.Lk)("div",{class:"text-h6"},"Select a backup from the list to download or restore",-1)),(0,a.bF)(V,{style:{"max-height":"75vh"},class:"scroll no-margin q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{class:"restore-node-table",dense:"",rows:b.value,columns:F,"row-key":"name","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{"body-cell":(0,a.k6)(e=>[(0,a.bF)(I,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",color:"primary",label:e.value,onClick:l=>D(e.value)},null,8,["label","onClick"])]),_:2},1032,["props"]),(0,a.bF)(I,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"Rename",onClick:()=>{w.value=e.value,h.value=!0},"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"sm",label:"Delete",onClick:l=>K(e.value),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows"])]),_:1})]),_:1,__:[16]}),(0,a.bF)(R,{flat:"",inline:"",class:"q-pa-none q-ma-sm",style:{"max-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(V,{style:{height:"50px"},class:"text-subtitle2"},{default:(0,a.k6)(()=>[(0,a.eW)(" Restore node "+(0,n.v_)(e.nodeNumber)+" - Module Name: "+(0,n.v_)((0,o.R1)(i).getters.module_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(R,{style:{height:"70px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[t[17]||(t[17]=(0,a.Lk)("div",{class:"text-primary"},"Selected Backup",-1)),(0,a.Lk)("div",Zt,(0,n.v_)(r.value),1)]),_:1,__:[17]}),(0,a.bF)(R,{class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[t[18]||(t[18]=(0,a.Lk)("div",{class:"text-primary"},"Backup file",-1)),(0,a.Lk)("div",ea,"Module name: "+(0,n.v_)(v.value),1),(0,a.Lk)("div",la,"Number of Node variables: "+(0,n.v_)(p.value),1),(0,a.Lk)("div",ta,"Number of Events: "+(0,n.v_)(g.value),1),(0,a.Lk)("div",aa,"Number of Event variables: "+(0,n.v_)(f.value),1)]),_:1,__:[18]}),(0,a.bF)(R,{style:{height:"100px"},class:"q-pa-sm q-ma-sm"},{default:(0,a.k6)(()=>[t[19]||(t[19]=(0,a.Lk)("div",{class:"text-primary"},"status",-1)),(0,a.Lk)("div",oa,(0,n.v_)(_.value),1),y.value?((0,a.uX)(),(0,a.Wv)(S,{key:0,color:"primary",size:"2em"})):(0,a.Q3)("",!0)]),_:1,__:[19]})]),_:1})]),(0,a.bF)(V,null,{default:(0,a.k6)(()=>[(0,a.bF)(E,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{color:"primary",label:"Upload Backup",onClick:t[1]||(t[1]=e=>O())}),t[20]||(t[20]=(0,a.Lk)("div",{class:"text-body"},"   Upload an external backup file",-1)),(0,a.bF)(C),(0,a.bF)(s,{disabled:!u.value,color:"primary",label:"Download Backup",onClick:t[2]||(t[2]=e=>U())},null,8,["disabled"]),(0,a.bF)(s,{disabled:!u.value,color:"primary",label:"Restore Node",onClick:t[3]||(t[3]=e=>M())},null,8,["disabled"])]),_:1,__:[20]})]),_:1}),(0,a.bF)(R,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(E,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle backup json",onClick:t[4]||(t[4]=e=>X())})]),_:1}),m.value?((0,a.uX)(),(0,a.Wv)(V,{key:0,style:{width:"350px"},class:"text-body2 no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.Lk)("pre",null,(0,n.v_)(c.value),1)]),_:1})):(0,a.Q3)("",!0)]),_:1})])]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(P,{modelValue:h.value,"onUpdate:modelValue":t[9]||(t[9]=e=>h.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(R,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(V,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",na,"enter new filename for "+(0,n.v_)(w.value),1)]),_:1}),(0,a.bF)(V,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.bF)(z,{dense:"",modelValue:x.value,"onUpdate:modelValue":t[6]||(t[6]=e=>x.value=e),autofocus:"",onKeyup:t[7]||(t[7]=(0,je.jR)(e=>h.value=!1,["enter"]))},null,8,["modelValue"])]),_:1}),(0,a.bF)(E,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",label:"Close"},null,512),[[$]]),(0,a.bo)((0,a.bF)(s,{flat:"",label:"change Filename",onClick:t[8]||(t[8]=e=>T())},null,512),[[$]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(P,{modelValue:k.value,"onUpdate:modelValue":t[12]||(t[12]=e=>k.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(R,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[$]])]),default:(0,a.k6)(()=>[t[21]||(t[21]=(0,a.Lk)("div",{class:"text-h6"}," Upload external backup file ",-1))]),_:1,__:[21]}),(0,a.bF)(V,null,{default:(0,a.k6)(()=>t[22]||(t[22]=[(0,a.Lk)("div",{class:"text-body"}," click below to select backup file to upload ",-1)])),_:1,__:[22]}),(0,a.bF)(j,{modelValue:N.value,"onUpdate:modelValue":t[10]||(t[10]=e=>N.value=e),label:"Pick one file",filled:"",style:{"max-width":"300px"}},null,8,["modelValue"]),(0,a.bF)(V,null,{default:(0,a.k6)(()=>t[23]||(t[23]=[(0,a.Lk)("div",{class:"text-body"}," Note that the uploaded file name will have an updated timestamp ",-1)])),_:1,__:[23]}),(0,a.bF)(E,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{disabled:!N.value,color:"positive",label:"Upload",onClick:t[11]||(t[11]=e=>W())},null,8,["disabled"]),[[$]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Gt),{modelValue:q.value,"onUpdate:modelValue":t[13]||(t[13]=e=>q.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},da=ia,ra=da;x()(ia,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QSpace:_e.A,QCardActions:Me.A,QSeparator:Xe.A,QTable:Ze.A,QTd:ll.A,QSpinnerOrbit:ul.A,QInput:$.A,QFile:kl.A}),x()(ia,"directives",{ClosePopup:al.A});const ua={class:"text-h6"},ca={class:"q-pa-md"},ma="SetCanIdDialog",ba={__name:"setCanIdDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=e,r=l,u=(0,a.EW)({get(){return i.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)(()=>{});const c=async()=>{s.value&&(console.log(ma+": clickAccept: node "+i.nodeNumber+" CAN_ID "+s.value),t.methods.set_can_id(i.nodeNumber,s.value),await(0,d.yy)(100),t.methods.query_all_nodes()),s.value=void 0};return(l,i)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-input"),v=(0,a.g2)("q-card-actions"),p=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:u.value,"onUpdate:modelValue":i[2]||(i[2]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{style:{"min-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",ua," Set CAN ID for node : "+(0,n.v_)((0,o.R1)(t).getters.node_name(e.nodeNumber)),1)]),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null," Current CAN ID: "+(0,n.v_)((0,o.R1)(t).getters.node_can_id(e.nodeNumber)),1)]),_:1}),(0,a.Lk)("div",ca,[i[3]||(i[3]=(0,a.eW)(" Enter new CAN ID, 1 to 99 ")),(0,a.bF)(b,{autofocus:"",modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),modelModifiers:{number:!0},type:"number",style:{"max-width":"200px"}},null,8,["modelValue"])]),(0,a.bF)(v,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",label:"Accept",onClick:i[1]||(i[1]=e=>c())},null,512),[[f]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},va=ba,pa=va;x()(ba,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QInput:$.A,QCardActions:Me.A}),x()(ba,"directives",{ClosePopup:al.A});var ga=t(7072),fa=t.n(ga);const _a={class:"text-h6"},ya="AdvancedNodeDialog",ha={__name:"advancedNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)("NORMAL"),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=e,v=l,p=(0,a.EW)({get(){return b.modelValue},set(e){v("update:modelValue",e)}});(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const g=()=>{console.log(ya+": clickBackupAndRestoreNode "+b.nodeNumber),c.value=!0},f=()=>{console.log(ya+": clickCanIdEnumeration "+b.nodeNumber),i.methods.node_can_id_enum(b.nodeNumber)},_=()=>{console.log(ya+": clickMDF"),i.methods.request_matching_mdf_list(b.nodeNumber,"USER"),i.methods.request_matching_mdf_list(b.nodeNumber,"SYSTEM"),r.value=!0},y=()=>{console.log(ya+": click_MODE_Event_Acknowledge");t.notify({message:"Set Event Acknowledge for node: "+i.getters.node_name(b.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"ON",color:"white",handler:async()=>{let e=fa().encodeMODE(b.nodeNumber,10);i.methods.send_cbus_message(e)}},{label:"OFF",color:"white",handler:()=>{let e=fa().encodeMODE(b.nodeNumber,11);i.methods.send_cbus_message(e)}},{label:"CANCEL",color:"white",handler:()=>{}}]})},h=()=>{console.log(ya+": click_MODE_FCU_Compatibility");t.notify({message:"Set FCU Compatibility for node: "+i.getters.node_name(b.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"ON",color:"white",handler:async()=>{let e=fa().encodeMODE(b.nodeNumber,16);i.methods.send_cbus_message(e)}},{label:"OFF",color:"white",handler:()=>{let e=fa().encodeMODE(b.nodeNumber,17);i.methods.send_cbus_message(e)}},{label:"CANCEL",color:"white",handler:()=>{}}]})},k=()=>{console.log(ya+": click_Mode_Heartbeat");t.notify({message:"Set Heartbeat for node: "+i.getters.node_name(b.nodeNumber),timeout:0,position:"center",color:"primary",actions:[{label:"ON",color:"white",handler:async()=>{let e=fa().encodeMODE(b.nodeNumber,12);i.methods.send_cbus_message(e)}},{label:"OFF",color:"white",handler:()=>{let e=fa().encodeMODE(b.nodeNumber,13);i.methods.send_cbus_message(e)}},{label:"CANCEL",color:"white",handler:()=>{}}]})},N=()=>{console.log(ya+": clickProgramNode "+b.nodeNumber),d.value="NORMAL",u.value=!0},x=()=>{console.log(ya+": clickProgramInBootMode "+b.nodeNumber),d.value="BOOT",u.value=!0},w=()=>{console.log(ya+": clickResetNode "+b.nodeNumber),i.methods.reset_node(b.nodeNumber)},q=()=>{console.log(ya+": clickSetCAN_ID "+b.nodeNumber),m.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),b=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card-section"),F=(0,a.g2)("q-card-actions"),V=(0,a.g2)("q-card"),C=(0,a.g2)("q-dialog"),A=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(C,{modelValue:p.value,"onUpdate:modelValue":t[10]||(t[10]=e=>p.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(V,{style:{"min-width":"600px"}},{default:(0,a.k6)(()=>[(0,a.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[A]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",_a," Advanced functions for node "+(0,n.v_)((0,o.R1)(i).getters.node_name(e.nodeNumber)),1)]),_:1}),1!=(0,o.R1)(i).state.nodes[e.nodeNumber].status?((0,a.uX)(),(0,a.Wv)(v,{key:0},{default:(0,a.k6)(()=>t[15]||(t[15]=[(0,a.Lk)("div",{class:"text-h6"}," Node is offline, so standard function are unavailable ",-1)])),_:1,__:[15]})):(0,a.Q3)("",!0),(0,o.R1)(i).state.nodes[e.nodeNumber].status?((0,a.uX)(),(0,a.Wv)(v,{key:1},{default:(0,a.k6)(()=>[(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Backup & Restore",onClick:t[0]||(t[0]=e=>g())})]),_:1}),0==(0,o.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:0,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"CAN ID Enumeration",onClick:t[1]||(t[1]=e=>f())})]),_:1})):(0,a.Q3)("",!0),(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Manage Module Descriptor",onClick:t[2]||(t[2]=e=>_())})]),_:1}),1==(0,o.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:1,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"MODE: set Event Acknowledge",onClick:t[3]||(t[3]=e=>y())})]),_:1})):(0,a.Q3)("",!0),1==(0,o.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:2,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"MODE: set FCU Compatibility",onClick:t[4]||(t[4]=e=>h())})]),_:1})):(0,a.Q3)("",!0),1==(0,o.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:3,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"MODE: set heartbeat",onClick:t[5]||(t[5]=e=>k())})]),_:1})):(0,a.Q3)("",!0),(0,o.R1)(i).state.nodes[e.nodeNumber].bootloader?((0,a.uX)(),(0,a.Wv)(F,{key:4,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node",onClick:t[6]||(t[6]=e=>N())})]),_:1})):(0,a.Q3)("",!0),(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"reset Node",onClick:t[7]||(t[7]=e=>w())})]),_:1}),0==(0,o.R1)(i).state.nodes[e.nodeNumber].VLCB?((0,a.uX)(),(0,a.Wv)(F,{key:5,align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Set CANID",onClick:t[8]||(t[8]=e=>q())})]),_:1})):(0,a.Q3)("",!0)]),_:1})):(0,a.Q3)("",!0),1!=(0,o.R1)(i).state.nodes[e.nodeNumber].status?((0,a.uX)(),(0,a.Wv)(V,{key:2,class:"q-py-none q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(F,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program in boot mode",onClick:t[9]||(t[9]=e=>x())})]),_:1})]),_:1}),(0,a.bF)(v,{style:{width:"300px"}},{default:(0,a.k6)(()=>t[16]||(t[16]=[(0,a.Lk)("div",{class:"text-body1"}," A node in boot mode (both green & yellow led on) will show as offline, but can be programmed ",-1)])),_:1,__:[16]})]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Rl),{modelValue:r.value,"onUpdate:modelValue":t[11]||(t[11]=e=>r.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:u.value,"onUpdate:modelValue":t[12]||(t[12]=e=>u.value=e),nodeNumber:e.nodeNumber,mode:d.value},null,8,["modelValue","nodeNumber","mode"]),(0,a.bF)((0,o.R1)(ra),{modelValue:c.value,"onUpdate:modelValue":t[13]||(t[13]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(pa),{modelValue:m.value,"onUpdate:modelValue":t[14]||(t[14]=e=>m.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},ka=ha,Na=ka;x()(ha,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QCardActions:Me.A}),x()(ha,"directives",{ClosePopup:al.A});const xa={class:"text-h6"},wa={__name:"NameNodeDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,o.KR)(),d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.$u)(()=>{t.state.layout.nodeDetails[d.nodeNumber]&&(s.value=t.state.layout.nodeDetails[d.nodeNumber].name,i.value=t.getters.node_group(d.nodeNumber))});const c=()=>{console.log("new node name: "+s.value),t.setters.node_name(d.nodeNumber,s.value),t.setters.node_group(d.nodeNumber,i.value)};return(l,t)=>{const o=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),r=(0,a.g2)("q-input"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),g=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:u.value,"onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[g]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",xa," Edit name for node : "+(0,n.v_)(e.nodeNumber),1)]),_:1}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)(()=>[t[4]||(t[4]=(0,a.Lk)("div",{class:"text-h6"},"Name",-1)),(0,a.bF)(r,{dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[4]}),(0,a.bF)(m,{class:"q-pt-none"},{default:(0,a.k6)(()=>[t[5]||(t[5]=(0,a.Lk)("div",{class:"text-h6"},"Group",-1)),(0,a.bF)(r,{dense:"",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[5]}),(0,a.bF)(b,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(o,{flat:"",label:"Accept",onClick:t[2]||(t[2]=e=>c())},null,512),[[g]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},qa=wa,Fa=qa;x()(wa,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QInput:$.A,QCardActions:Me.A}),x()(wa,"directives",{ClosePopup:al.A});const Va={class:"text-h6"},Ca={class:"text-h6",style:{"min-width":"200px"}},Aa={class:"full-width"},Ea="NodeEventsDialog",Ra={__name:"nodeEventsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)([]),u=(0,o.KR)(""),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),_=(0,o.KR)(!1),y=(0,o.KR)(),h=(0,o.KR)(""),k=((0,o.KR)(0),(0,o.KR)(0));(0,o.KR)();const N=(0,o.KR)(""),x=(0,o.KR)(""),w=e,q=l,F=(0,a.EW)({get(){return w.modelValue},set(e){q("update:modelValue",e)}}),V=[{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Identifier",align:"left",sortable:!0},{name:"eventName",field:"eventName",required:!1,label:"Name",align:"left",sortable:!0},{name:"eventGroup",field:"eventGroup",required:!1,label:"Group",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event node",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event number",align:"left",sortable:!0},{name:"eventType",field:"eventType",required:!0,label:"Event type",align:"left",sortable:!0},{name:"source",field:"source",required:!0,label:"Event source",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],C=(0,a.EW)(()=>w.nodeNumber);(0,a.wB)(C,()=>{w.nodeNumber&&Q()});const A=(0,a.EW)(()=>Object.values(i.state.busEvents));(0,a.wB)(A,()=>{w.nodeNumber&&Q()});const E=(0,a.EW)(()=>i.state.layout.updateTimestamp);(0,a.wB)(E,()=>{w.nodeNumber&&Q()});const R=(0,a.EW)(()=>i.state.nodes.updateTimestamp);(0,a.wB)(R,()=>{w.nodeNumber&&Q()});const Q=()=>{r.value=[];try{var e=Object.values(i.state.nodes[w.nodeNumber].storedEventsNI);e.forEach(e=>{var l=parseInt(e.eventIdentifier.substr(0,4),16),t=parseInt(e.eventIdentifier.substr(4,4),16);if("short"==i.state.events_view_mode&&l>0||"long"==i.state.events_view_mode&&0==l||"named"==i.state.events_view_mode&&""==i.state.layout.eventDetails[e.eventIdentifier].name.length);else{let a={};a["eventIdentifier"]=e.eventIdentifier,a["eventName"]=i.getters.event_name(e.eventIdentifier),a["eventGroup"]=i.getters.event_group(e.eventIdentifier),a["nodeNumber"]=l,a["eventNumber"]=t,a["eventType"]=0==l?"short":"long",a["storedEvent"]=!0,a["source"]="stored event",r.value.push(a)}});var l=Object.values(i.state.busEvents);l.forEach(l=>{if(l.nodeNumber==w.nodeNumber){var t=!1,a=l.eventIdentifier;if("short"==l.type&&(a="0000"+a.substr(4,4)),e.forEach(e=>{a==e.eventIdentifier&&(t=!0)}),0==t){let e={};e["eventIdentifier"]=a,e["eventName"]=i.getters.event_name(a),e["eventGroup"]=i.getters.event_group(a),e["nodeNumber"]=l.nodeNumber,e["eventNumber"]=l.eventNumber,e["eventType"]=l.type,e["storedEvent"]=!1,e["source"]="bus event",r.value.push(e)}}}),r.value.sort(function(e,l){return e.eventIdentifier<l.eventIdentifier?-1:1})}catch{}};(0,a.KC)(()=>{w.nodeNumber&&Q()});const I=async()=>{x.value="Loading Event Indexes",(0,d.Qn)(Ea+`: ${x.value}`),N.value="",b.value=!0,i.methods.request_all_node_events(w.nodeNumber);let e=Date.now();while(Date.now()-e<6e4){if(N.value.length>0)break;await(0,d.yy)(10)}b.value=!1},L=async e=>{(0,d.Qn)(Ea+": getEventVariables:"),N.value="",x.value="Loading Event Variables",b.value=!0,i.methods.request_event_variables_by_identifier(w.nodeNumber,e);let l=Date.now();while(Date.now()-l<6e4){if(N.value.length>0)break;await(0,d.yy)(10)}b.value=!1},S=()=>{if((0,d.Qn)(Ea+": clickAddEvent"),i.state.nodes[w.nodeNumber].eventSpaceLeft>0)c.value=!0;else{t.notify({message:"no event space left",timeout:0,position:"center",color:"primary",actions:[{label:"dismiss",color:"white",handler:()=>{}}]})}},W=()=>{(0,d.Qn)(Ea+": clickAdvanced"),m.value=!0},B=e=>{(0,d.Qn)(Ea+": clickDelete");t.notify({message:"Are you sure you want to delete event "+i.getters.event_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{(0,d.Qn)("removeEvent "+w.nodeNumber+" "+e),i.methods.remove_event(w.nodeNumber,e)}},{label:"NO",color:"white",handler:()=>{}}]})},T=e=>{(0,d.Qn)(Ea+": clickEventName "+e),h.value=e,y.value=i.getters.event_name(e),f.value=!0},D=()=>{(0,d.Qn)(Ea+": clickInfo"),g.value=!0},K=()=>{(0,d.Qn)(Ea+": clickRefresh"),i.methods.request_all_node_events(w.nodeNumber),Q()},U=e=>{(0,d.Qn)(Ea+": send OFF "+e);var l=parseInt(e.slice(0,4),16),t=parseInt(e.slice(4,8),16);0==l?i.methods.short_off_event(w.nodeNumber,t):i.methods.long_off_event(l,t)},O=e=>{(0,d.Qn)(Ea+": send ON "+e);var l=parseInt(e.slice(0,4),16),t=parseInt(e.slice(4,8),16);0==l?i.methods.short_on_event(w.nodeNumber,t):i.methods.long_on_event(l,t)},M=e=>{(0,d.Qn)(Ea+": clickTeach"),h.value=e,v.value=!0},X=()=>{switch((0,d.Qn)(Ea+": clickToggleViewMode"),i.state.events_view_mode){case"all":i.state.events_view_mode="short";break;case"short":i.state.events_view_mode="long";break;case"long":i.state.events_view_mode="named";break;case"named":i.state.events_view_mode="all";break;default:i.state.events_view_mode="all"}Q()},P=async e=>{(0,d.Qn)(Ea+": clickVariables: node "+w.nodeNumber),h.value=e,b.value=!0,await(0,d.yy)(1),0==i.state.nodes[w.nodeNumber].VLCB&&await I(),await L(e),p.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-icon"),y=(0,a.g2)("q-input"),q=(0,a.g2)("q-banner"),C=(0,a.g2)("q-td"),A=(0,a.g2)("q-tr"),E=(0,a.g2)("q-table"),R=(0,a.g2)("q-card"),Q=(0,a.g2)("q-dialog"),I=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(Q,{modelValue:F.value,"onUpdate:modelValue":t[15]||(t[15]=e=>F.value=e),persistent:"","full-width":"",position:"right"},{default:(0,a.k6)(()=>[(0,a.bF)(R,{class:"q-pa-none q-ml-xl"},{default:(0,a.k6)(()=>[(0,a.bF)(q,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:t[0]||(t[0]=e=>X())}),(0,a.Lk)("div",Ca,"view "+(0,n.v_)((0,o.R1)(i).state.events_view_mode)+" events",1),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:t[1]||(t[1]=e=>D())}),(0,a.bF)(y,{class:"input-box","bg-color":"grey-3",style:{width:"150px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:t[3]||(t[3]=e=>S())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:t[4]||(t[4]=e=>W())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:t[5]||(t[5]=e=>K())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[I]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Va," Events for node : "+(0,n.v_)((0,o.R1)(i).getters.node_name(w.nodeNumber)),1)]),_:1}),(0,a.Lk)("div",Aa,[(0,a.bF)(E,{class:"nodeEventsDialog-table",bordered:"",dense:"",rows:r.value,columns:V,filter:u.value,"row-key":"eventIdentifier","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(A,{props:e,class:(0,n.C4)([h.value==e.row.eventIdentifier?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)(()=>[(0,a.bF)(C,{key:"eventIdentifier",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventName),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventGroup",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventGroup),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"nodeNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"eventType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventType),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"source",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.source),1)]),_:2},1032,["props"]),(0,a.bF)(C,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>T(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",disabled:!e.row.storedEvent,color:"primary",size:"md",label:"Variables",onClick:l=>P(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>M(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>O(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>t[16]||(t[16]=[(0,a.eW)("send ON")])),_:2,__:[16]},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>U(e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>t[17]||(t[17]=[(0,a.eW)("send OFF")])),_:2,__:[17]},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>B(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]),_:1},8,["rows","filter"])])]),_:1}),(0,a.bF)((0,o.R1)(Hl),{modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=e=>c.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(lt),{modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=e=>m.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(vt),{modelValue:f.value,"onUpdate:modelValue":t[8]||(t[8]=e=>f.value=e),eventIdentifier:h.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(ht),{modelValue:v.value,"onUpdate:modelValue":t[9]||(t[9]=e=>v.value=e),eventIdentifier:h.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(rt),{modelValue:_.value,"onUpdate:modelValue":t[10]||(t[10]=e=>_.value=e),sendingNodeNumber:e.nodeNumber,eventNumber:k.value,eventIdentifier:h.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(Ol),{modelValue:p.value,"onUpdate:modelValue":t[11]||(t[11]=e=>p.value=e),nodeNumber:e.nodeNumber,eventIdentifier:h.value},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(xt),{modelValue:g.value,"onUpdate:modelValue":t[12]||(t[12]=e=>g.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ml),{modelValue:b.value,"onUpdate:modelValue":t[13]||(t[13]=e=>b.value=e),callingModule:"EventsListByNode",message:x.value,onWaitingOnBusTrafficDialogEvent:t[14]||(t[14]=e=>N.value=e)},null,8,["modelValue","message"])]),_:1},8,["modelValue"])}}},Qa=(0,U.A)(Ra,[["__scopeId","data-v-02a11530"]]),Ia=Qa;x()(Ra,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QInput:$.A,QIcon:Et.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QField:G.A}),x()(Ra,"directives",{ClosePopup:al.A});const La={__name:"NodeParameter",props:["Name","Value"],setup(e){return(l,t)=>{const o=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(o,{class:"q-pa-xs",flat:""},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,n.v_)(e.Name),1),(0,a.eW)(" : "+(0,n.v_)(e.Value),1)]),_:1})}}},Sa=La,Wa=Sa;x()(La,"components",{QCard:A.A});const Ba={__name:"NodeParameterRaw",props:["nodeNumber","parameterIndex"],setup(e){const l=(0,a.WQ)("store"),t=e,o=(0,a.EW)(()=>l.getters.node_parameter_name(t.nodeNumber,t.parameterIndex)),n=(0,a.EW)(()=>l.getters.node_parameter_value(t.nodeNumber,t.parameterIndex));return(e,l)=>{const t=(0,a.g2)("q-input"),s=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(s,{class:"q-pa-xs",flat:"",style:{"min-width":"300px"}},{default:(0,a.k6)(()=>[(0,a.bF)(t,{filled:"",label:o.value,modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),outlined:"",disable:"",readonly:""},null,8,["label","modelValue"])]),_:1})}}},Ta=Ba,Da=Ta;x()(Ba,"components",{QCard:A.A,QInput:$.A});const Ka={class:"text-h6"},Ua={class:"q-pa-none row"},Oa="NodeParametersDialog",Ma={__name:"NodeParametersDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}}),u=(0,a.EW)(()=>{try{return t.state.nodeDescriptors[i.nodeNumber].moduleDescriptorFilename}catch{return null}});(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const c=()=>{console.log(Oa+": clickUpdateModuleDescriptor"),t.methods.request_matching_mdf_list(i.nodeNumber,"USER"),t.methods.request_matching_mdf_list(i.nodeNumber,"SYSTEM"),s.value=!0};return(l,d)=>{const m=(0,a.g2)("q-btn"),b=(0,a.g2)("q-banner"),v=(0,a.g2)("q-card"),p=(0,a.g2)("q-separator"),g=(0,a.g2)("q-card-section"),f=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(f,{modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"700px"}},{default:(0,a.k6)(()=>[(0,a.bF)(b,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bF)(m,{color:"cyan-1",size:"sm","text-color":"black",label:"manage Module Descriptor",onClick:d[0]||(d[0]=e=>c())}),(0,a.bo)((0,a.bF)(m,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Ka," Parameter Information for "+(0,n.v_)((0,o.R1)(t).getters.node_name(i.nodeNumber)),1)]),_:1}),(0,a.bF)(g,{style:{"max-height":"80vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(Wa),{Name:"Node Number",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].nodeNumber},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Events Currently Stored",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].eventCount},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Manufacturer",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].moduleManufacturerName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Module",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].moduleName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Module Identifier",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].moduleIdentifier},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Producer",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].producer},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Consumer",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].consumer},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Consume own Events",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].coe},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Supports Bootloading",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].bootloader},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"FLiM",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].flim},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"VLCB",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].VLCB},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Node Variables",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[6]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Events Supported",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[4]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Event Variables",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[5]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"CPU Name",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].cpuName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Interface",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].interfaceName},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Firmware Version",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[7]+String.fromCharCode((0,o.R1)(t).state.nodes[i.nodeNumber].parameters[2])},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Beta Version",Value:(0,o.R1)(t).state.nodes[i.nodeNumber].parameters[20]},null,8,["Value"]),(0,a.bF)((0,o.R1)(Wa),{Name:"Module Descriptor Filename",Value:u.value},null,8,["Value"]),(0,a.bF)(v,{flat:"",style:{"min-height":"20px"}}),(0,a.bF)(p),(0,a.bF)(v,{flat:"",style:{"min-height":"20px"}}),d[3]||(d[3]=(0,a.Lk)("div",{class:"text-body1"}," Raw node parameter values ",-1)),(0,a.Lk)("div",Ua,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(t).state.nodes[i.nodeNumber].parameters[0]+1,(l,t)=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(Da),{nodeNumber:e.nodeNumber,parameterIndex:t,key:t},null,8,["nodeNumber","parameterIndex"]))),128))])]),_:1,__:[3]})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Rl),{modelValue:s.value,"onUpdate:modelValue":d[2]||(d[2]=e=>s.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"])],64)}}},Xa=Ma,Pa=Xa;x()(Ma,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QSeparator:Xe.A}),x()(Ma,"directives",{ClosePopup:al.A});const za="NoderawVariableSingle",ja={__name:"NodeRawVariableSingle",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},numberBase:{type:String,default:"decimal"}},setup(e){const l=e,t="Variable "+l.nodeVariableIndex,n=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(""),r=(0,o.KR)(),u=(0,a.EW)(()=>n.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]);(0,a.wB)(u,()=>{b(u.value)});const c=(0,a.EW)(()=>l.numberBase);(0,a.wB)(c,()=>{b(u.value)});const m=e=>{let t=e,a=e.toUpperCase().split("X");t=a.length>1?parseInt(a[1],16):parseInt(a[0]),t<0||t>255||Number.isNaN(t)?(console.log(za+`: value error ${t}`),s.value=!0,i.value="Invalid Value"):(s.value=!1,i.value="",n.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,t),b(t))},b=e=>{"decimal"==l.numberBase?r.value=e:r.value="0x"+(0,d.xT)(e,2)};return(0,a.sV)(()=>{b(u.value)}),(e,l)=>{const o=(0,a.g2)("q-input"),n=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(n,{class:"q-pa-xs",flat:"",style:{width:"120px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{class:"bg-white",filled:"",label:t,mask:"NNNN",debounce:"100",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),outlined:"","error-message":i.value,error:s.value,onChange:m},null,8,["modelValue","error-message","error"])]),_:1})}}},$a=ja,Ga=$a;x()(ja,"components",{QCard:A.A,QInput:$.A});const Ha={class:"text-h6"},Ya={class:"q-pa-none row"},Ja="NodeRawVariables",Za={__name:"NodeRawVariables",props:{nodeNumber:{type:Number,default:0}},setup(e){const l=(0,a.WQ)("store"),t=(0,o.KR)("decimal"),s=e,i=()=>{console.log(Ja+": clickToggle"),t.value="decimal"==t.value?t.value="hex":t.value="decimal"};return(e,d)=>{const r=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-card-actions"),m=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(m,{flat:"",class:"q-pa-none q-ma-none row justify-between"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{class:"text-primary"},{default:(0,a.k6)(()=>d[1]||(d[1]=[(0,a.Lk)("div",{class:"text-h6"},"Raw view",-1)])),_:1,__:[1]}),(0,a.bF)(c,{class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{size:"sm",color:"blue",label:"Toggle",onClick:d[0]||(d[0]=e=>i())}),d[2]||(d[2]=(0,a.eW)("    ")),(0,a.Lk)("div",Ha," display in "+(0,n.v_)(t.value),1)]),_:1,__:[2]}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>d[3]||(d[3]=[(0,a.Lk)("div",{class:"text-body"},"Enter value in decimal, or hexadecimal preceeded by '0x' (e.g. 0x55), irrespective of display format ",-1)])),_:1,__:[3]})]),_:1}),(0,a.Lk)("div",Ya,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(l).state.nodes[s.nodeNumber].parameters[6],e=>((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ga),{"node-variable-index":e,"node-number":s.nodeNumber,key:e,numberBase:t.value},null,8,["node-variable-index","node-number","numberBase"]))),128))])],64)}}},eo=Za,lo=eo;x()(Za,"components",{QCard:A.A,QCardSection:h.A,QCardActions:Me.A,QBtn:fe.A});const to={class:"text-h6"},ao={key:0,class:"text-h6"},oo={key:1,class:"text-h6"},no={class:"q-pa-xs row"},so={class:"text-body2"},io="NodeChannelVariablesDialog",ro={__name:"NodeChannelVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0},channelNumber:{type:Number,default:0},configuration:{type:Object,default:void 0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,s.A)();const{registerTimeout:t}=(0,u.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(),p=e,g=l,f=(0,a.EW)({get(){return p.modelValue},set(e){g("update:modelValue",e)}});(0,a.wB)(f,async()=>{1==f.value&&(v.value=p.configuration,b.value=!1,void 0==v.value?((0,d.Qn)(io+": WATCH model: variablesDescriptor undefined"),m.value=!0,r.value=!0):0==Object.keys(v.value).length?((0,d.Qn)(io+": WATCH model: variablesDescriptor zero entries"),m.value=!0,r.value=!0):(m.value=!1,r.value=!1))}),(0,a.$u)(async()=>{p.nodeNumber&&(0==i.state.nodes[p.nodeNumber].parameters[6]?c.value=!0:c.value=!1)});const _=()=>{(0,d.Qn)(io+": clickToggleRaw"),m.value?m.value=!1:m.value=!0},y=()=>{(0,d.Qn)(io+": clickToggleNodeDescriptor"),b.value?b.value=!1:b.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),g=(0,a.g2)("q-separator"),h=(0,a.g2)("q-card"),k=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-dialog"),x=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(N,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=e=>f.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(h,{class:"q-pa-none q-ml-xl"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[x]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",to," Node Variables for channel : "+(0,n.v_)((0,o.R1)(i).getters.node_channel_name(e.nodeNumber,e.channelNumber)),1)]),_:1})]),_:1}),(0,a.bF)(h,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[r.value?((0,a.uX)(),(0,a.CE)("div",ao," *** Descriptor not loaded for this channel *** ")):(0,a.Q3)("",!0),c.value?((0,a.uX)(),(0,a.CE)("div",oo," this node has no variables to display ")):(0,a.Q3)("",!0)]),_:1}),(0,o.R1)(i).state.nodeDescriptors[p.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(kn),{key:0,nodeNumber:e.nodeNumber,configuration:v.value},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),m.value?((0,a.uX)(),(0,a.Wv)(u,{key:1,class:"q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(lo),{nodeNumber:e.nodeNumber},null,8,["nodeNumber"]),(0,a.bF)(g)]),_:1})):(0,a.Q3)("",!0),b.value?((0,a.uX)(),(0,a.Wv)(u,{key:2,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",no,[t[3]||(t[3]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",so,[(0,a.Lk)("pre",null,(0,n.v_)(v.value),1)])]),(0,a.bF)(g)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(k,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:t[0]||(t[0]=e=>_())}),(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:t[1]||(t[1]=e=>y())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},uo=ro,co=uo;x()(ro,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QSeparator:Xe.A,QCardActions:Me.A}),x()(ro,"directives",{ClosePopup:al.A});const mo={style:{border:"2px solid grey"},class:"no-padding no-margin"},bo="NodeChannelList",vo={__name:"NodeChannelList",props:{nodeNumber:{type:Number,default:0},configuration:{type:Object,required:!0}},setup(e){(0,s.A)();const l=(0,a.WQ)("store"),t=(0,o.KR)(!1),i=(0,o.KR)(),r=(0,o.KR)(),u=e,c=(0,o.KR)([]),m=[{name:"channelNumber",field:"channelNumber",required:!0,label:"Channel",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name (click to edit)",align:"left",sortable:!0},{name:"channelType",field:"channelType",required:!0,label:"Type",align:"left",sortable:!0},{name:"information",field:"information",required:!0,label:"",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"",align:"left",sortable:!0}],b=async()=>{try{c.value=[];let e=Object.keys(u.configuration.channels);e.forEach(e=>{c.value.push({channelNumber:e,name:l.getters.node_channel_name(u.nodeNumber,e),channelType:v(u.configuration.channels[e]),information:p(e,u.configuration.channels[e]),edit:!!u.configuration.channels[e].channelVariables})})}catch(e){(0,d.Qn)(bo+`: update_node_channels ${e}`)}},v=e=>{try{let t="",a=e.channelType;return t=void 0!=a.overload?ae(u.nodeNumber,a.overload,l):a,t}catch(e){(0,d.Qn)(bo+`: getChannelTypeText ${e}`)}},p=(e,t)=>{try{let e="",o=t.information;for(var a in o){let t=null;"text"==o[a].type&&(o[a].visibilityLogic?oe(u.nodeNumber,o[a].visibilityLogic,l)&&(t=o[a].label):t=o[a].label,null!=t&&(void 0!=t.overload&&(t=ae(u.nodeNumber,t.overload,l)),null!=t&&(e+="<"+t+"> ")))}return e}catch(e){(0,d.Qn)(bo+`: getInformationText ${e}`)}};const g=(e,t)=>{l.setters.node_channel_name(u.nodeNumber,t,e),b()};(0,a.KC)(()=>{}),(0,a.sV)(()=>{b()}),(0,a.$u)(()=>{b()});const f=async e=>{(0,d.Qn)(bo+`: clickEdit: node ${u.nodeNumber} channel ${e}`),i.value=parseInt(e),r.value=u.configuration.channels[e].channelVariables,t.value=!0};return(l,s)=>{const d=(0,a.g2)("q-td"),u=(0,a.g2)("q-input"),b=(0,a.g2)("q-popup-edit"),v=(0,a.g2)("q-btn"),p=(0,a.g2)("q-tr"),_=(0,a.g2)("q-table"),y=(0,a.g2)("q-card-section"),h=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",mo,[(0,a.bF)(h,{style:{"max-height":"70vh"},class:"scroll q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(y,{class:"no-margin q-py-none-xs",style:{width:"95vw"}},{default:(0,a.k6)(()=>[(0,a.bF)(_,{flat:"",dense:"",rows:c.value,columns:m,"row-key":"channelNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(p,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{key:"channelNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.channelNumber),1)]),_:2},1032,["props"]),(0,a.bF)(d,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.name)+" ",1),(0,a.bF)(b,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l,buttons:"",onSave:l=>g(l,e.row.channelNumber)},{default:(0,a.k6)(e=>[(0,a.bF)(u,{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:"",counter:"",onKeyup:(0,je.jR)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue","onSave"])]),_:2},1032,["props"]),(0,a.bF)(d,{key:"channelType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.channelType),1)]),_:2},1032,["props"]),(0,a.bF)(d,{key:"information",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.information),1)]),_:2},1032,["props"]),(0,a.bF)(d,{key:"actions",props:e},{default:(0,a.k6)(()=>[e.row.edit?((0,a.uX)(),(0,a.Wv)(v,{key:0,dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"sm",label:"edit",onClick:l=>f(e.row.channelNumber),"no-caps":""},null,8,["onClick"])):(0,a.Q3)("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),(0,a.bF)((0,o.R1)(co),{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),nodeNumber:e.nodeNumber,channelNumber:i.value,configuration:r.value},null,8,["modelValue","nodeNumber","channelNumber","configuration"])],64)}}},po=vo,go=po;x()(vo,"components",{QCard:A.A,QCardSection:h.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QPopupEdit:tl.A,QInput:$.A,QBtn:fe.A});const fo={__name:"NodeVariableBit",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bit:{type:Number,required:!0},label:{type:String,required:!1},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),n=(0,o.KR)(!1),s={0:1,1:2,2:4,3:8,4:16,5:32,6:64,7:128},i=(0,a.EW)({get(){return t.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]},set(e){}});(0,a.wB)(i,(e,a)=>{n.value=!!(t.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]&s[l.bit])});const d=(e,l)=>{r()},r=()=>{let e=i.value;n.value?e|=s[l.bit]:e&=~s[l.bit],t.methods.update_node_variable(l.nodeNumber,l.variableIndex,e,!0,_(l.configuration))};return(0,a.sV)(()=>{const e=!!(t.state.nodes[l.nodeNumber].nodeVariables[l.variableIndex]&s[l.bit]);n.value=e}),(l,t)=>{const o=(0,a.g2)("q-checkbox"),s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.Wv)(s,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{dense:"","min-width":"100",modelValue:n.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>n.value=e),d],label:e.label,"right-label":""},null,8,["modelValue","label"])]),_:1})}}},_o=fo,yo=_o;x()(fo,"components",{QCardSection:h.A,QCheckbox:k.A});const ho={class:"text-h6"},ko={class:"text-subtitle2"},No={__name:"NodeVariableBitArray",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},bitCollection:{required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},configuration:{type:Object,required:!0}},setup(e){const l=(0,a.WQ)("store");(0,o.KR)();var t=(0,o.KR)();const s=e,i=(0,a.EW)(()=>l.state.nodes[s.nodeNumber].nodeVariables);function d(){for(var e in t.value=[],s.bitCollection)if(s.bitCollection[e].overload){var a=ae(s.nodeNumber,s.bitCollection[e].overload,l);if(a){var o={bitPosition:s.bitCollection[e].bitPosition,label:a};t.value.push(o)}}else s.bitCollection[e].label&&t.value.push(s.bitCollection[e])}return(0,a.wB)(i,()=>{d()}),(0,a.sV)(()=>{d()}),(l,s)=>{const i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(d,{class:"q-ma-xs no-padding",style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",ho,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(i,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.variableIndex),1)]),_:1})]),(0,a.Lk)("div",ko,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(i,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(t),l=>((0,a.uX)(),(0,a.CE)("div",{key:l},[(0,a.bF)((0,o.R1)(yo),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:l.bitPosition,label:l.label,configuration:e.configuration},null,8,["nodeNumber","variableIndex","bit","label","configuration"])]))),128))]),_:1})]),_:1})]),_:1})}}},xo=No,wo=xo;x()(No,"components",{QCard:A.A,QCardSection:h.A});const qo={class:"text-h6"},Fo={class:"text-subtitle2"},Vo={__name:"NodeVariableBitSingle",props:{nodeNumber:{type:Number,required:!0},variableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,default:""},bit:{type:Number,required:!0},configuration:{type:Object,required:!0}},setup(e){(0,a.WQ)("store");return(0,a.sV)(()=>{}),(l,t)=>{const s=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(i,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"120px",height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",qo,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(s,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.variableIndex),1)]),_:1})]),(0,a.Lk)("div",Fo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)((0,o.R1)(yo),{nodeNumber:e.nodeNumber,variableIndex:e.variableIndex,bit:e.bit,configuration:e.configuration},null,8,["nodeNumber","variableIndex","bit","configuration"])]),_:1})]),_:1})}}},Co=Vo,Ao=Co;x()(Vo,"components",{QCard:A.A,QCardSection:h.A});const Eo={class:"text-h6"},Ro={class:"text-subtitle2"},Qo="NodeVariableButtons",Io={__name:"NodeVariableButtons",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},buttonCollection:{required:!0},configuration:{type:Object,required:!0}},setup(e){const l=(0,a.WQ)("store");var t=(0,o.KR)();const s=e,i=(0,a.EW)(()=>l.state.nodes[s.nodeNumber].nodeVariables);function d(){for(var e in t.value=[],s.buttonCollection)if(s.buttonCollection[e].overload){var a=ae(s.nodeNumber,s.buttonCollection[e].overload,l);if(a){var o={value:s.buttonCollection[e].value,label:a};t.value.push(o)}}else s.buttonCollection[e].label&&t.value.push(s.buttonCollection[e])}(0,a.wB)(i,()=>{d()}),(0,a.sV)(()=>{d()});const r=e=>{console.log(Qo+": clickButton : "+e),l.methods.update_node_variable(s.nodeNumber,s.nodeVariableIndex,e,!0,_(s.configuration))};return(l,s)=>{const i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-btn"),u=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(u,{class:"q-ma-xs no-padding",style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Eo,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(i,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",Ro,(0,n.v_)(e.displaySubTitle),1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(t),e=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"no-margin q-pb-xs"},[(0,a.bF)(d,{dense:"",size:"sm",color:"blue",label:e.label,onClick:l=>r(e.value),"no-caps":""},null,8,["label","onClick"])]))),128))]),_:1})]),_:1})}}},Lo=Io,So=Lo;x()(Io,"components",{QCard:A.A,QCardSection:h.A,QBtn:fe.A});const Wo={class:"text-h6"},Bo={class:"text-subtitle2"},To={__name:"NodeVariableDual",props:{NodeNumber:{type:Number,required:!0},NodeVariableIndexHigh:{type:Number,required:!0},NodeVariableIndexLow:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:65535},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:15},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,a.EW)(()=>(t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexHigh]<<8)+t.state.nodes[l.NodeNumber].nodeVariables[l.NodeVariableIndexLow]);(0,a.wB)(i,()=>{s.value=p(i.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)});const d=(0,a.EW)(()=>{let e=0;return l.displayScale<1&&(e=1),l.displayScale<.1&&(e=2),l.displayScale<.01&&(e=3),(l.min*l.displayScale+l.displayOffset).toFixed(e)}),r=(0,a.EW)(()=>{let e=0;try{let t=0;l.displayScale<1&&(t=1),l.displayScale<.1&&(t=2),l.displayScale<.01&&(t=3);let a=2**(l.endBit-l.startBit+1)-1,o=l.max<a?l.max:a;e=(o*l.displayScale+l.displayOffset).toFixed(t)}catch{}return e}),u=(0,a.EW)(()=>{let e=65535*l.displayScale+l.displayOffset;return e>1e6?"#######":e>1e5?"######":e>1e4?"#####":e>1e3?"####.#":e>100?"###.##":"##.###"}),c=e=>{let a=Number(e);a<d.value&&(a=d.value),a>r.value&&(a=r.value);let o=g(i.value,a,l.displayScale,l.displayOffset,l.startBit,l.endBit);t.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexHigh,o>>8,!0,_(l.configuration)),t.methods.update_node_variable(l.NodeNumber,l.NodeVariableIndexLow,255&o,!0,_(l.configuration)),s.value=p(i.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)};return(0,a.sV)(()=>{s.value=p(i.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)}),(l,t)=>{const o=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),b=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(b,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Wo,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.NodeVariableIndexHigh)+" : "+(0,n.v_)(e.NodeVariableIndexLow),1)]),_:1})]),(0,a.Lk)("div",Bo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(i,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)(" range "+(0,n.v_)(d.value)+" to "+(0,n.v_)(r.value)+" "+(0,n.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(m,{class:"dual_input_box",mask:u.value,"reverse-fill-mask":"",debounce:"10",dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),outlined:"",onChange:c},null,8,["mask","modelValue"])]),_:1})]),_:1})}}},Do=(0,U.A)(To,[["__scopeId","data-v-223524ec"]]),Ko=Do;x()(To,"components",{QCard:A.A,QCardSection:h.A,QBadge:j.A,QInput:$.A,QField:G.A});const Uo={class:"q-pa-xs no-margin"},Oo={style:{border:"2px solid grey"},class:"q-py-none no-margin"},Mo={class:"GroupTitle q-py-none no-margin"},Xo={__name:"NodeVariableGroup",props:{nodeNumber:{type:Number,required:!0},configuration:Object},setup(e){(0,a.WQ)("store"),(0,o.KR)("nvGroup");return(0,a.sV)(()=>{}),(0,a.$u)(()=>{}),(l,t)=>{const s=(0,a.g2)("q-card-section");return(0,a.uX)(),(0,a.CE)("div",Uo,[(0,a.Lk)("div",Oo,[(0,a.Lk)("div",Mo,(0,n.v_)(e.configuration.displayTitle),1),(0,a.bF)(s,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,n.v_)(e.configuration.displaySubTitle),1)]),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(kn),{nodeNumber:e.nodeNumber,configuration:e.configuration.groupItems},null,8,["nodeNumber","configuration"])]),_:1})])])}}},Po=(0,U.A)(Xo,[["__scopeId","data-v-104abb8c"]]),zo=Po;x()(Xo,"components",{QCardSection:h.A});const jo={class:"text-h6"},$o={class:"text-subtitle2"},Go={__name:"NodeVariableNumber",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayOffset:{type:Number,required:!1,default:0},displayScale:{type:Number,required:!1,default:1},displayUnits:{type:String,default:""},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,a.EW)(()=>{let e=255*l.displayScale+l.displayOffset;return e>1e5?"######":e>1e4?"#####":e>1e3?"####":e>100?"###":e>10?"##.#":e>1?"#.##":".###"}),d=(0,a.EW)(()=>{let e=0;return l.displayScale<1&&(e=1),l.displayScale<.1&&(e=2),l.displayScale<.01&&(e=3),(l.min*l.displayScale+l.displayOffset).toFixed(e)}),r=(0,a.EW)(()=>{let e=0;try{let t=0;l.displayScale<1&&(t=1),l.displayScale<.1&&(t=2),l.displayScale<.01&&(t=3);let a=2**(l.endBit-l.startBit+1)-1,o=l.max<a?l.max:a;e=(o*l.displayScale+l.displayOffset).toFixed(t)}catch{}return e}),u=(0,a.EW)(()=>t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]);(0,a.wB)(u,()=>{s.value=p(u.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)});const c=e=>{let a=Number(e);a<d.value&&(a=d.value),a>r.value&&(a=r.value);let o=g(u.value,a,l.displayScale,l.displayOffset,l.startBit,l.endBit);t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,o,!0,_(l.configuration)),s.value=p(u.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)};return(0,a.sV)(()=>{s.value=p(u.value,l.displayScale,l.displayOffset,l.startBit,l.endBit)}),(l,t)=>{const o=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-badge"),m=(0,a.g2)("q-input"),b=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(b,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",jo,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",$o,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(u,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)(" range "+(0,n.v_)(d.value)+" to "+(0,n.v_)(r.value)+" "+(0,n.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(m,{class:"nv_input_box",mask:i.value,"reverse-fill-mask":"",debounce:"10",dense:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),outlined:"",onChange:c},null,8,["mask","modelValue"])]),_:1})]),_:1})}}},Ho=(0,U.A)(Go,[["__scopeId","data-v-46af2669"]]),Yo=Ho;x()(Go,"components",{QCard:A.A,QCardSection:h.A,QBadge:j.A,QInput:$.A,QField:G.A});const Jo={class:"text-h6"},Zo={class:"text-subtitle2"},en={__name:"NodeVariableSelect",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},bitMask:{type:Number,default:255},name:{type:String,required:!1},options:{required:!0},hint:{type:String,default:""},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},configuration:{type:Object}},setup(e){const l=e,t=(l.name?l.name:l.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(),i=(0,a.EW)(()=>t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]);(0,a.wB)(i,()=>{s.value=i.value&l.bitMask});const d=e=>{let a=i.value;a|=e.value&l.bitMask,a&=e.value|~l.bitMask,t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,a,!0,_(l.configuration))};return(0,a.sV)(()=>{s.value=i.value&l.bitMask}),(l,t)=>{const o=(0,a.g2)("q-card-section"),i=(0,a.g2)("q-select"),r=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(r,{class:"q-ma-xs no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{style:{height:"120px"},class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Jo,[(0,a.eW)((0,n.v_)(e.displayTitle)+" ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",Zo,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(i,{modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=e=>s.value=e),d],options:e.options,"map-options":""},null,8,["modelValue","options"])]),_:1})]),_:1})}}},ln=en,tn=ln;x()(en,"components",{QCard:A.A,QCardSection:h.A,QSelect:re.A});const an={class:"text-h6"},on={class:"text-subtitle2"},nn={key:0},sn={key:0},dn="NodeVariableSlider",rn={__name:"NodeVariableSlider",props:{nodeNumber:{type:Number,required:!0},nodeVariableIndex:{type:Number,required:!0},displayTitle:{type:String,required:!1},displaySubTitle:{type:String,required:!1},displayScale:{type:Number,default:1},displayUnits:{type:String,default:""},displayOffset:{type:Number,default:0},max:{type:Number,default:255},min:{type:Number,default:0},startBit:{type:Number,default:0},endBit:{type:Number,default:7},configuration:{type:Object,required:!0}},setup(e){const l=e,t=(l.name?l.name:l.nodeVariableIndex,(0,a.WQ)("store")),s=(0,o.KR)(!1),i=(0,o.KR)(""),d=(0,a.EW)(()=>{for(var e=0,t=l.startBit;t<=l.endBit;t++)e+=1<<t;return e});let r=t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex];const u=(0,a.EW)(()=>(c.value,{height:"150px"})),c=(0,a.EW)(()=>{var e=!1;return l&&(e=!!l.configuration.outputOnWrite),e});(0,a.wB)(c,()=>{});const m=(0,a.EW)(()=>{var e=b.value*l.displayScale+l.displayOffset;return l.displayScale>=1||(e=l.displayScale>=.1?e.toFixed(1):l.displayScale>=.01?e.toFixed(2):e.toFixed(3)),e}),b=(0,a.EW)({get(){return(t.state.nodes[l.nodeNumber].nodeVariables[l.nodeVariableIndex]&d.value)>>l.startBit},set(e){if(e<=l.max&&e>=l.min){let a=e;a<<=l.startBit,r|=a&d.value,r&=a|~d.value,s.value=!1,i.value="",t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,r,!0,_(l.configuration))}else console.log(dn+`: Invalid Value : ${e}`),i.value="Invalid Value",s.value=!0}});(0,a.wB)(b,()=>{});(0,a.$u)(()=>{}),(0,a.sV)(()=>{});const v=()=>{console.log(dn+": clickCenter"),b.value=127},p=()=>{console.log(dn+": clickNegative"),b.value>l.min&&b.value--},g=()=>{console.log(dn+": clickNegative"),b.value>l.min+5?b.value-=5:b.value=l.min},f=()=>{console.log(dn+": clickPositive"),b.value<l.max&&b.value++},y=()=>{console.log(dn+": clickPositive"),b.value<l.max-5?b.value+=5:b.value=l.max},h=()=>{console.log(dn+": clickTest"),t.methods.update_node_variable(l.nodeNumber,l.nodeVariableIndex,b.value)};return(l,t)=>{const o=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-badge"),i=(0,a.g2)("q-slider"),d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-space"),_=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(_,{class:"q-ma-xs no-padding",style:{"min-width":"200px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{style:(0,n.Tr)(u.value),class:"no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",an,[(0,a.eW)((0,n.v_)(e.displayTitle)+"   ",1),(0,a.bF)(o,{style:{"min-width":"10px",height:"10px"},class:"no-margin no-padding float-right text-caption text-weight-thin"},{default:(0,a.k6)(()=>[(0,a.eW)("   "+(0,n.v_)(e.nodeVariableIndex),1)]),_:1})]),(0,a.Lk)("div",on,(0,n.v_)(e.displaySubTitle),1),(0,a.bF)(s,{color:"secondary"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(m.value)+" "+(0,n.v_)(e.displayUnits),1)]),_:1}),(0,a.bF)(i,{"model-value":b.value,max:e.max,min:e.min,onChange:t[0]||(t[0]=e=>{b.value=e})},null,8,["model-value","max","min"]),(0,a.bF)(_,{flat:"",class:"row no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",icon:"remove",size:"sm",onClick:t[1]||(t[1]=e=>p()),"no-caps":""})]),_:1}),(0,a.bF)(r),(0,a.bF)(o,{align:"left",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"left",dense:"",color:"blue",label:"-5",size:"sm",onClick:t[2]||(t[2]=e=>g()),"no-caps":""})]),_:1}),(0,a.bF)(r),(0,a.bF)(o,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[c.value?((0,a.uX)(),(0,a.CE)("div",nn,[(0,a.bF)(d,{dense:"",size:"sm",label:"Center",onClick:t[3]||(t[3]=e=>v()),"no-caps":""})])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(r),(0,a.bF)(o,{flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[c.value?((0,a.uX)(),(0,a.CE)("div",sn,[(0,a.bF)(d,{dense:"",size:"sm",label:"Test",onClick:t[4]||(t[4]=e=>h()),"no-caps":""})])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(r),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",label:"+5",size:"sm",onClick:t[5]||(t[5]=e=>y()),"no-caps":""})]),_:1}),(0,a.bF)(r),(0,a.bF)(o,{align:"right",flat:"",class:"row no-margin q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{align:"right",dense:"",color:"blue",icon:"add",size:"sm",onClick:t[6]||(t[6]=e=>f()),"no-caps":""})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1})}}};var un=t(7410);const cn=rn,mn=cn;x()(rn,"components",{QCard:A.A,QCardSection:h.A,QIcon:Et.A,QTooltip:un.A,QBadge:j.A,QSlider:ge.A,QBtn:fe.A,QSpace:_e.A});const bn={class:"no-padding no-margin"},vn={class:"no-padding no-margin",style:{border:"1px solid grey"}},pn={__name:"NodeVariableTabs",props:{nodeNumber:{type:Number,required:!0},configuration:Object},setup(e){const l=e,t=(0,o.KR)(),s=(0,o.KR)();(0,a.WQ)("store"),(0,o.KR)("nvTabs"),(0,o.KR)("92vw");return(0,a.sV)(()=>{t.value=l.configuration.tabPanels,s.value=t.value[0].displayTitle}),(0,a.wB)(s,()=>{}),(0,a.$u)(()=>{}),(l,i)=>{const d=(0,a.g2)("q-tab"),r=(0,a.g2)("q-tabs"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab-panel"),m=(0,a.g2)("q-tab-panels");return(0,a.uX)(),(0,a.CE)("div",bn,[(0,a.bF)(r,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),"outside-arrows":"","narrow-indicator":"",dense:"",style:{"max-width":"92vw"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,e=>((0,a.uX)(),(0,a.Wv)(d,{key:e.displayTitle,label:e.displayTitle,name:e.displayTitle},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),(0,a.bF)(m,{"keep-alive":"",modelValue:s.value,"onUpdate:modelValue":i[1]||(i[1]=e=>s.value=e),class:"no-padding no-margin"},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.value,l=>((0,a.uX)(),(0,a.Wv)(c,{key:l.displayTitle,name:l.displayTitle,class:"no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",vn,[(0,a.bF)(u,{class:"q-py-none no-margin text-body1"},{default:(0,a.k6)(()=>[(0,a.Lk)("b",null,(0,n.v_)(l.displaySubTitle),1)]),_:2},1024),(0,a.bF)(u,{class:"no-padding no-margin row"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(kn),{nodeNumber:e.nodeNumber,configuration:l.items},null,8,["nodeNumber","configuration"])]),_:2},1024)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])}}},gn=pn,fn=gn;x()(pn,"components",{QTabs:qe.A,QTab:Fe.A,QTabPanels:Ve.A,QTabPanel:Ce.A,QCardSection:h.A});const _n={class:"q-pa-xs row"},yn={__name:"NodeVariables",props:{nodeNumber:Number,configuration:Object},setup(e){const l=e,t=(0,a.WQ)("store");function n(e){var a=!0;return e.visibilityLogic&&(a=oe(l.nodeNumber,e.visibilityLogic,t)),a}return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{}),(l,t)=>((0,a.uX)(),(0,a.CE)("div",_n,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.configuration,l=>((0,a.uX)(),(0,a.CE)("div",{key:l},["NodeChannelList"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(go),{key:0,nodeNumber:e.nodeNumber,configuration:l},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),"NodeVariableBitArray"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(wo),{key:1,nodeNumber:e.nodeNumber,variableIndex:l.nodeVariableIndex,bitCollection:l.bitCollection,displayTitle:l.displayTitle,displaySubTitle:l.displaySubTitle,configuration:l},null,8,["nodeNumber","variableIndex","bitCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"NodeVariableBitSingle"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ao),{key:2,nodeNumber:e.nodeNumber,variableIndex:l.nodeVariableIndex,displayTitle:l.displayTitle,displaySubTitle:l.displaySubTitle,bit:l.bit,configuration:l},null,8,["nodeNumber","variableIndex","displayTitle","displaySubTitle","bit","configuration"])):(0,a.Q3)("",!0),"NodeVariableButtons"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(So),{key:3,nodeNumber:e.nodeNumber,nodeVariableIndex:l.nodeVariableIndex,buttonCollection:l.buttonCollection,displayTitle:l.displayTitle,displaySubTitle:l.displaySubTitle,configuration:l},null,8,["nodeNumber","nodeVariableIndex","buttonCollection","displayTitle","displaySubTitle","configuration"])):(0,a.Q3)("",!0),"NodeVariableDual"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Ko),{key:4,NodeVariableIndexLow:l.nodeVariableIndexLow,NodeVariableIndexHigh:l.nodeVariableIndexHigh,NodeNumber:e.nodeNumber,displayTitle:l.displayTitle,displaySubTitle:l.displaySubTitle,displayScale:l.displayScale,displayOffset:l.displayOffset,displayUnits:l.displayUnits,min:l.min,max:l.max,startBit:l.startBit,endBit:l.endBit,configuration:l},null,8,["NodeVariableIndexLow","NodeVariableIndexHigh","NodeNumber","displayTitle","displaySubTitle","displayScale","displayOffset","displayUnits","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableGroup"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(zo),{key:5,nodeNumber:e.nodeNumber,configuration:l},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),"NodeVariableNumber"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Yo),{key:6,nodeNumber:e.nodeNumber,displayTitle:l.displayTitle,displaySubTitle:l.displaySubTitle,"node-variable-index":l.nodeVariableIndex,displayScale:l.displayScale,displayOffset:l.displayOffset,displayUnits:l.displayUnits,min:l.min,max:l.max,startBit:l.startBit,endBit:l.endBit,configuration:l},null,8,["nodeNumber","displayTitle","displaySubTitle","node-variable-index","displayScale","displayOffset","displayUnits","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableSelect"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(tn),{key:7,nodeVariableIndex:l.nodeVariableIndex,nodeNumber:e.nodeNumber,bitMask:l.bitMask,displayTitle:l.displayTitle,displaySubTitle:l.displaySubTitle,options:l.options,configuration:l},null,8,["nodeVariableIndex","nodeNumber","bitMask","displayTitle","displaySubTitle","options","configuration"])):(0,a.Q3)("",!0),"NodeVariableSlider"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(mn),{key:8,nodeNumber:e.nodeNumber,nodeVariableIndex:l.nodeVariableIndex,displayTitle:l.displayTitle,displaySubTitle:l.displaySubTitle,displayScale:l.displayScale,displayUnits:l.displayUnits,displayOffset:l.displayOffset,min:l.min,max:l.max,startBit:l.startBit,endBit:l.endBit,configuration:l},null,8,["nodeNumber","nodeVariableIndex","displayTitle","displaySubTitle","displayScale","displayUnits","displayOffset","min","max","startBit","endBit","configuration"])):(0,a.Q3)("",!0),"NodeVariableTabs"==l.type&&n(l)?((0,a.uX)(),(0,a.Wv)((0,o.R1)(fn),{key:9,nodeNumber:e.nodeNumber,configuration:l},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0)]))),128))]))}},hn=yn,kn=hn,Nn={class:"text-h6"},xn={key:0,class:"text-h6"},wn={key:1,class:"text-h6"},qn={class:"q-pa-xs row"},Fn={class:"text-body2"},Vn="NodevariablesDialog",Cn={__name:"NodeVariablesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),{registerTimeout:i}=(0,u.A)(),c=(0,a.WQ)("store"),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),_=(0,o.KR)(!1),y=(0,o.KR)(),h=(0,o.KR)(),k=(0,o.KR)(0),N=e,x=l,w=(0,a.EW)({get(){return N.modelValue},set(e){x("update:modelValue",e)}});(0,a.wB)(w,async()=>{1==w.value&&(_.value=!1,void 0==F.value?(f.value=!0,m.value=!0):(f.value=!1,m.value=!1,y.value=c.state.nodeDescriptors[N.nodeNumber].nodeVariableInformation,q()),k.value=(0,r.r)(c,N.nodeNumber))});const q=()=>{let e=t.notify({message:"updating channel names",caption:"please wait....",timeout:0,position:"center",color:"primary"});i(()=>{h.value=(0,d.Gk)(c,F.value,N.nodeNumber),e()},300)},F=(0,a.EW)(()=>{var e=void 0;try{e=c.state.nodeDescriptors[N.nodeNumber].nodeVariables}catch{}return e});(0,a.wB)(v,()=>{try{0==v.value&&q()}catch{}}),(0,a.wB)(F,()=>{1==w.value&&(void 0==F.value?(f.value=!0,m.value=!0):(m.value=!1,y.value=c.state.nodeDescriptors[N.nodeNumber].nodeVariableInformation,q()),k.value=(0,r.r)(c,N.nodeNumber))}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(async()=>{N.nodeNumber&&(0==c.state.nodes[N.nodeNumber].parameters[6]?g.value=!0:g.value=!1)});const V=()=>{console.log(Vn+`: clickChannelNames: number ${k.value}`),k.value>0&&(v.value=!0)},C=()=>{console.log(Vn+": clickUpdateModuleDescriptor"),c.methods.request_matching_mdf_list(N.nodeNumber,"USER"),c.methods.request_matching_mdf_list(N.nodeNumber,"SYSTEM"),b.value=!0},A=()=>{console.log(Vn+": clickRefresh"),c.methods.request_all_node_variables(N.nodeNumber),p.value=!0},E=()=>{console.log(Vn+": clickToggleRaw"),f.value?f.value=!1:f.value=!0},R=()=>{console.log(Vn+": clickToggleNodeDescriptor"),_.value?_.value=!1:_.value=!0};return(l,t)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-separator"),u=(0,a.g2)("q-card"),x=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-dialog"),Q=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(q,{modelValue:w.value,"onUpdate:modelValue":t[5]||(t[5]=e=>w.value=e),persistent:"","full-width":"","full-height":"",position:"right"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{class:"q-pa-none q-ml-xl"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[0==!k.value?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"channel names",onClick:t[0]||(t[0]=e=>V())})):(0,a.Q3)("",!0),(0,a.bF)(s,{color:"cyan-1",size:"sm","text-color":"black",label:"manage Module Descriptor",onClick:t[1]||(t[1]=e=>C())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:t[2]||(t[2]=e=>A())}),(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[Q]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Nn," Node Variables for node : "+(0,n.v_)((0,o.R1)(c).getters.node_name(e.nodeNumber)),1)]),_:1})]),_:1}),(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[m.value?((0,a.uX)(),(0,a.CE)("div",xn," *** Descriptor not loaded for this node *** ")):(0,a.Q3)("",!0),g.value?((0,a.uX)(),(0,a.CE)("div",wn," this node has no variables to display ")):(0,a.Q3)("",!0)]),_:1}),y.value?((0,a.uX)(),(0,a.Wv)(d,{key:0,class:"q-pa-none q-ma-none text-h6"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(y.value),1)]),_:1})):(0,a.Q3)("",!0),(0,o.R1)(c).state.nodeDescriptors[N.nodeNumber]?((0,a.uX)(),(0,a.Wv)((0,o.R1)(kn),{key:1,nodeNumber:e.nodeNumber,configuration:h.value},null,8,["nodeNumber","configuration"])):(0,a.Q3)("",!0),f.value?((0,a.uX)(),(0,a.Wv)(d,{key:2,class:"q-pa-none"},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(lo),{nodeNumber:e.nodeNumber},null,8,["nodeNumber"]),(0,a.bF)(r)]),_:1})):(0,a.Q3)("",!0),_.value?((0,a.uX)(),(0,a.Wv)(d,{key:3,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",qn,[t[9]||(t[9]=(0,a.Lk)("div",{class:"text-primary text-h6"},[(0,a.eW)("Variables descriptor"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",Fn,[(0,a.Lk)("pre",null,(0,n.v_)(F.value),1)])]),(0,a.bF)(r)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(x,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle raw view",onClick:t[3]||(t[3]=e=>E())}),(0,a.bF)(s,{flat:"",label:"Toggle variables descriptor view",onClick:t[4]||(t[4]=e=>R())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Rl),{modelValue:b.value,"onUpdate:modelValue":t[6]||(t[6]=e=>b.value=e),nodeNumber:e.nodeNumber},null,8,["modelValue","nodeNumber"]),(0,a.bF)(nl,{modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=e=>v.value=e),nodeNumber:e.nodeNumber,numberOfChannels:k.value},null,8,["modelValue","nodeNumber","numberOfChannels"]),(0,a.bF)((0,o.R1)(ml),{modelValue:p.value,"onUpdate:modelValue":t[8]||(t[8]=e=>p.value=e),callingModule:"Node Variables",message:"Waiting on Node Variables"},null,8,["modelValue"])],64)}}},An=Cn,En=An;x()(Cn,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QSeparator:Xe.A,QCardActions:Me.A}),x()(Cn,"directives",{ClosePopup:al.A});const Rn="NodesViewAdvancedDialog",Qn={__name:"NodesViewAdvancedDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),n=(0,a.WQ)("store"),i=(0,o.KR)(!1),u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(""),b=(0,o.KR)(""),v=e,p=l,g=(0,a.EW)({get(){return v.modelValue},set(e){p("update:modelValue",e)}}),f=async e=>{if((0,r.g)(n,e));else{m.value="",b.value="Loading Node Parameters",c.value=!0,n.methods.request_all_node_parameters(e,20,100);let l=Date.now();while(Date.now()-l<6e4){if(m.value.length>0)break;await(0,d.yy)(100)}c.value=!1}return 0==(0,r.g)(n,e)&&(console.log(Rn+`: checkNodeParameters: node ${e} failed`),t.notify({message:"Reading Node Parameters has failed",caption:"please check connections to node",timeout:5e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]})),(0,r.g)(n,e)},_=async()=>{console.log(Rn+": clickNodeZeroParameters"),void 0==n.state.nodes[0]&&(n.state.nodes[0]={}),n.state.nodes[0].parameters={},await f(0)&&(i.value=!0)},y=()=>{console.log(Rn+": clickProgramNode: BOOT mode "),u.value=!0};return(e,l)=>{const t=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-actions"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),p=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(v,{modelValue:g.value,"onUpdate:modelValue":l[2]||(l[2]=e=>g.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[p]])]),default:(0,a.k6)(()=>[l[7]||(l[7]=(0,a.Lk)("div",{class:"text-h6"}," Advanced functions ",-1))]),_:1,__:[7]}),(0,a.bF)(r,{class:"q-py-none q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{width:"250px","min-height":"80px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Node 0 parameters",onClick:l[0]||(l[0]=e=>_())},null,512),[[p]])]),_:1})]),_:1}),(0,a.bF)(d,{style:{width:"500px","min-height":"80px"}},{default:(0,a.k6)(()=>l[8]||(l[8]=[(0,a.eW)(" A node with an ID of 0 won't show in the main node view, but it's parameters can be viewed from here. An uninitialised node will have an ID of 0, as will a SLiM consumer node, so if there is more than one node with ID 0, then the last one to respond will be displayed ")])),_:1,__:[8]})]),_:1}),(0,a.bF)(r,{class:"q-py-none q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{"min-width":"250px","min-height":"80px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{align:"left"},{default:(0,a.k6)(()=>[(0,a.bF)(t,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"program Node in boot mode",onClick:l[1]||(l[1]=e=>y())})]),_:1})]),_:1}),(0,a.bF)(d,{style:{width:"500px","min-height":"80px"}},{default:(0,a.k6)(()=>l[9]||(l[9]=[(0,a.eW)(" A node in boot mode (both green & yellow led on) won't respond to CBUS commands, but can be programmed from here ")])),_:1,__:[9]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(Pa),{modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e),nodeNumber:0},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Mt),{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value=e),nodeNumber:0,mode:"BOOT"},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ml),{modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=e=>c.value=e),callingModule:"NodesView Advanced",message:b.value,onWaitingOnBusTrafficDialogEvent:l[6]||(l[6]=e=>m.value=e)},null,8,["modelValue","message"])],64)}}},In=Qn,Ln=In;x()(Qn,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QCardActions:Me.A}),x()(Qn,"directives",{ClosePopup:al.A});const Sn={__name:"NodesViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Nodes View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[2]||(l[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," This view is intended to allow management of all the nodes on the layout ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text_body1"}," When first connected, a QNN is issued to find all the nodes on the network, and the list created from the responses ",-1),(0,a.Lk)("div",{class:"text_body1"}," The REFRESH button can be used at any point to resend a QNN to update the display, when a new node is added for instance ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[4]||(l[4]=[(0,a.Lk)("div",{class:"text_body1"}," The intention is to always use 'fresh' data read from the nodes, and if the required data hasn't yet been read, there may be a pop-up displayed whilst that data is being read ",-1),(0,a.Lk)("div",{class:"text_body1"}," If the node has already been read, the display will use the data it has, but will update when the 'fresh' data arrives ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[5]||(l[5]=[(0,a.Lk)("div",{class:"text_body1"}," The ADVANCED button gives access to further actions ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[6]||(l[6]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[7]||(l[7]=[(0,a.Lk)("div",{class:"text_body1"}," The Name option allows the setting of a Group name as well, which is very useful when used with the SEARCH option ",-1)])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"])}}},Wn=Sn,Bn=Wn;x()(Sn,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A}),x()(Sn,"directives",{ClosePopup:al.A});const Tn={class:"text-h6"},Dn="VLCBDiagnosticsDialog",Kn={__name:"VLCBDiagnosticsDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)([]),d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,()=>{console.log(Dn+": WATCH model")});const c=[{name:"diagnosticCode",field:"diagnosticCode",required:!0,label:"Diagnostic Code",align:"left",sortable:!0},{name:"diagnosticValue",field:"diagnosticValue",required:!1,label:"Diagnostic Value",align:"left",sortable:!0},{name:"diagnosticName",field:"diagnosticName",required:!0,label:"Name",align:"left",sortable:!0}],m=(0,a.EW)(()=>{var e=void 0;try{d.nodeNumber&&t.state.nodes[d.nodeNumber].services[d.serviceIndex]&&(e=Object.values(t.state.nodes[d.nodeNumber].services[d.serviceIndex].diagnostics))}catch(e){console.log(Dn+": nodeServiceDiagnostics: "+e)}return e});(0,a.wB)(m,()=>{m.value&&b()});const b=()=>{try{i.value=[],m.value.forEach(e=>{if(0!=e.DiagnosticCode){let l={};l["diagnosticCode"]=e.DiagnosticCode,l["diagnosticValue"]=e.DiagnosticValue,l["diagnosticName"]=e.DiagnosticName,i.value.push(l)}})}catch(e){console.log(Dn+": update_rows: "+e)}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const v=()=>{console.log(Dn+": clickToggleShowDiagnosticsJSON"),s.value?s.value=!1:s.value=!0};return(l,d)=>{const r=(0,a.g2)("q-btn"),m=(0,a.g2)("q-banner"),b=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-td"),g=(0,a.g2)("q-tr"),f=(0,a.g2)("q-table"),_=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=e=>u.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(r,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Tn," VLCB Diagnostics for "+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)]),_:1})]),_:1}),(0,a.bF)(y,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(b,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"vlcb-diagnostics-table",dense:"",rows:i.value,columns:c,"row-key":"diagnosticCode","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(g,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(p,{key:"diagnosticCode",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticCode),1)]),_:2},1032,["props"]),(0,a.bF)(p,{key:"diagnosticValue",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticValue),1)]),_:2},1032,["props"]),(0,a.bF)(p,{key:"diagnosticName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.diagnosticName),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]),(0,a.bF)(_,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{flat:"",label:"Toggle diagnostics json",onClick:d[0]||(d[0]=e=>v())})]),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(b,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[d[2]||(d[2]=(0,a.eW)(" Diagnostics ")),(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services[e.serviceIndex].diagnostics),1)]),_:1,__:[2]})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Un=Kn,On=Un;x()(Kn,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QCardActions:Me.A}),x()(Kn,"directives",{ClosePopup:al.A});const Mn={class:"text-h6"},Xn="VLCBExtendedServicesDialog",Pn={__name:"VLCBExtendedServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0},serviceIndex:{type:Number,default:0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)([]),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});(0,a.wB)(r,()=>{console.log(Xn+": WATCH model"),c()});const u=[{name:"esdIndex",field:"esdIndex",required:!0,label:"Byte",align:"left",sortable:!0},{name:"esdValue",field:"esdValue",required:!1,label:"Value",align:"left",sortable:!0},{name:"esdName",field:"esdName",required:!0,label:"Name",align:"left",sortable:!0}],c=()=>{try{const e=t.state.nodes[i.nodeNumber].services[i.serviceIndex].ESD;s.value=[];for(let l of Object.keys(e).sort()){console.log(Xn+": update_rows: "+l);let t={};t["esdIndex"]=l,t["esdValue"]=e[l].value,t["esdName"]=e[l].name,s.value.push(t)}}catch(e){console.log(Xn+": update_rows: "+e)}};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(l,i)=>{const d=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-td"),v=(0,a.g2)("q-tr"),p=(0,a.g2)("q-table"),g=(0,a.g2)("q-card"),f=(0,a.g2)("q-dialog"),_=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(f,{modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(g,{style:{"min-width":"600px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[_]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",Mn," Extended service data for "+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services[e.serviceIndex].ServiceName),1)]),_:1})]),_:1}),(0,a.bF)(g,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"no-margin q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"vlcb-ESD-table",dense:"",rows:s.value,columns:u,"row-key":"esdIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(v,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(b,{key:"esdIndex",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.esdIndex),1)]),_:2},1032,["props"]),(0,a.bF)(b,{key:"esdValue",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.esdValue),1)]),_:2},1032,["props"]),(0,a.bF)(b,{key:"esdName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.esdName),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},zn=Pn,jn=zn;x()(Pn,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QTable:Ze.A,QTr:el.A,QTd:ll.A}),x()(Pn,"directives",{ClosePopup:al.A});const $n={class:"text-h6"},Gn="VLCBServicesDialog",Hn={__name:"VLCBServicesDialog",props:{modelValue:{type:Boolean,required:!0},nodeNumber:{type:Number,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(!1),i=(0,o.KR)(!1),d=(0,o.KR)(!1),r=(0,o.KR)([]),u=(0,o.KR)(null),c=e,m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,()=>{g()});const v=[{name:"serviceIndex",field:"serviceIndex",required:!0,label:"Service Index",align:"left",sortable:!0},{name:"serviceType",field:"serviceType",required:!1,label:"Service Type",align:"left",sortable:!0},{name:"serviceName",field:"serviceName",required:!0,label:"Name",align:"left",sortable:!0},{name:"serviceVersion",field:"serviceVersion",required:!0,label:"Version",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"",align:"left"}],p=(0,a.EW)(()=>{var e={};try{c.nodeNumber&&(e=Object.values(t.state.nodes[c.nodeNumber].services))}catch(e){console.log(Gn+": nodeServices "+e)}return e});(0,a.wB)(p,()=>{g()});const g=()=>{r.value=[];try{p.value.forEach(e=>{let l={};l["serviceIndex"]=e.ServiceIndex,l["serviceType"]=e.ServiceType,l["serviceName"]=e.ServiceName,l["serviceVersion"]=e.ServiceVersion,r.value.push(l)})}catch(e){console.log(Gn+": update_rows "+e)}};(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const f=()=>{console.log(Gn+": clickToggleShowServicesJSON"),s.value?s.value=!1:s.value=!0},_=e=>{console.log(`clickiagnostics: index ${e}`),t.methods.request_diagnostics(c.nodeNumber,e),u.value=e,i.value=!0},y=e=>{console.log(`clickESD: index ${e}`),u.value=e,d.value=!0};return(l,m)=>{const p=(0,a.g2)("q-btn"),g=(0,a.g2)("q-banner"),h=(0,a.g2)("q-card-section"),k=(0,a.g2)("q-td"),N=(0,a.g2)("q-tr"),x=(0,a.g2)("q-table"),w=(0,a.g2)("q-card-actions"),q=(0,a.g2)("q-card"),F=(0,a.g2)("q-dialog"),V=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{modelValue:b.value,"onUpdate:modelValue":m[1]||(m[1]=e=>b.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(q,{style:{"min-width":"900px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(p,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[V]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",$n," VLCB Services for "+(0,n.v_)((0,o.R1)(t).getters.node_name(c.nodeNumber)),1)]),_:1})]),_:1}),(0,a.bF)(q,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(h,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{class:"vlcb-services-table",dense:"",rows:r.value,columns:v,"row-key":"serviceIndex","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(N,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(k,{key:"serviceIndex",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.serviceIndex),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceType",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.serviceType),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.serviceName),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"serviceVersion",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.serviceVersion),1)]),_:2},1032,["props"]),(0,a.bF)(k,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(p,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Data",onClick:l=>y(e.row.serviceIndex),"no-caps":""},null,8,["onClick"]),(0,a.bF)(p,{color:"primary",outline:"",class:"q-mx-xs q-my-none",label:"Diagnostics",onClick:l=>_(e.row.serviceIndex),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"]),(0,a.bF)(w,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{flat:"",label:"Toggle services json",onClick:m[0]||(m[0]=e=>f())})]),_:1}),s.value?((0,a.uX)(),(0,a.Wv)(h,{key:0,class:"text-body2 q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.eW)(" Service count: "+(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].serviceCount)+" ",1),(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.nodes[e.nodeNumber].services),1)]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(On),{modelValue:i.value,"onUpdate:modelValue":m[2]||(m[2]=e=>i.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"]),(0,a.bF)((0,o.R1)(jn),{modelValue:d.value,"onUpdate:modelValue":m[3]||(m[3]=e=>d.value=e),nodeNumber:e.nodeNumber,serviceIndex:u.value},null,8,["modelValue","nodeNumber","serviceIndex"])],64)}}},Yn=Hn,Jn=Yn;x()(Hn,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QCardActions:Me.A}),x()(Hn,"directives",{ClosePopup:al.A});const Zn=["src"],es="DialogExampleCompositionAPI",ls={__name:"iFrameDialog",props:{modelValue:{type:Boolean,required:!0},URL:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store"),(0,o.KR)(!1);const t=e,n=l,s=(0,a.EW)({get(){return t.modelValue},set(e){n("update:modelValue",e)}});(0,a.wB)(s,()=>{console.log(es+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});return(l,t)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),r=(0,a.g2)("q-dialog"),u=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(r,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(d,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"max-height":"12vh"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[u]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1))]),_:1,__:[1]})]),_:1}),(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"max-height":"88vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.Lk)("iframe",{src:e.URL,style:{width:"100vw",height:"100vh"}},null,8,Zn)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},ts=ls,as=ts;x()(ls,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A}),x()(ls,"directives",{ClosePopup:al.A});const os="NodesList",ns={__name:"NodesView",setup(e){const l=(0,s.A)(),t=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node number",align:"center",sortable:!0},{name:"CANID",field:"CANID",required:!0,label:"CAN ID",align:"center",sortable:!0},{name:"nodeName",field:"nodeName",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"moduleName",field:"moduleName",required:!0,label:"Module name",align:"left",sortable:!0},{name:"moduleVersion",field:"moduleVersion",required:!0,label:"Version",align:"left",sortable:!0},{name:"mode",field:"mode",required:!0,label:"Mode",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"events",field:"events",required:!0,label:"Stored Events",align:"center",sortable:!0},{name:"spaceLeft",field:"spaceLeft",required:!0,label:"Space",align:"center",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],i=(0,a.WQ)("store"),u=(0,o.KR)(""),c=(0,o.KR)([]),m=(0,o.KR)(),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),_=(0,o.KR)(!1),y=(0,o.KR)(!1),h=(0,o.KR)(!1),k=(0,o.KR)(),N=(0,o.KR)(!1),x=(0,o.KR)(!1),w=(0,o.KR)(!1),q=(0,o.KR)("dummyModule/index.html"),F=(0,o.KR)(""),V=(0,o.KR)(""),C=(0,o.KR)("nodes-view-split-table"),A=(0,a.EW)(()=>i.state.nodes.updateTimestamp);(0,a.wB)(A,()=>{R()});const E=(0,a.EW)(()=>i.state.layout.updateTimestamp);(0,a.wB)(E,()=>{R()});const R=()=>{c.value=[];let e=Object.values(i.state.nodes);e.forEach(e=>{if(e.nodeNumber>0){let l={};l["nodeNumber"]=parseInt(e.nodeNumber),l["CANID"]=e.CANID,l["nodeName"]=i.getters.node_name(e.nodeNumber),l["group"]=i.getters.node_group(e.nodeNumber),l["moduleName"]=i.getters.module_name(e.nodeNumber),l["moduleVersion"]=i.getters.module_version(e.nodeNumber),l["component"]=e.component,l["status"]=e.status,1==e.flim?l["mode"]="FLiM":0==e.flim?l["mode"]="SLiM":l["mode"]="unknown",l["events"]=e.eventCount,l["spaceLeft"]=e.eventSpaceLeft,l["vlcb"]=e.VLCB,c.value.push(l)}})},Q=e=>e in i.state.layout.nodeDetails?i.state.layout.nodeDetails[e].colour:"blue";(0,a.KC)(()=>{void 0==i.state.nodes_view_mode&&(i.state.nodes_view_mode="split"),"split"==i.state.nodes_view_mode?C.value="nodes-view-split-table":C.value="nodes-view-full-table",R()});const I=async e=>{i.state.selected_node=e,k.value=e,b.value=!0,await(0,d.yy)(300)};i.eventBus.on("NODE_DELETED_EVENT",e=>{i.state.selected_node==e&&(b.value=!1)});const L=async e=>{if((0,r.g)(i,e));else{V.value="",F.value="Loading Node Parameters",x.value=!0,i.methods.request_all_node_parameters(e,20,100);let l=Date.now();while(Date.now()-l<12e4){if(V.value.length>0){(0,d.Qn)(os+`: checkNodeParameters: early exit ${Date.now()-l} `);break}await(0,d.yy)(100)}x.value=!1,(0,d.Qn)(os+": checkNodeParameters: WaitingOnBusTraffic ended")}let t=(0,r.g)(i,e);return 0==t&&((0,d.Qn)(os+`: checkNodeParameters: node ${e} failed`),l.notify({message:"Reading Node Parameters has failed",caption:"please check connections to node",timeout:5e3,type:"warning",position:"center",actions:[{label:"Dismiss"}]})),t},S=async e=>{var l=i.state.nodes[e].parameters[6];if(void 0!=i.state.nodes[e].nodeVariables[l]);else{V.value="",F.value="Loading Node Variables",i.methods.request_all_node_variables(e),x.value=!0;for(let e=0;e<1e4;e++){if(V.value.length>0)break;await(0,d.yy)(10)}x.value=!1}},W=e=>{(0,d.Qn)(os+": clickDeleteNode "+e);l.notify({message:"Are you sure you want to delete node "+i.getters.node_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.remove_node(e),i.eventBus.emit("NODE_DELETED_EVENT",e)}},{label:"NO",color:"white",handler:()=>{}}]})},B=async e=>{(0,d.Qn)(os+": clickEvents: node "+e),k.value=e,await L(e),await S(e),i.methods.request_all_node_events(e),await I(e),"full"==i.state.nodes_view_mode&&(f.value=!0)},T=()=>{(0,d.Qn)(os+`: clickViewMode ${i.state.nodes_view_mode}`),i.state.nodes_view_mode="full"==i.state.nodes_view_mode?"split":"full","split"==i.state.nodes_view_mode?C.value="nodes-view-split-table":C.value="nodes-view-full-table"},D=()=>{(0,d.Qn)(os+": clickInfo"),y.value=!0},K=async e=>{(0,d.Qn)(os+": clickNameNode: node "+e),k.value=e,await I(e),g.value=!0},U=async e=>{(0,d.Qn)(os+": clickNodeAdvanced"),k.value=e,i.state.nodes[e].status&&await L(e),await I(e),m.value=e,v.value=!0,(0,d.Qn)(os+": clickAdvanced: node"+i.state.selected_node)},O=async()=>{(0,d.Qn)(os+": clickNodesViewAdvanced:"),p.value=!0},M=async e=>{(0,d.Qn)(os+": clickParameters"),k.value=e,i.state.nodes[e].parameters={},await L(e)&&(await I(e),_.value=!0)},X=()=>{(0,d.Qn)(os+": clickRefresh"),i.methods.query_all_nodes()},P=async e=>{(0,d.Qn)(os+": clickVariables: node "+e),k.value=e,await L(e),await I(e),1e3==e&&i.state.develop?w.value=!0:(await S(e),h.value=!0)},z=async e=>{(0,d.Qn)(os+": clickVLCB"),k.value=e,await L(e),await I(e),await i.methods.request_service_discovery(i.state.selected_node),await(0,d.yy)(200),N.value=!0};return(e,l)=>{const s=(0,a.g2)("q-btn"),d=(0,a.g2)("q-space"),r=(0,a.g2)("q-icon"),A=(0,a.g2)("q-input"),E=(0,a.g2)("q-banner"),R=(0,a.g2)("q-td"),I=(0,a.g2)("q-chip"),L=(0,a.g2)("q-tr"),S=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(E,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[l[16]||(l[16]=(0,a.eW)(" view mode ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:(0,o.R1)(i).state.nodes_view_mode,"no-caps":"",onClick:l[0]||(l[0]=e=>T())},null,8,["label"]),(0,a.bF)(d),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[1]||(l[1]=e=>D())}),(0,a.bF)(d),l[17]||(l[17]=(0,a.eW)("      ")),(0,a.bF)(A,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=e=>u.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),l[18]||(l[18]=(0,a.eW)("    ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Advanced",onClick:l[3]||(l[3]=e=>O())}),l[19]||(l[19]=(0,a.eW)("    ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Refresh",onClick:l[4]||(l[4]=e=>X())})]),default:(0,a.k6)(()=>[l[20]||(l[20]=(0,a.Lk)("div",{class:"text-h6"},"Nodes View",-1))]),_:1,__:[20]}),(0,a.Lk)("div",null,[(0,a.bF)(S,{class:(0,n.C4)(C.value),bordered:"",dense:"",rows:c.value,columns:t,filter:u.value,"row-key":"nodeNumber","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(L,{props:e,class:(0,n.C4)([k.value==e.row.nodeNumber?"bg-blue-1":"bg-white","q-my-none q-py-none"])},{default:(0,a.k6)(()=>[(0,a.bF)(R,{key:"nodeNumber",class:(0,n.C4)("text-"+Q(e.row.nodeNumber)),props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)]),_:2},1032,["class","props"]),(0,a.bF)(R,{key:"CANID",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.CANID),1)]),_:2},1032,["props"]),(0,a.bF)(R,{key:"nodeName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.nodeName),1)]),_:2},1032,["props"]),(0,a.bF)(R,{key:"group",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.group),1)]),_:2},1032,["props"]),(0,a.bF)(R,{key:"moduleName",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.moduleName),1)]),_:2},1032,["props"]),(0,a.bF)(R,{key:"moduleVersion",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.moduleVersion),1)]),_:2},1032,["props"]),(0,a.bF)(R,{key:"mode",props:e},{default:(0,a.k6)(()=>["FLiM"==e.row.mode?((0,a.uX)(),(0,a.Wv)(I,{key:0,dense:"",color:"white","text-color":"blue"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)]),_:2},1024)):((0,a.uX)(),(0,a.Wv)(I,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.mode),1)]),_:2},1024))]),_:2},1032,["props"]),(0,a.bF)(R,{key:"status",props:e},{default:(0,a.k6)(()=>[e.row.status?((0,a.uX)(),(0,a.Wv)(I,{key:0,dense:"",color:"white","text-color":"green"},{default:(0,a.k6)(()=>l[21]||(l[21]=[(0,a.eW)("OK")])),_:1,__:[21]})):((0,a.uX)(),(0,a.Wv)(I,{key:1,dense:"",color:"white","text-color":"red"},{default:(0,a.k6)(()=>l[22]||(l[22]=[(0,a.eW)("OFFLINE")])),_:1,__:[22]}))]),_:2},1032,["props"]),(0,a.bF)(R,{key:"events",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.events),1)]),_:2},1032,["props"]),(0,a.bF)(R,{key:"spaceLeft",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.spaceLeft),1)]),_:2},1032,["props"]),(0,a.bF)(R,{key:"actions"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"light-blue-2","text-color":"black",size:"md",label:"Events",disabled:!e.row.status,onClick:l=>B(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Name",onClick:l=>K(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Parameters",onClick:l=>M(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"Variables",disabled:!e.row.status,onClick:l=>P(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"]),e.row.vlcb?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(s,{key:0,dense:"",class:"q-mx-xs q-my-none",outline:"",disabled:"",color:"primary",size:"md",label:"CBUS",onClick:l=>z(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])),e.row.vlcb?((0,a.uX)(),(0,a.Wv)(s,{key:1,dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"md",label:"VLCB",disabled:!e.row.status,onClick:l=>z(e.row.nodeNumber),"no-caps":""},null,8,["disabled","onClick"])):(0,a.Q3)("",!0),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",color:"blue-grey-1","text-color":"blue-grey-14",size:"md",label:"Advanced",onClick:l=>U(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"md",label:"Delete",onClick:l=>W(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props","class"])]),_:1},8,["class","rows","filter"])]),(0,a.bF)((0,o.R1)(Na),{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=e=>v.value=e),nodeNumber:m.value},null,8,["modelValue","nodeNumber"]),1==b.value&&"split"==(0,o.R1)(i).state.nodes_view_mode?((0,a.uX)(),(0,a.Wv)((0,o.R1)(Qt),{key:0,nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["nodeNumber"])):(0,a.Q3)("",!0),(0,a.bF)((0,o.R1)(Fa),{modelValue:g.value,"onUpdate:modelValue":l[6]||(l[6]=e=>g.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Ia),{modelValue:f.value,"onUpdate:modelValue":l[7]||(l[7]=e=>f.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Pa),{modelValue:_.value,"onUpdate:modelValue":l[8]||(l[8]=e=>_.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(En),{modelValue:h.value,"onUpdate:modelValue":l[9]||(l[9]=e=>h.value=e),nodeNumber:k.value},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(Ln),{modelValue:p.value,"onUpdate:modelValue":l[10]||(l[10]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Bn),{modelValue:y.value,"onUpdate:modelValue":l[11]||(l[11]=e=>y.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ml),{modelValue:x.value,"onUpdate:modelValue":l[12]||(l[12]=e=>x.value=e),callingModule:"Nodes View",message:F.value,onWaitingOnBusTrafficDialogEvent:l[13]||(l[13]=e=>V.value=e)},null,8,["modelValue","message"]),(0,a.bF)((0,o.R1)(Jn),{modelValue:N.value,"onUpdate:modelValue":l[14]||(l[14]=e=>N.value=e),nodeNumber:(0,o.R1)(i).state.selected_node},null,8,["modelValue","nodeNumber"]),(0,a.bF)((0,o.R1)(as),{modelValue:w.value,"onUpdate:modelValue":l[15]||(l[15]=e=>w.value=e),URL:q.value},null,8,["modelValue","URL"])])}}},ss=(0,U.A)(ns,[["__scopeId","data-v-2fd13756"]]),is=ss;x()(ns,"components",{QBanner:Je.A,QBtn:fe.A,QSpace:_e.A,QInput:$.A,QIcon:Et.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QChip:Al.A,QField:G.A});t(4702);const ds="BusTrafficDialog",rs={__name:"BusTrafficDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,s.A)();const t=(0,a.WQ)("store"),i=(0,o.KR)([]),r=(0,o.KR)(null);let u=null;const c=e,m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,()=>{}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),t.eventBus.on("LOG_FILE",(e,l)=>{if(b.value&&"bustraffic.txt"==e){(0,d.Qn)(ds+": Updated BusTrafficDialog"),u=atob(l);let e=u.split("\r");for(let l=0;l<e.length-1;l++)i.value.push({label:e[l]})}});const v=()=>{(0,d.Qn)(ds+": clickDownload");let e=document.createElement("a");e.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(u)),e.setAttribute("download","BusTrafficLog.txt"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)},p=()=>{(0,d.Qn)(ds+": clickEnd"),r.value.scrollTo(i.value.length)},g=()=>{(0,d.Qn)(ds+": clickRefresh"),t.methods.request_log_file("bustraffic.txt")},f=()=>{(0,d.Qn)(ds+": clickStart"),r.value.scrollTo(0)};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-item-label"),u=(0,a.g2)("q-item-section"),c=(0,a.g2)("q-item"),m=(0,a.g2)("q-virtual-scroll"),_=(0,a.g2)("q-card"),y=(0,a.g2)("q-dialog"),h=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(y,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"min-width":"80vw"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(t,{flat:"",color:"white",size:"md",label:"start",onClick:l[0]||(l[0]=e=>f())}),(0,a.bF)(t,{flat:"",color:"white",size:"md",label:"end",onClick:l[1]||(l[1]=e=>p())}),(0,a.bF)(t,{flat:"",color:"white",size:"md",label:"download",onClick:l[2]||(l[2]=e=>v())}),(0,a.bF)(t,{flat:"",color:"white",size:"md",label:"refresh",onClick:l[3]||(l[3]=e=>g())}),(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])]),default:(0,a.k6)(()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"}," Bus Traffic ",-1))]),_:1,__:[5]})]),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"max-height":"90vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{ref_key:"virtualListRef",ref:r,style:{"max-height":"85vh"},items:i.value},{default:(0,a.k6)(({item:e,index:l})=>[((0,a.uX)(),(0,a.Wv)(c,{key:l,dense:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,null,{default:(0,a.k6)(()=>[(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.eW)(" #"+(0,n.v_)(l)+" - "+(0,n.v_)(e.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}};var us=t(8227),cs=t(124),ms=t(5173),bs=t(3796);const vs=rs,ps=vs;x()(rs,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QVirtualScroll:us.A,QItem:cs.A,QItemSection:ms.A,QItemLabel:bs.A}),x()(rs,"directives",{ClosePopup:al.A});const gs="CbusErrorsDialog",fs={__name:"CbusErrorsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(""),i=[{name:"id",field:"id",required:!0,label:"Error Id",align:"left",sortable:!0},{name:"Error",field:"Error",required:!0,label:"Error",align:"left",sortable:!0},{name:"Message",field:"Message",required:!0,label:"Message",align:"left",sortable:!0},{name:"node",field:"node",required:!0,label:"Node",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!1}],d=e,r=l,u=(0,a.EW)({get(){return d.modelValue},set(e){r("update:modelValue",e)}});(0,a.wB)(u,()=>{console.log(gs+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const c=()=>{t.methods.clear_cbus_errors()};return(e,l)=>{const d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-space"),v=(0,a.g2)("q-icon"),p=(0,a.g2)("q-input"),g=(0,a.g2)("q-td"),f=(0,a.g2)("q-tr"),_=(0,a.g2)("q-table"),y=(0,a.g2)("q-card"),h=(0,a.g2)("q-dialog"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(h,{modelValue:u.value,"onUpdate:modelValue":l[1]||(l[1]=e=>u.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(y,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(r,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(d,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[l[2]||(l[2]=(0,a.Lk)("div",{class:"text-h6"}," Cbus Error Dialog ",-1))]),_:1,__:[2]})]),_:1}),(0,a.bF)(y,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{style:{"max-height":"75vh"},class:"scroll no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(_,{title:"Nodes",rows:Object.values((0,o.R1)(t).state.cbus_errors),columns:i,filter:s.value,"row-key":"id","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{top:(0,a.k6)(()=>[l[3]||(l[3]=(0,a.Lk)("div",{class:"col-4 q-table__title text-h4"},"CBUS Errors",-1)),(0,a.bF)(b),(0,a.bF)(p,{outlined:"",dense:"",debounce:"300",modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),placeholder:"Search"},{append:(0,a.k6)(()=>[(0,a.bF)(v,{name:"search"})]),_:1},8,["modelValue"]),(0,a.bF)(b),(0,a.bF)(d,{color:"negative",label:"Clear Errors",onClick:c,"no-caps":""})]),body:(0,a.k6)(e=>[(0,a.bF)(f,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(g,{key:"id",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.id),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"type",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.type),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"Error",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.Error),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"Message",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.Message),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"node",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.node),1)]),_:2},1032,["props"]),(0,a.bF)(g,{key:"count",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.count),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},_s=fs,ys=_s;x()(fs,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QTable:Ze.A,QSpace:_e.A,QInput:$.A,QIcon:Et.A,QTr:el.A,QTd:ll.A}),x()(fs,"directives",{ClosePopup:al.A});const hs="ImportFunctions",ks=t(3011),Ns=t(6138);function xs(e,l,t){var a;try{a=ks.xml2js(e,{compact:!0})}catch(e){throw console.log(hs+": ImportFCU: convert.xml2js: "+e),"convert.xml2js: "+e}try{if(Array.isArray(a.MergModuleDataSet.userNodes))a.MergModuleDataSet.userNodes.forEach(e=>{Vs(l,parseInt(e.nodeNum._text),e.nodeName._text,t),As(l,parseInt(e.nodeNum._text),e.moduleName._text,t)});else{let e=a.MergModuleDataSet.userNodes;Vs(l,parseInt(e.nodeNum._text),e.nodeName._text,t),As(l,parseInt(e.nodeNum._text),e.moduleName._text,t)}}catch(e){console.log(hs+": ImportFCU: userNodes "+e)}try{if(Array.isArray(a.MergModuleDataSet.userEvents))a.MergModuleDataSet.userEvents.forEach(e=>{0!=e.eventValue._text&&qs(l,e.eventNode._text,e.eventValue._text,e.eventName._text,t)});else{let e=a.MergModuleDataSet.userEvents;qs(l,e.eventNode._text,e.eventValue._text,e.eventName._text,t)}}catch(e){console.log(hs+": ImportFCU: userEvents "+e)}}function ws(e,l,t){console.log(hs+": importSPREADSHEET: file size "+e.byteLength);let a={},o={},n={};try{const s=Ns.read(e,{type:"binary"});if(void 0==s.Workbook)throw new Error("Workbook undefined");for(let e=0;e<s.SheetNames.length;e++){if("SHORT_EVENTS"==s.SheetNames[e].toUpperCase()){a=Ns.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(hs+"importSPREADSHEET: workbook number of Short Events imported: "+a.length);for(let e=0;e<a.length;e++)void 0!=a[e].eventNumber&&console.log(hs+`importSPREADSHEET: workbook events:\n                ${a[e].eventName}\n                ${a[e].eventNumber}`),qs(l,0,a[e].eventNumber,a[e].eventName,t),Fs(l,0,a[e].eventNumber,a[e].eventGroup,t)}if("LONG_EVENTS"==s.SheetNames[e].toUpperCase()){a=Ns.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(hs+"importSPREADSHEET: workbook number of Long Events imported: "+a.length);for(let e=0;e<a.length;e++)void 0!=a[e].eventNumber&&console.log(hs+`importSPREADSHEET: workbook events:\n                ${a[e].eventName}\n                ${a[e].eventNodeNumber}:${a[e].eventNumber}`),qs(l,a[e].eventNodeNumber,a[e].eventNumber,a[e].eventName,t),Fs(l,a[e].eventNodeNumber,a[e].eventNumber,a[e].eventGroup,t)}if("NODES"==s.SheetNames[e].toUpperCase()){o=Ns.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(hs+"importSPREADSHEET: workbook number of Nodes imported: "+o.length);for(let e=0;e<o.length;e++)void 0!=o[e].nodeNumber&&(console.log(hs+`importSPREADSHEET: workbook Nodes: ${o[e].nodeName} ${o[e].nodeNumber}`),Vs(l,o[e].nodeNumber,o[e].nodeName,t),Cs(l,o[e].nodeNumber,o[e].nodeGroup,t),As(l,o[e].nodeNumber,o[e].moduleName,t))}if("CHANNELS"==s.SheetNames[e].toUpperCase()){n=Ns.utils.sheet_to_json(s.Sheets[s.SheetNames[e]]),console.log(hs+"importSPREADSHEET: workbook number of Channels imported: "+n.length);for(let e=0;e<n.length;e++)void 0!=n[e].channelNumber&&(console.log(hs+`importSPREADSHEET: workbook Channels: channel ${n[e].channelNumber} ${n[e].channelName}`),Es(l,n[e].nodeNumber,n[e].channelNumber,n[e].channelName,t))}}}catch(e){throw console.log(hs+": importSPREADSHEET "+e),e}}function qs(e,l,t,a,o){if(t>0){let n=(0,d.xT)(l,4)+(0,d.xT)(t,4);void 0==e.state.layout.eventDetails[n]?(e.setters.event_name(n,a),console.log("new event: "+n+" addEventName: "+a)):void 0==e.state.layout.eventDetails[n].name||e.state.layout.eventDetails[n].name.length<1?(e.setters.event_name(n,a),console.log("Event: "+n+": addEventName: "+a+" updated")):e.state.layout.eventDetails[n].name==a?console.log("Event: "+n+": addEventName: "+a+" match"):"overwrite"==o?(e.setters.event_name(n,a),console.log("Event "+n+": addEventName: "+a+" overwrite")):console.log("Event "+n+": addEventName: "+a+" retain")}}function Fs(e,l,t,a,o){if(t>0){let n=(0,d.xT)(l,4)+(0,d.xT)(t,4);void 0==e.state.layout.eventDetails[n]?(e.setters.event_group(n,a),console.log("new event: "+n+" addEventGroup: "+a)):void 0==e.state.layout.eventDetails[n].group||e.state.layout.eventDetails[n].group.length<1?(e.setters.event_group(n,a),console.log("Event: "+n+": addEventGroup: "+a+" updated")):e.state.layout.eventDetails[n].group==a?console.log("Event: "+n+": addEventGroup: "+a+" match"):"overwrite"==o?(e.setters.event_group(n,a),console.log("Event "+n+": addEventGroup: "+a+" overwrite")):console.log("Event "+n+": addEventGroup: "+a+" retain")}}function Vs(e,l,t,a){l>0&&(void 0==e.state.layout.nodeDetails[l]?(e.setters.node_name(l,t),console.log("new node: "+l+": NodeName: "+t)):void 0==e.state.layout.nodeDetails[l].name||e.state.layout.nodeDetails[l].name.length<1?(e.setters.node_name(l,t),console.log("node "+l+": addNodeName: "+t+" updated")):e.state.layout.nodeDetails[l].name==t?console.log("node "+l+": addNodeName: "+t+" match"):"overwrite"==a?(console.log("node "+l+": addNodeName: "+t+" no match - overwrite"),e.setters.node_name(l,t)):console.log("node "+l+": addNodeName: "+t+" no match - retain"))}function Cs(e,l,t,a){l>0&&(void 0==e.state.layout.nodeDetails[l]?(e.setters.node_group(l,t),console.log("new node: "+l+": nodeGroup: "+t)):void 0==e.state.layout.nodeDetails[l].group||e.state.layout.nodeDetails[l].group.length<1?(e.setters.node_group(l,t),console.log("node "+l+": nodeGroup: "+t+" updated")):e.state.layout.nodeDetails[l].group==t?console.log("node "+l+": nodeGroup: "+t+" match"):"overwrite"==a?(console.log("node "+l+": nodeGroup: "+t+" no match - overwrite"),e.setters.node_group(l,t)):console.log("node "+l+": nodeGroup: "+t+" no match - retain"))}function As(e,l,t,a){l>0&&(void 0==e.state.layout.nodeDetails[l]?(e.setters.node_moduleName(l,t),console.log("new node: "+l+": moduleName: "+t)):void 0==e.state.layout.nodeDetails[l].moduleName||e.state.layout.nodeDetails[l].moduleName.length<1?(e.setters.node_moduleName(l,t),console.log("node "+l+": moduleName: "+t+" updated")):e.state.layout.nodeDetails[l].moduleName==t?console.log("node "+l+": moduleName: "+t+" match"):"overwrite"==a?(console.log("node "+l+": moduleName: "+t+" no match - overwrite"),e.setters.node_moduleName(l,t)):console.log("node "+l+": moduleName: "+t+" no match - retain"))}function Es(e,l,t,a,o){let n=null;try{n=e.state.layout.nodeDetails[l].channels[t].channelName}catch{}null==n||0==n.length?(console.log("node "+l+": channelName: "+a+" ChannelName not found - updated"),e.setters.node_channel_name(l,t,a)):n==a?console.log("node "+l+": channelName: "+a+" ChannelName match - do nothing"):"overwrite"==o?(console.log("node "+l+": channelName: "+a+" no match - overwrite"),e.setters.node_channel_name(l,t,a)):console.log("node "+l+": channelName: "+a+" no match - retain")}const Rs="ExportDialog",Qs={__name:"ExportDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,s.A)();const n=t(6138),i=(0,a.WQ)("store"),u=(0,o.KR)(),c=((0,o.KR)("retain"),e),m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,()=>{b.value&&(u.value=void 0)}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const v=async e=>{(0,d.Qn)(Rs+": clickExport");let l=i.state.layout.eventDetails,t=[],a=[];for(let e of Object.keys(l).sort())if("00000000"!=e){let o={},n=parseInt(e.slice(0,4),16);o["eventName"]=l[e].name?l[e].name:"",0!=n&&(o["eventNodeNumber"]=n),o["eventNumber"]=parseInt(e.slice(4,8),16),o["eventGroup"]=l[e].group?l[e].group:"",0==n?a.push(o):t.push(o)}let o=i.state.layout.nodeDetails,s=[],u=[];for(let e of Object.keys(o).sort(function(e,l){return e-l})){let l={};l["nodeName"]=o[e].name?o[e].name:"",l["moduleName"]=o[e].moduleName?o[e].moduleName:"",l["nodeNumber"]=parseInt(e),l["nodeGroup"]=o[e].group?o[e].group:"",u.push(l);try{let l=(0,r.r)(i,e);for(var c=1;c<=l;c++){let l={};l["nodeNumber"]=parseInt(e),l["nodeName"]=o[e].name?o[e].name:"",l["nodeGroup"]=o[e].group?o[e].group:"",l["moduleName"]=o[e].moduleName?o[e].moduleName:"",l["channelNumber"]=c;try{l["channelName"]=o[e].channels[c].channelName}catch{l["channelName"]=""}s.push(l)}}catch(e){(0,d.Qn)(Rs+`: clickExport: ${e}`)}}let m={eventName:"",eventNumber:"",eventGroup:""};a.push(m);let b={eventName:"",eventNumber:"",eventGroup:"",eventNodeNumber:""};t.push(b);let v={nodeName:"",moduleName:"",nodeNumber:"",nodeGroup:""};u.push(v);let p={nodeNumber:"",nodeName:"",nodeGroup:"",moduleName:"",channelNumber:"",channelName:""};s.push(p);const g=n.utils.json_to_sheet(u);try{const e=u.reduce((e,l)=>Math.max(e,l.nodeName.length),15)+5,l=u.reduce((e,l)=>Math.max(e,l.nodeGroup.length),15)+5;g["!cols"]=[{wch:e},{wch:20},{wch:20},{wch:l}],(0,d.Qn)(Rs+": clickExport: nodesWorksheet")}catch(e){(0,d.Qn)(Rs+`: clickExport: nodesWorksheet ${e}`)}const f=n.utils.json_to_sheet(t);try{const e=t.reduce((e,l)=>Math.max(e,l.eventName.length),15)+5,l=t.reduce((e,l)=>Math.max(e,l.eventGroup.length),15)+5;f["!cols"]=[{wch:e},{wch:20},{wch:20},{wch:l}],(0,d.Qn)(Rs+": clickExport: longEventsWorksheet")}catch(e){(0,d.Qn)(Rs+`: clickExport: longEventsWorksheet ${e}`)}const _=n.utils.json_to_sheet(a);try{const e=a.reduce((e,l)=>Math.max(e,l.eventName.length),15)+5,l=a.reduce((e,l)=>Math.max(e,l.eventGroup.length),15)+5;_["!cols"]=[{wch:e},{wch:20},{wch:l}],(0,d.Qn)(Rs+": clickExport: shortEventsWorksheet")}catch(e){(0,d.Qn)(Rs+`: clickExport: shortEventsWorksheet ${e}`)}const y=n.utils.json_to_sheet(s);try{const e=s.reduce((e,l)=>Math.max(e,l.channelName.length),15)+5,l=s.reduce((e,l)=>Math.max(e,l.nodeName.length),15)+5,t=s.reduce((e,l)=>Math.max(e,l.nodeGroup.length),15)+5,a=s.reduce((e,l)=>Math.max(e,l.moduleName.length),15)+5;y["!cols"]=[{wch:15},{wch:l},{wch:t},{wch:a},{wch:18},{wch:e}],(0,d.Qn)(Rs+": clickExport: channelsWorksheet")}catch(e){(0,d.Qn)(Rs+`: clickExport: channelsWorksheet ${e}`)}const h=n.utils.book_new();try{n.utils.book_append_sheet(h,g,"Nodes"),n.utils.book_append_sheet(h,f,"Long_Events"),n.utils.book_append_sheet(h,_,"Short_Events"),n.utils.book_append_sheet(h,y,"Channels")}catch(e){(0,d.Qn)(Rs+`: clickExport: book_append_sheet ${e}`)}const k=i.state.layout.layoutDetails.title+" export "+(0,d.A1)()+".ods",N=k.replaceAll(" ","_");n.writeFile(h,N,{bookType:"ods",compression:!0,cellStyles:!0})};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),n=(0,a.g2)("q-card-section"),s=(0,a.g2)("q-card-actions"),i=(0,a.g2)("q-card"),d=(0,a.g2)("q-dialog"),r=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(d,{modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=e=>b.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[r]])]),default:(0,a.k6)(()=>[l[2]||(l[2]=(0,a.Lk)("div",{class:"text-h6"}," Export ",-1))]),_:1,__:[2]}),(0,a.bF)(n,null,{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text-subtitle2"}," The data exported includes node & event names ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," The export data does not include node configuration & events, use node backup for that ",-1)])),_:1,__:[3]}),(0,a.bF)(i,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{color:"positive",label:"Export",onClick:l[0]||(l[0]=e=>v())},null,512),[[r,2]])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Is=Qs,Ls=Is;x()(Qs,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QCardActions:Me.A}),x()(Qs,"directives",{ClosePopup:al.A});const Ss="JsonDialog",Ws={__name:"JsonDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)("nodes"),i=e,d=l,r=(0,a.EW)({get(){return i.modelValue},set(e){d("update:modelValue",e)}});return(0,a.wB)(r,()=>{console.log(Ss+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,l)=>{const i=(0,a.g2)("q-btn"),d=(0,a.g2)("q-banner"),u=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-tab"),m=(0,a.g2)("q-tabs"),b=(0,a.g2)("q-tab-panel"),v=(0,a.g2)("q-tab-panels"),p=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:"","full-width":"","full-height":""},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(i,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[l[3]||(l[3]=(0,a.Lk)("div",{class:"text-h6"}," JSON Dialog ",-1))]),_:1,__:[3]})]),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:(0,a.k6)(()=>[(0,a.bF)(c,{name:"busEvents",label:"Bus Events"}),(0,a.bF)(c,{name:"cbusErrors",label:"Cbus Errors"}),(0,a.bF)(c,{name:"layout",label:"Layout"}),(0,a.bF)(c,{name:"layouts",label:"Layouts"}),(0,a.bF)(c,{name:"nodes",label:"Nodes"}),(0,a.bF)(c,{name:"nodeDescriptors",label:"Node Descriptors"}),(0,a.bF)(c,{name:"nodeDescriptorList",label:"Node Descriptor Lists"}),(0,a.bF)(c,{name:"restoredData",label:"RestoredData"}),(0,a.bF)(c,{name:"server",label:"Server"}),(0,a.bF)(c,{name:"serverStatus",label:"server Status"}),(0,a.bF)(c,{name:"traffic",label:"Traffic"})]),_:1},8,["modelValue"]),(0,a.bF)(v,{modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),animated:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{name:"busEvents"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[4]||(l[4]=(0,a.Lk)("div",{class:"text-h6"},"Events",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.busEvents)+"\n              ",1)]),_:1,__:[4]})]),_:1}),(0,a.bF)(b,{name:"cbusErrors"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"},"Cbus Errors",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.cbus_errors)+"\n              ",1)]),_:1,__:[5]})]),_:1}),(0,a.bF)(b,{name:"layout"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[6]||(l[6]=(0,a.Lk)("div",{class:"text-h6"},"Layout",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.layout)+"\n              ",1)]),_:1,__:[6]})]),_:1}),(0,a.bF)(b,{name:"layouts"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[7]||(l[7]=(0,a.Lk)("div",{class:"text-h6"},"Layouts",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.layouts_list)+"\n              ",1)]),_:1,__:[7]})]),_:1}),(0,a.bF)(b,{name:"nodeDescriptorList"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[8]||(l[8]=(0,a.Lk)("div",{class:"text-h6"},"Descriptor List",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.nodeDescriptorList)+"\n              ",1)]),_:1,__:[8]})]),_:1}),(0,a.bF)(b,{name:"nodeDescriptors"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[9]||(l[9]=(0,a.Lk)("div",{class:"text-h6"},"Node Descriptors",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.nodeDescriptors)+"\n              ",1)]),_:1,__:[9]})]),_:1}),(0,a.bF)(b,{name:"nodes"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[10]||(l[10]=(0,a.Lk)("div",{class:"text-h6"},"Nodes",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.nodes)+"\n              ",1)]),_:1,__:[10]})]),_:1}),(0,a.bF)(b,{name:"restoredData"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[11]||(l[11]=(0,a.Lk)("div",{class:"text-h6"},"restoredData",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.restoredData)+"\n              ",1)]),_:1,__:[11]})]),_:1}),(0,a.bF)(b,{name:"server"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[12]||(l[12]=(0,a.Lk)("div",{class:"text-h6"},"Server",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.server)+"\n              ",1)]),_:1,__:[12]})]),_:1}),(0,a.bF)(b,{name:"serverStatus"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[13]||(l[13]=(0,a.Lk)("div",{class:"text-h6"},"Server Status",-1)),(0,a.Lk)("pre",null,"                "+(0,n.v_)((0,o.R1)(t).state.serverStatus)+"\n              ",1)]),_:1,__:[13]})]),_:1}),(0,a.bF)(b,{name:"traffic"},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{"max-height":"75vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[l[14]||(l[14]=(0,a.Lk)("div",{class:"text-h6"},"Node Traffic",-1)),(0,a.Lk)("pre",null,"              "+(0,n.v_)((0,o.R1)(t).state.nodeTraffic)+"\n              ",1)]),_:1,__:[14]})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Bs=Ws,Ts=Bs;x()(Ws,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QTabs:qe.A,QTab:Fe.A,QTabPanels:Ve.A,QTabPanel:Ce.A}),x()(Ws,"directives",{ClosePopup:al.A});var Ds=t(4083),Ks=t.n(Ds),Us=t(7123),Os=t.n(Us),Ms=t(8626),Xs=t.n(Ms),Ps=t(8749),zs=t.n(Ps);const js="ImportDialog",$s={__name:"ImportDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,s.A)();const t=(0,a.WQ)("store"),n=(0,o.KR)(),i=(0,o.KR)("SPREADSHEET"),d=(0,o.KR)("retain"),r=(0,o.KR)(!1),u=(0,o.KR)(!1),c=e,m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,()=>{b.value&&(n.value=void 0,i.value="SPREADSHEET",r.value=!1,u.value=!1)}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const v=()=>{console.log(js+": clickFCUInfo"),r.value=!0},p=()=>{console.log(js+": clickImport "+n.value.name);let e=new FileReader;try{"FCU"==i.value?(e.readAsText(n.value),e.onload=function(){xs(e.result,t,d.value),t.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+n.value.name,"successful","info",0)}):"SPREADSHEET"==i.value&&(e.readAsArrayBuffer(n.value),e.onload=function(){ws(e.result,t,d.value),t.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+n.value.name,"successful","info",0)})}catch(e){console.log(js+": clickImport: "+e),t.eventBus.emit("GENERAL_MESSAGE_EVENT","import "+n.value.name+" failed",e,"warning",0)}},g=()=>{console.log(js+": clickSheetInfo"),u.value=!0};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),c=(0,a.g2)("q-radio"),m=(0,a.g2)("q-file"),f=(0,a.g2)("q-card-actions"),_=(0,a.g2)("q-card"),y=(0,a.g2)("q-dialog"),h=(0,a.g2)("q-img"),k=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(y,{modelValue:b.value,"onUpdate:modelValue":l[8]||(l[8]=e=>b.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[l[11]||(l[11]=(0,a.Lk)("div",{class:"text-h6"}," Import ",-1))]),_:1,__:[11]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>l[12]||(l[12]=[(0,a.Lk)("div",{class:"text-h6"}," This allows the import of names, groups & modules for Events & Nodes from external files ",-1),(0,a.Lk)("div",{class:"text-h6"},"Node variables and events are not imported, please use node restore for that",-1),(0,a.Lk)("div",{class:"text-h6"},"The data imported is dependant on the file type below",-1),(0,a.Lk)("div",{class:"text-h6"},"Click the info button by each file type for more details",-1)])),_:1,__:[12]}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),val:"SPREADSHEET",label:"Spreadsheet import"},null,8,["modelValue"]),l[13]||(l[13]=(0,a.eW)("     ")),(0,a.bF)(t,{dense:"",color:"primary",size:"sm",label:"info",onClick:l[1]||(l[1]=e=>g()),"no-caps":""})]),_:1,__:[13]}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),val:"FCU",label:"FCU configuration file import"},null,8,["modelValue"]),l[14]||(l[14]=(0,a.eW)("     ")),(0,a.bF)(t,{dense:"",color:"primary",size:"sm",label:"info",onClick:l[3]||(l[3]=e=>v()),"no-caps":""})]),_:1,__:[14]}),(0,a.bF)(m,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=e=>n.value=e),label:"Pick one file",filled:"",style:{"max-width":"400px"}},null,8,["modelValue"]),(0,a.bF)(s,null,{default:(0,a.k6)(()=>l[15]||(l[15]=[(0,a.Lk)("div",{class:"text-subtitle2"}," By default, if there is any existing data for an element being imported, this is retained, and the imported data for that element is ignored ",-1),(0,a.Lk)("div",{class:"text-subtitle2"},' However, selecting "overwrite" will result in the import being used instead ',-1)])),_:1,__:[15]}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:d.value,"onUpdate:modelValue":l[5]||(l[5]=e=>d.value=e),val:"retain",label:"Retain any existing data"},null,8,["modelValue"])]),_:1}),(0,a.bF)(s,{class:"dense no-padding no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value=e),val:"overwrite",label:"Overwrite existing data"},null,8,["modelValue"])]),_:1}),(0,a.bF)(s),(0,a.bF)(f,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{color:"positive",label:"IMPORT",disabled:!n.value,onClick:l[7]||(l[7]=e=>p())},null,8,["disabled"]),[[k]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(y,{modelValue:u.value,"onUpdate:modelValue":l[9]||(l[9]=e=>u.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[l[16]||(l[16]=(0,a.Lk)("div",{class:"text-h6"}," Import spreadsheet information ",-1))]),_:1,__:[16]}),(0,a.bF)(_,{style:{"max-height":"85vh"},class:"scroll no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,null,{default:(0,a.k6)(()=>[l[17]||(l[17]=(0,a.Lk)("div",{class:"text-subtitle2"}," The import will accept most spreadsheet types, such as xls, xlsx & ods, but NOT csv (which strictly isn't a spreadsheet format anyway) ",-1)),l[18]||(l[18]=(0,a.Lk)("div",{class:"text-subtitle2"}," The information for long events is expected to be on a sheet named 'Long_Events' ",-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:Ks(),"spinner-color":"white",style:{width:"500px"}})]),l[19]||(l[19]=(0,a.Lk)("br",null,null,-1)),l[20]||(l[20]=(0,a.Lk)("div",{class:"text-subtitle2"}," The information for short events is expected to be on a sheet named 'Short_Events', and doesn't need the 'EventNodeNumber' column ",-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:Os(),"spinner-color":"white",style:{width:"500px"}})]),l[21]||(l[21]=(0,a.Lk)("br",null,null,-1)),l[22]||(l[22]=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The node information is expected to be on a sheet named 'Nodes'."),(0,a.Lk)("br"),(0,a.eW)(" 'moduleName' is optional, and will be updated when the node connects anyway, but useful if the node isn't connected. ")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:Xs(),"spinner-color":"white",style:{width:"500px"}})]),l[23]||(l[23]=(0,a.Lk)("br",null,null,-1)),l[24]||(l[24]=(0,a.Lk)("div",{class:"text-subtitle2"},[(0,a.eW)(" The channel information is expected to be on a sheet named 'Channels'."),(0,a.Lk)("br"),(0,a.eW)(" Only 'nodeNumber', 'channelNumber' & 'channelName' are actually used by the import."),(0,a.Lk)("br"),(0,a.eW)(" 'nodeName', 'moduleName' and 'groupName' are not used by the import, and so optional."),(0,a.Lk)("br"),(0,a.eW)(" These are populated when a spreadsheet is exported, and very useful to make the list more readable. ")],-1)),(0,a.Lk)("div",null,[(0,a.bF)(h,{src:zs(),"spinner-color":"white",style:{width:"500px"}})]),l[25]||(l[25]=(0,a.Lk)("br",null,null,-1)),l[26]||(l[26]=(0,a.Lk)("div",{class:"text-subtitle2"}," NOTE: the column names are case sensitive and have no spaces, but the order of the columns doesn't matter, as it looks for columns by name, not position. ",-1)),l[27]||(l[27]=(0,a.Lk)("div",{class:"text-subtitle2"}," Additional columns with different headers are ignored, as are other sheets with different names. ",-1))]),_:1,__:[17,18,19,20,21,22,23,24,25,26,27]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)(y,{modelValue:r.value,"onUpdate:modelValue":l[10]||(l[10]=e=>r.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(_,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[k]])]),default:(0,a.k6)(()=>[l[28]||(l[28]=(0,a.Lk)("div",{class:"text-h6"}," Import FCU configuration information ",-1))]),_:1,__:[28]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>l[29]||(l[29]=[(0,a.Lk)("div",{class:"text-subtitle2"}," FCU confiduration files contain names for events, nodes and modules, but doesn't support groups ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," FCU confiduration files are xml, and the elements used are as follows ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," For events, the elements used are: eventNode, eventValue and eventName ",-1),(0,a.Lk)("div",{class:"text-subtitle2"}," For nodes, the elements used are: nodeNum, nodeName and moduleName ",-1)])),_:1,__:[29]})]),_:1})]),_:1},8,["modelValue"])],64)}}};var Gs=t(2665);const Hs=$s,Ys=Hs;x()($s,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QRadio:$l.A,QFile:kl.A,QCardActions:Me.A,QImg:Gs.A}),x()($s,"directives",{ClosePopup:al.A});t(3186),t(5531),t(5683),t(9048);const Js={class:"text-body"},Zs="LogsDialog",ei={__name:"LogsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=(0,o.KR)(),i=(0,o.KR)(),r=(0,o.KR)([]),u=e,c=l,m=[{name:"archive",field:"archive",required:!0,label:"archive",align:"left",sortable:!0},{name:"time",field:"time",required:!0,label:"time",align:"left",sortable:!0}],b=(0,a.EW)({get(){return u.modelValue},set(e){c("update:modelValue",e)}});(0,a.wB)(b,()=>{b.value&&t.methods.request_archived_logs_list()}),t.eventBus.on("ARCHIVED_LOGS_LIST",e=>{b.value&&(s.value=e.list,i.value=e.directory)}),(0,a.wB)(s,()=>{b.value&&v()});const v=()=>{r.value=[],s.value.forEach(e=>{let l=e.split("_"),t=l[1];r.value.push({archive:e,time:d.Fm(t)}),d.Qn(Zs+`: updateArchiveList ${e}`)}),r.value.sort(function(e,l){return e.archive<l.archive?1:-1}),d.Qn(Zs+`: teRows count ${r.value.length}`)};t.eventBus.on("BINARY_FILE",async e=>{if(b.value)try{d.Qn(Zs+`: RECEIVED BINARY_FILE ${e.fileName} length ${e.data.length}`);const a=atob(e.data);d.Qn(Zs+`: RECEIVED BINARY_FILE buffer length: ${a.length}`);let o=new Uint8Array(a.length);for(var l=0;l<a.length;l++)o[l]=a[l].charCodeAt(0);d.Qn(Zs+`: RECEIVED BINARY_FILE bytesArray length: ${o.length}`);const n=new Blob([o]);d.Qn(Zs+`: RECEIVED BINARY_FILE blob length: ${n.size}`);var t=document.createElement("a");document.body.appendChild(t),t.style="display: none",t.href=URL.createObjectURL(n),t.download=e.fileName,t.click(),document.body.removeChild(t)}catch(e){d.Qn(Zs+`: RECEIVED BINARY_FILE: ${e}`)}}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const p=async e=>{try{d.Qn(Zs+`: clickDownload ${e}`),t.methods.request_binary_file(i.value,e)}catch(e){timeStampedLog(Zs+`: clickDownload: ${e}`)}};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-td"),u=(0,a.g2)("q-tr"),c=(0,a.g2)("q-table"),v=(0,a.g2)("q-card"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=e=>b.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"600px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Logs ",-1))]),_:1,__:[1]})]),_:1}),(0,a.bF)(v,{flat:"",inline:"",class:"q-pa-xs q-ma-none"},{default:(0,a.k6)(()=>[l[2]||(l[2]=(0,a.Lk)("div",{class:"text-h6"},"Select an archived logs file to download - newest files at top",-1)),(0,a.Lk)("div",Js,"Archive directory: "+(0,n.v_)(i.value),1),(0,a.bF)(s,{style:{"max-height":"75vh"},class:"scroll no-margin q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{rows:r.value,columns:m,"row-key":"archive","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(u,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(d,{key:"archive",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.archive),1)]),_:2},1032,["props"]),(0,a.bF)(d,{key:"time",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.time),1)]),_:2},1032,["props"]),(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)(t,{class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"Download",onClick:l=>p(e.row.archive)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1,__:[2]})]),_:1})]),_:1},8,["modelValue"])}}},li=ei,ti=li;x()(ei,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QTable:Ze.A,QTr:el.A,QTd:ll.A}),x()(ei,"directives",{ClosePopup:al.A});const ai={class:"text-h6"},oi={class:"text-h6"},ni={class:"text-h6"},si="ModifiedGridConnectDialog",ii={__name:"ModifiedGridConnectDialog",props:{modelValue:{type:Boolean,required:!0},busMessage:{type:Object,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,s=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.wB)(s,()=>{console.log(si+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(l,t)=>{const o=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),c=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"350px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[c]])]),default:(0,a.k6)(()=>[t[1]||(t[1]=(0,a.Lk)("div",{class:"text-h6"}," Bus message ",-1))]),_:1,__:[1]}),(0,a.bF)(d,{class:"fit"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",ai,"direction: "+(0,n.v_)(e.busMessage.direction),1),(0,a.Lk)("div",oi," message: "+(0,n.v_)(e.busMessage.json.text),1),(0,a.Lk)("div",ni," encoded: "+(0,n.v_)(e.busMessage.json.encoded),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},di=ii,ri=di;x()(ii,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A}),x()(ii,"directives",{ClosePopup:al.A});const ui={class:"text-h6"},ci="NewNodeDialog",mi={__name:"NewNodeDialog",props:{modelValue:{type:Boolean,required:!0},previousNodeNumber:{type:Number,required:!0},moduleName:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),d=(0,o.KR)(""),r=(0,o.KR)(""),u=(0,o.KR)(0),c=e,m=l,b=(0,a.EW)({get(){return c.modelValue},set(e){m("update:modelValue",e)}});(0,a.wB)(b,()=>{console.log(ci+": WATCH model"),console.log(ci+": WATCH model: previousNodeNumber "+c.previousNodeNumber),u.value=v(),r.value=""}),(0,a.wB)(u,()=>{console.log(ci+": WATCH model: newNodeNumber "+u.value);try{u.value in i.state.layout.nodeDetails?(r.value=i.state.layout.nodeDetails[u.value].name,d.value=i.state.layout.nodeDetails[u.value].group):(r.value="",d.value="")}catch(e){console.log(ci+": WATCH newNodeNumber "+e)}});const v=()=>{var e=0,l=256;i.state.layout.layoutDetails.baseNodeNumber&&(l=i.state.layout.layoutDetails.baseNodeNumber);for(var t=Object.keys(i.state.nodes),a=l;a<65535;a++)if(!t.includes(a.toString())){console.log(ci+" first free node number: "+a),e=a;break}return e},p=e=>{var l=Object.keys(i.state.nodes);return l.includes(e)?(console.log(ci+" node number in use: "+e),!1):(console.log(ci+" free node number: "+e),!0)};(0,a.$u)(()=>{});const g=()=>{if(console.log(ci+" new node number: "+u.value),console.log(ci+" new node name: "+r.value),console.log(ci+" new group name: "+d.value),p(u.value))i.methods.set_node_number(u.value),i.setters.node_name(u.value,r.value),b.value=!1;else{t.notify({message:"node number is already assigned - still proceed?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.set_node_number(u.value),i.setters.node_name(u.value,r.value),i.setters.node_group(u.value,d.value),b.value=!1}},{label:"NO",color:"white",handler:()=>{}}]})}};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),m=(0,a.g2)("q-card-actions"),v=(0,a.g2)("q-card"),p=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(p,{modelValue:b.value,"onUpdate:modelValue":l[4]||(l[4]=e=>b.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{style:{"min-width":"350px"},class:"bg-amber-2"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[l[5]||(l[5]=(0,a.Lk)("div",{class:"text-h6"}," New node detected ",-1))]),_:1,__:[5]}),(0,a.bF)(i,{class:"q-pa-md",color:"orange-1"},{default:(0,a.k6)(()=>[l[8]||(l[8]=(0,a.Lk)("div",{class:"text-h6"},[(0,a.eW)(" Accept the first free node number below "),(0,a.Lk)("br"),(0,a.eW)(" or enter a new one ")],-1)),(0,a.bF)(s,{type:"number",style:{"max-width":"150px"},"input-style":{fontSize:"25px"},dense:"",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=e=>u.value=e),autofocus:""},null,8,["modelValue"]),(0,a.Lk)("div",ui,[(0,a.eW)(" This node was previously "+(0,n.v_)(c.previousNodeNumber),1),l[6]||(l[6]=(0,a.Lk)("br",null,null,-1)),(0,a.eW)(" The module type is CAN"+(0,n.v_)(c.moduleName),1),l[7]||(l[7]=(0,a.Lk)("br",null,null,-1))])]),_:1,__:[8]}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)(()=>[l[9]||(l[9]=(0,a.Lk)("div",{class:"text-h6"}," Enter a name for this node (optional) ",-1)),(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[9]}),(0,a.bF)(i,{class:"q-pa-md"},{default:(0,a.k6)(()=>[l[10]||(l[10]=(0,a.Lk)("div",{class:"text-h6"}," Enter a group for this node (optional) ",-1)),(0,a.bF)(s,{"input-style":{fontSize:"25px"},dense:"",modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),autofocus:""},null,8,["modelValue"])]),_:1,__:[10]}),(0,a.bF)(m,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(t,{flat:"",label:"Accept",onClick:l[3]||(l[3]=e=>g())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},bi=mi,vi=bi;x()(mi,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QInput:$.A,QCardActions:Me.A}),x()(mi,"directives",{ClosePopup:al.A});const pi={class:"q-pa-md row"},gi="AddLayoutDialog",fi={__name:"AddLayoutDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),n=(0,o.KR)(""),s=((0,o.KR)([]),e),i=l,r=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(r,()=>{console.log(gi+": WATCH model")});const u=(0,a.EW)(()=>Object.values(t.state.layouts_list));(0,a.wB)(u,()=>{}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const c=async()=>{console.log(gi+": Change layout"),t.methods.change_layout(n.value),t.methods.request_layout_list(),n.value="",await(0,d.yy)(50),r.value=!1};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-input"),i=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-card"),u=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(u,{modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=e=>r.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(d,{style:{"min-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])]),default:(0,a.k6)(()=>[l[3]||(l[3]=(0,a.Lk)("div",{class:"text-h6"}," Add Layout ",-1))]),_:1,__:[3]}),(0,a.Lk)("div",pi,[(0,a.bF)(d,{class:"q-pa-xs",style:{"max-width":"300px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{class:"q-pa-xs"},{default:(0,a.k6)(()=>[l[4]||(l[4]=(0,a.Lk)("div",{class:"text-h6"},"Add new layout",-1)),(0,a.bF)(s,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),label:"layout name",maxlength:"30"},null,8,["modelValue"]),l[5]||(l[5]=(0,a.Lk)("p",null,"enter a name for a new layout",-1)),(0,a.bF)(t,{color:"positive",label:"Add",onClick:l[1]||(l[1]=e=>c()),"no-caps":""})]),_:1,__:[4,5]})]),_:1})])]),_:1})]),_:1},8,["modelValue"])}}},_i=fi,yi=_i;x()(fi,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QInput:$.A}),x()(fi,"directives",{ClosePopup:al.A});const hi={class:"q-pa-xs row"},ki={class:"q-pa-xs row"},Ni={class:"q-pa-xs row"},xi={class:"q-pa-xs row"},wi={class:"q-pa-xs row"},qi="EditConnectionDetailsDialog",Fi={__name:"EditConnectionDetailsDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),n=(0,o.KR)(""),s=(0,o.KR)(""),i=(0,o.KR)(""),r=(0,o.KR)(5550),u=(0,o.KR)(!1),c=(0,o.KR)(["Auto","SerialPort","Network"]),m=e,b=l,v=(0,a.EW)({get(){return m.modelValue},set(e){b("update:modelValue",e)}});(0,a.wB)(v,()=>{console.log(qi+": WATCH model"),n.value=t.state.layout.connectionDetails.mode,s.value=t.state.layout.connectionDetails.serialPort,i.value=t.state.layout.connectionDetails.host,r.value=t.state.layout.connectionDetails.hostPort,void 0!=t.state.layout.connectionDetails.FCU_Compatibility?u.value=t.state.layout.connectionDetails.FCU_Compatibility:u.value=!1}),(0,a.wB)(n,()=>{"Auto"==n.value&&(s.value="",i.value="",r.value=""),"Network"==n.value&&(s.value="",""==t.state.layout.connectionDetails.hostPort&&(r.value="5550")),"SerialPort"==n.value&&(i.value="",r.value="")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const p=async()=>{console.log(qi+`: click_FCU_Compatibility ${u.value}`),t.state.layout.connectionDetails.FCU_Compatibility=u.value},g=async()=>{console.log(qi+": clickSave"),t.state.layout.connectionDetails.mode=n.value,"SerialPort"==n.value?t.state.layout.connectionDetails.serialPort=s.value:t.state.layout.connectionDetails.serialPort="","Network"==n.value?(t.state.layout.connectionDetails.host=i.value,t.state.layout.connectionDetails.hostPort=r.value):(t.state.layout.connectionDetails.host="",t.state.layout.connectionDetails.hostPort=""),t.methods.update_layout(),await(0,d.yy)(50),v.value=!1};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),d=(0,a.g2)("q-select"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-input"),f=(0,a.g2)("q-checkbox"),_=(0,a.g2)("q-card-actions"),y=(0,a.g2)("q-dialog"),h=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(y,{modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=e=>v.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(m,{style:{"min-width":"800px","min-height":"500px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[h]])]),default:(0,a.k6)(()=>[l[7]||(l[7]=(0,a.Lk)("div",{class:"text-h6"}," Edit connection details ",-1))]),_:1,__:[7]}),(0,a.Lk)("div",hi,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(d,{autofocus:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),options:c.value,label:"Mode"},null,8,["modelValue","options"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>l[8]||(l[8]=[(0,a.eW)(" Auto will connect to the first CANUSB or CANUSB4 it finds "),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" SerialPort will connect to the serial port entered below"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Network will use the address & port entered below "),(0,a.Lk)("br",null,null,-1)])),_:1,__:[8]})]),(0,a.Lk)("div",ki,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(b,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=e=>s.value=e),label:"serialPort",maxlength:"30"},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>l[9]||(l[9]=[(0,a.eW)(" Forces MMC to use this specific serial port"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Windows example: COM3"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Linux example: ttyUSB2"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave blank if 'SerialPort' not selected"),(0,a.Lk)("br",null,null,-1)])),_:1,__:[9]})]),(0,a.Lk)("div",Ni,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(b,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),label:"Host",maxlength:"30"},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>l[10]||(l[10]=[(0,a.eW)(" Name or IP address of machine to use for CAN connection"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave blank if 'Network' not selected ")])),_:1,__:[10]})]),(0,a.Lk)("div",xi,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(b,{autofocus:"",class:"q-pa-sm",outlined:"",modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=e=>r.value=e),label:"Host Port",maxlength:"30"},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>l[11]||(l[11]=[(0,a.eW)(" Port number of machine for CAN connection"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" 5550 is the default assigned port number"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" unused if 'Network' not selected ")])),_:1,__:[11]})]),(0,a.Lk)("div",wi,[(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"250px"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{"min-width":"100",modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value=e),label:"VLCB 'FCU Compatibility mode'",onClick:p,"left-label":""},null,8,["modelValue"])]),_:1}),(0,a.bF)(m,{flat:"",class:"q-pa-xs",style:{width:"500px"}},{default:(0,a.k6)(()=>l[12]||(l[12]=[(0,a.eW)(" In VLCB nodes, disables some enhancements for FCU compatibility"),(0,a.Lk)("br",null,null,-1),(0,a.eW)(" Leave unchecked unless FCU also being used at the same time as MMC ")])),_:1,__:[12]})]),(0,a.bF)(_,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(t,{color:"primary",label:"save",onClick:l[5]||(l[5]=e=>g()),"no-caps":""})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Vi=Fi,Ci=Vi;x()(Fi,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QSelect:re.A,QInput:$.A,QCheckbox:k.A,QCardActions:Me.A}),x()(Fi,"directives",{ClosePopup:al.A});const Ai={__name:"StartupInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Startup Dialog ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[2]||(l[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Startup dialog is intended to allow selection of layout and connection method ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text_body1"}," To allow operation with more than one model railway layout, data is stored against a named layout ",-1),(0,a.Lk)("div",{class:"text_body1"}," Layouts can be selected, added or deleted at this point, and each layout also retains it's own connection method ",-1),(0,a.Lk)("div",{class:"text_body1"}," A 'default' layout is created automatically, but it's recommended to add a named layout ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[4]||(l[4]=[(0,a.Lk)("div",{class:"text_body1"}," The default method of connecting is 'Auto', which will cause MMC to open a connection using the first CANUSB or CANUSB4 it finds, and no further configuration is needed if this is the required connection ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[5]||(l[5]=[(0,a.Lk)("div",{class:"text_body1"}," The 'SerialPort' option will force the connection onto a specific serial port, which may be required if there is more than one CANUSB, or another device than accepts a serial connection ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[6]||(l[6]=[(0,a.Lk)("div",{class:"text_body1"}," The Network option allows a TCP/IP connection to another service, like cbusServer or CANether ",-1),(0,a.Lk)("div",{class:"text_body1"}," The 'Host' parameter allows connection to either a remoted connection, or the same machine the MMC is running on - Computer names or IP addresses can be entered for the Host setting ",-1),(0,a.Lk)("div",{class:"text_body1"},[(0,a.eW)(" There is a useful Technical Bulletin on the CANether that explains network connections in more detail "),(0,a.Lk)("a",{href:"https://www.merg.org.uk/merg_wiki/lib/exe/fetch.php?media=cbus:cbus:cbusmodules:canether:canether_connection_and_configuration_technical_bulletin_draft_1.pdf"},"link")],-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[7]||(l[7]=[(0,a.Lk)("div",{class:"text_body1"}," The connection method can be configured using the EDIT button for the selected layout, and each layout will retain it's own connection details ",-1),(0,a.Lk)("div",{class:"text_body1"}," The selected layout is saved automatically when changes are made ",-1)])),_:1,__:[7]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[8]||(l[8]=[(0,a.Lk)("div",{class:"text_body1"}," When 'Auto' or 'SerialPort' modes are selected, an 'embedded' cbusServer is automatically started on port 5550, which can be used by other applications at the same time, such as FCU ",-1)])),_:1,__:[8]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[9]||(l[9]=[(0,a.Lk)("div",{class:"text_body1"}," In VLCB nodes, 'FCU compatibility mode' disables some enhancements for FCU compatibility. Leave off unless FCU also being used at the same time as MMC ",-1)])),_:1,__:[9]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[10]||(l[10]=[(0,a.Lk)("div",{class:"text_body1"}," With all connection options, 'modified Grid Connect' is the data format used to transfer messages to and from the modules ",-1),(0,a.Lk)("div",{class:"text_body1"}," Grid Connect is an established byte orientated data format used to encode the bit orientated CAN bus data format, such that it can be transmitted over stream connections, like serial or TCP/IP ",-1),(0,a.Lk)("div",{class:"text_body1"}," 'modified Grid Connect' is a variant of the Grid Connect format that has small modifications for use with CBUS devices ",-1)])),_:1,__:[10]})]),_:1})]),_:1},8,["modelValue"])}}},Ei=Ai,Ri=Ei;x()(Ai,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A}),x()(Ai,"directives",{ClosePopup:al.A});const Qi={class:"q-pa-md row"},Ii={class:"text-h6"},Li={class:"bg-light-blue-1 text-h6"},Si={class:"text-h6"},Wi="StartupDialog",Bi={__name:"StartupDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,s.A)(),i=(0,a.WQ)("store"),r=(0,o.KR)("<not selected>"),u=(0,o.KR)([]),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)([]),f=[{name:"layout",field:"layout",required:!0,label:"Layout",sortable:!0}],_=e,y=l,h=(0,a.EW)({get(){return _.modelValue},set(e){y("update:modelValue",e)}});(0,a.wB)(h,()=>{w()});const k=(0,a.EW)(()=>Object.values(i.state.layout));(0,a.wB)(k,()=>{x()});const N=(0,a.EW)(()=>Object.values(i.state.layouts_list));(0,a.wB)(N,()=>{w()});const x=()=>{try{r.value=i.state.layout.layoutDetails.title}catch{}try{void 0==i.state.layout.connectionDetails&&(i.state.layout.connectionDetails={},i.state.layout.connectionDetails["mode"]="Auto",i.state.layout.connectionDetails["serialPort"]="",i.state.layout.connectionDetails["host"]="",i.state.layout.connectionDetails["hostPort"]="",i.state.layout.connectionDetails["FCU_Compatibility"]=!1,i.methods.update_layout())}catch(e){}g.value=[],g.value.push("Mode: "+i.state.layout.connectionDetails.mode),"SerialPort"==i.state.layout.connectionDetails.mode&&g.value.push("serialPort: "+i.state.layout.connectionDetails.serialPort),"Network"==i.state.layout.connectionDetails.mode&&(g.value.push("Host: "+i.state.layout.connectionDetails.host),g.value.push("Host Port: "+i.state.layout.connectionDetails.hostPort)),1==i.state.layout.connectionDetails.FCU_Compatibility&&g.value.push("VLCB 'FCU compatibility mode': ON"),p.value=!0},w=()=>{u.value=[],N.value.forEach(e=>{u.value.push({layout:e})})};(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const q=async()=>{console.log(Wi+": clickAddNewLayout"),c.value=!0},F=async e=>{console.log(Wi+": clickDeleteLayout ",e);t.notify({message:"Are you sure you want to delete layout "+e,timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.delete_layout(e),await(0,d.yy)(50),i.methods.request_layout_list()}},{label:"NO",color:"white",handler:()=>{}}]})},V=async()=>{console.log(Wi+": clickEditConnectionDetails"),m.value=!0},C=async()=>{console.log(Wi+": clickInfo"),b.value=!0},A=()=>{console.log(Wi+": clickExit");t.notify({message:"Are you sure you want to close the application?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{i.methods.STOP_SERVER(),await(0,d.yy)(50)}},{label:"NO",color:"white",handler:()=>{}}]})},E=async()=>{console.log(Wi+": clickProceed"),i.state.layout!={}&&(i.methods.start_connection(i.state.layout.connectionDetails),await(0,d.yy)(500),i.state.inStartup=!1,h.value=!1)},R=async e=>{console.log(Wi+": clickLayouts on ",e),i.methods.change_layout(e),v.value=(0,o.KR)(!0)};return(e,l)=>{const t=(0,a.g2)("q-btn"),s=(0,a.g2)("q-space"),i=(0,a.g2)("q-banner"),d=(0,a.g2)("q-td"),p=(0,a.g2)("q-table"),_=(0,a.g2)("q-card-section"),y=(0,a.g2)("q-card"),k=(0,a.g2)("q-card-actions"),N=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(N,{modelValue:h.value,"onUpdate:modelValue":l[6]||(l[6]=e=>h.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(y,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bF)(t,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[0]||(l[0]=e=>C())}),(0,a.bF)(s),(0,a.bF)(t,{class:"q-mx-xs q-my-none",size:"sm",color:"negative",label:"Exit",onClick:l[1]||(l[1]=e=>A()),"no-caps":""})]),default:(0,a.k6)(()=>[l[10]||(l[10]=(0,a.Lk)("div",{class:"text-h6"}," Startup ",-1))]),_:1,__:[10]}),(0,a.Lk)("div",Qi,[(0,a.bF)(y,{inline:"",class:"q-pa-xs",flat:"",style:{width:"380px"}},{default:(0,a.k6)(()=>[l[12]||(l[12]=(0,a.Lk)("div",{class:"text-h6"},"Select Layout",-1)),(0,a.bF)(_,{style:{"max-height":"60vh"},class:"scroll q-ma-xs q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{class:"startup-table",dense:"",rows:u.value,columns:f,"row-key":"name","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-header":"","hide-bottom":""},{"body-cell":(0,a.k6)(e=>[(0,a.bF)(d,{key:"layout",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(t,{flat:"",color:"primary",label:e.value,onClick:l=>R(e.value)},null,8,["label","onClick"])]),_:2},1032,["props"]),(0,a.bF)(d,null,{default:(0,a.k6)(()=>[(0,a.bF)(t,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"negative",size:"xs",label:"Delete",onClick:l=>F(e.value),"no-caps":""},null,8,["onClick"])]),_:2},1024)]),_:1},8,["rows"])]),_:1}),(0,a.bF)(_,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",Ii,[l[11]||(l[11]=(0,a.eW)(" click to add a new layout   ")),(0,a.bF)(t,{color:"positive",label:"Add",onClick:l[2]||(l[2]=e=>q())})])]),_:1})]),_:1,__:[12]}),(0,a.bF)(y,{flat:"",inline:"",class:"q-pa-xs",style:{width:"380px"}},{default:(0,a.k6)(()=>[(0,a.bF)(_,{class:"q-pa-xs",style:{height:"450px"}},{default:(0,a.k6)(()=>[(0,a.bF)(_,null,{default:(0,a.k6)(()=>[l[13]||(l[13]=(0,a.Lk)("div",{class:"text-h6"}," Selected layout ",-1)),(0,a.Lk)("div",Li,(0,n.v_)(r.value),1)]),_:1,__:[13]}),(0,a.bF)(_,{style:{width:"350px",height:"300px"}},{default:(0,a.k6)(()=>[l[15]||(l[15]=(0,a.Lk)("div",{class:"text-h6"}," Connection details ",-1)),(0,a.bF)(y,{flat:"",style:{height:"100px"}},{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.value,(e,l)=>((0,a.uX)(),(0,a.CE)("div",{key:l},(0,n.v_)(g.value[l]),1))),128))]),_:1}),l[16]||(l[16]=(0,a.Lk)("div",{class:"text-body"},[(0,a.eW)(" The default 'Auto' setting will connect to the first CANUSB or CANUSB4 it finds"),(0,a.Lk)("br"),(0,a.eW)(" Please click INFO for details on the other options"),(0,a.Lk)("br")],-1)),l[17]||(l[17]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("div",Si,[(0,a.bF)(t,{color:"positive",label:"Edit",onClick:l[3]||(l[3]=e=>V())}),l[14]||(l[14]=(0,a.eW)("   Edit connection details "))])]),_:1,__:[15,16,17]})]),_:1}),(0,a.bF)(_,{class:"q-pa-xs"},{default:(0,a.k6)(()=>[(0,a.bF)(k,{align:"center"},{default:(0,a.k6)(()=>[v.value?((0,a.uX)(),(0,a.Wv)(t,{key:0,color:"primary",label:"Proceed",onClick:l[4]||(l[4]=e=>E())})):(0,a.Q3)("",!0),v.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(t,{key:1,disabled:"",color:"primary",label:"Proceed",onClick:l[5]||(l[5]=e=>E())}))]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1},8,["modelValue"]),(0,a.bF)((0,o.R1)(yi),{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=e=>c.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ci),{modelValue:m.value,"onUpdate:modelValue":l[8]||(l[8]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ri),{modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value=e)},null,8,["modelValue"])],64)}}},Ti=Bi,Di=Ti;x()(Bi,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QSpace:_e.A,QCardSection:h.A,QTable:Ze.A,QTd:ll.A,QCardActions:Me.A});const Ki=JSON.parse('{"name":"MMC-CLIENT","version":"0.11.0","description":"Module Management Console Client","productName":"MMC","author":"David Ellis","private":true,"scripts":{"lint":"eslint --ext .js,.vue ./","format":"prettier --write \\"**/*.{js,vue,scss,html,md,json}\\" --ignore-path .gitignore","test":"echo \\"See package.json => scripts for available tests.\\" && exit 0","test:unit:ui":"majestic","test:unit":"jest","test:unit:ci":"jest --ci","test:unit:coverage":"jest --coverage","test:unit:watch":"jest --watch","test:unit:watchAll":"jest --watchAll"},"dependencies":{"@quasar/extras":"^1.0.0","cbuslibrary":"^2.7.6","core-js":"^3.6.5","json-case-convertor":"^1.4.4","json-logic-js":"^2.0.5","quasar":"^2.0.0","sass":"^1.69.5","sheetjs":"^2.0.0","socket.io-client":"^4.4.1","stream":"^0.0.3","vue":"^3.0.0","vue-json-pretty":"^1.8.2","vue-router":"^4.0.0","xlsx":"^0.18.5","xml-js":"^1.6.11"},"devDependencies":{"@babel/eslint-parser":"^7.13.14","@quasar/app-webpack":"^3.13.2","@quasar/quasar-app-extension-testing-unit-jest":"^3.0.3","@vue/test-utils":"^2.4.6","eslint":"^7.14.0","eslint-config-prettier":"^8.1.0","eslint-plugin-jest":"^28.8.3","eslint-plugin-vue":"^7.0.0","eslint-webpack-plugin":"^2.4.0","jest":"^29.7.0","prettier":"^2.5.1"},"browserslist":["last 10 Chrome versions","last 10 Firefox versions","last 4 Edge versions","last 7 Safari versions","last 8 Android versions","last 8 ChromeAndroid versions","last 8 FirefoxAndroid versions","last 10 iOS versions","last 5 Opera versions"],"engines":{"node":">= 12.22.1","npm":">= 6.13.4","yarn":">= 1.21.1"}}');var Ui=t(8652);const Oi="SystemDialog",Mi={__name:"SystemDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=e,i=l,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,()=>{console.log(Oi+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const r=()=>{(0,Ui.A)(t.state.serverStatus.appStorageDirectory).then(()=>{}).catch(()=>{})},u=()=>{(0,Ui.A)(t.state.serverStatus.systemDirectory).then(()=>{}).catch(()=>{})},c=()=>{(0,Ui.A)(t.state.serverStatus.currentUserDirectory).then(()=>{}).catch(()=>{})};return(e,l)=>{const s=(0,a.g2)("q-btn"),i=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card"),b=(0,a.g2)("q-input"),v=(0,a.g2)("q-checkbox"),p=(0,a.g2)("q-card-actions"),g=(0,a.g2)("q-dialog"),f=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(g,{modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(m,{style:{"min-width":"900px"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(s,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[f]])]),default:(0,a.k6)(()=>[l[7]||(l[7]=(0,a.Lk)("div",{class:"text-h6"}," System ",-1))]),_:1,__:[7]}),(0,a.bF)(m,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)(()=>[l[8]||(l[8]=(0,a.Lk)("div",{class:"text-h6"},"Backend",-1)),(0,a.Lk)("div",null,"Backend App version "+(0,n.v_)(JSON.stringify((0,o.R1)(t).state.version.App)),1),(0,a.Lk)("div",null,"API version "+(0,n.v_)(JSON.stringify((0,o.R1)(t).state.version.API)),1),(0,a.Lk)("div",null,"node version "+(0,n.v_)(JSON.stringify((0,o.R1)(t).state.version.node)),1)]),_:1,__:[8]}),(0,a.bF)(m,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)(()=>[l[9]||(l[9]=(0,a.Lk)("div",{class:"text-h6"},"Frontend",-1)),(0,a.Lk)("div",null,"Frontend App version "+(0,n.v_)((0,o.R1)(Ki).version),1),(0,a.Lk)("div",null,"Quasar framework "+(0,n.v_)(e.$q.version),1),(0,a.Lk)("div",null,"Vue version "+(0,n.v_)(a.rE))]),_:1,__:[9]}),(0,a.bF)(m,{class:"q-pa-md",flat:"",bordered:""},{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[l[10]||(l[10]=(0,a.Lk)("span",{class:"text-h6"},"app storage directory  ",-1)),(0,a.eW)(" "+(0,n.v_)((0,o.R1)(t).state.serverStatus.appStorageDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:l[0]||(l[0]=e=>r()),"no-caps":""})]),(0,a.Lk)("div",null,[l[11]||(l[11]=(0,a.Lk)("span",{class:"text-h6"},"current user directory  ",-1)),(0,a.eW)(" "+(0,n.v_)((0,o.R1)(t).state.serverStatus.currentUserDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:l[1]||(l[1]=e=>c()),"no-caps":""})]),(0,a.Lk)("div",null,[l[12]||(l[12]=(0,a.Lk)("span",{class:"text-h6"},"system directory  ",-1)),(0,a.eW)(" "+(0,n.v_)((0,o.R1)(t).state.serverStatus.systemDirectory)+"   ",1),(0,a.bF)(s,{dense:"",color:"primary",size:"xs",label:"copy",onClick:l[2]||(l[2]=e=>u()),"no-caps":""})])]),_:1}),(0,a.bo)((0,a.bF)(m,{class:"q-pa-md",flat:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{label:"Base Node Number",outlined:"",modelValue:(0,o.R1)(t).state.layout.layoutDetails.baseNodeNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>(0,o.R1)(t).state.layout.layoutDetails.baseNodeNumber=e),onChange:l[4]||(l[4]=e=>(0,o.R1)(t).methods.update_layout())},null,8,["modelValue"])]),_:1},512),[[je.aG,(0,o.R1)(t).state.advanced]]),(0,a.bF)(m,{class:"q-pa-md",flat:""},{default:(0,a.k6)(()=>[(0,a.bF)(v,{modelValue:(0,o.R1)(t).state.develop,"onUpdate:modelValue":l[5]||(l[5]=e=>(0,o.R1)(t).state.develop=e),label:"Develop"},null,8,["modelValue"]),l[13]||(l[13]=(0,a.eW)("    Enables development features "))]),_:1,__:[13]}),(0,a.bF)(p,{align:"right",class:"text-primary"})]),_:1})]),_:1},8,["modelValue"])}}},Xi=Mi,Pi=Xi;x()(Mi,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QInput:$.A,QCheckbox:k.A,QCardActions:Me.A}),x()(Mi,"directives",{ClosePopup:al.A});const zi={key:0,class:"text-red"},ji="DialogExampleCompositionAPI",$i={__name:"DialogExampleCompositionAPI",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=(0,o.KR)(!1),n=e,s=l,i=(0,a.EW)({get(){return n.modelValue},set(e){s("update:modelValue",e)}});(0,a.wB)(i,()=>{console.log(ji+": WATCH model")}),(0,a.KC)(()=>{}),(0,a.sV)(()=>{});const d=()=>{t.value=!t.value};return(e,l)=>{const o=(0,a.g2)("q-btn"),n=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),r=(0,a.g2)("q-card"),u=(0,a.g2)("q-card-actions"),c=(0,a.g2)("q-dialog"),m=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e)},{default:(0,a.k6)(()=>[(0,a.bF)(r,{style:{"min-width":"800px"},class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(n,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(o,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[m]])]),default:(0,a.k6)(()=>[l[2]||(l[2]=(0,a.Lk)("div",{class:"text-h6"}," Example banner ",-1))]),_:1,__:[2]})]),_:1}),(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"max-height":"50vh"},class:"scroll q-py-none no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(r,null,{default:(0,a.k6)(()=>[(0,a.bF)(o,{flat:"",color:"positive",label:"example button"}),(0,a.bF)(o,{flat:"",color:"negative",label:"example button"})]),_:1}),((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore.")),64)),t.value?((0,a.uX)(),(0,a.CE)("div",zi,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(5,e=>(0,a.Lk)("p",{key:e},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore.")),64))])):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)(s,{class:"q-py-none no-margin"},{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text-h6"}," Example q-card ",-1)])),_:1,__:[3]})]),_:1}),(0,a.bF)(u,{align:"right",class:"text-primary q-py-none no-margin"},{default:(0,a.k6)(()=>[(0,a.bF)(o,{flat:"",label:"toggle show more",onClick:l[0]||(l[0]=e=>d())})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Gi=$i,Hi=Gi;x()($i,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A,QCardActions:Me.A}),x()($i,"directives",{ClosePopup:al.A});const Yi={__name:"EventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Events View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[2]||(l[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Events view is intended to allow management of all the events on the layout ",-1),(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Bus Events View' ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text_body1"}," The Events view shows events that have been read from nodes, captured from the CAN Bus, or entered manually ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[4]||(l[4]=[(0,a.Lk)("div",{class:"text_body1"}," This list of events is retained for the layout selected, so the known events for a particular layout will be restored at startup ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[5]||(l[5]=[(0,a.Lk)("div",{class:"text_body1"}," For a new layout, use SCAN NODES to read the stored events from all the nodes to fill the list, and anytime a new node is added ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[6]||(l[6]=[(0,a.Lk)("div",{class:"text_body1"}," There is only one entry for each event, irrespective of how many nodes produce that event ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[7]||(l[7]=[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, irrespective of which node sent it ",-1),(0,a.Lk)("div",{class:"text_body1"},[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status is dependant on the event actually being captured from the bus, and if that event has not been sent, or the application has been restarted, the status will be 'unknown' ")],-1)])),_:1,__:[7]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[8]||(l[8]=[(0,a.Lk)("div",{class:"text_body1"}," In this view, for short events, the 'send ON/OFF' feature will use '0' as the Sending Node Number, so not linked to any particular node ",-1)])),_:1,__:[8]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[9]||(l[9]=[(0,a.Lk)("div",{class:"text_body1"}," An event can be created manually (add event) and will not be associated with any particular node until the 'teach' option is used ",-1)])),_:1,__:[9]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[10]||(l[10]=[(0,a.Lk)("div",{class:"text_body1"}," The toggle option allows viewing of just short events, or all events ",-1)])),_:1,__:[10]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[11]||(l[11]=[(0,a.Lk)("div",{class:"text_body1"}," The list is likely to be very large, as some nodes have large numbers of default events ",-1),(0,a.Lk)("div",{class:"text_body1"}," So it's recommended to use the search option to filter the list, and using group names for events ",-1)])),_:1,__:[11]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[12]||(l[12]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[12]})]),_:1})]),_:1},8,["modelValue"])}}},Ji=Yi,Zi=Ji;x()(Yi,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A}),x()(Yi,"directives",{ClosePopup:al.A});const ed="GenericNodeList",ld={__name:"GenericNodeList",props:{nodeNumberList:{type:Object,required:!0},eventIdentifier:{type:String,required:!0}},setup(e){const l=(0,s.A)(),t=(0,a.WQ)("store"),i=(0,o.KR)(!1),u=(0,o.KR)(0),c=(0,o.KR)(!1),m=(0,o.KR)(""),b=(0,o.KR)(""),v=e,p=(0,o.KR)([]),g=[{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Node Number",align:"left",sortable:!0},{name:"name",field:"name",required:!0,label:"Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Node Group",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!0}],f=async()=>{p.value=[],v.nodeNumberList.forEach(e=>{var l=t.getters.node_name(e);p.value.push({nodeNumber:e,name:l,group:t.getters.node_group(e)})})},_=async e=>{if((0,r.g)(t,e));else{b.value="",m.value="Loading Node Parameters",c.value=!0,t.methods.request_all_node_parameters(e,20,100);let l=Date.now();while(Date.now()-l<6e4){if(b.value.length>0)break;await(0,d.yy)(100)}c.value=!1}},y=async e=>{var l=t.state.nodes[e].parameters[6];if(void 0!=t.state.nodes[e].nodeVariables[l]);else{b.value="",m.value="Loading Node Variables",t.methods.request_all_node_variables(e),c.value=!0;for(let e=0;e<1e4;e++){if(b.value.length>0)break;await(0,d.yy)(10)}c.value=!1}},h=async()=>{m.value="Loading Event Indexes",(0,d.Qn)(ed+`: ${m.value}`),b.value="",c.value=!0,t.methods.request_all_node_events(v.nodeNumber);let e=Date.now();while(Date.now()-e<6e4){if(b.value.length>0)break;await(0,d.yy)(10)}c.value=!1};(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{f()});const k=e=>{(0,d.Qn)(ed+": clickDelete");l.notify({message:"Are you sure you want to delete event "+t.getters.event_name(v.eventIdentifier)+" from node "+t.getters.node_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{(0,d.Qn)("removeEvent "+e+" "+v.eventIdentifier),t.methods.remove_event(e,v.eventIdentifier)}},{label:"NO",color:"white",handler:()=>{}}]})},N=async e=>{(0,d.Qn)(ed+": clickVariables: node "+e+" eventIdentifer "+v.eventIdentifier),u.value=e,await _(e),await y(e),0==t.state.nodes[e].VLCB&&await h(),await t.methods.request_event_variables_by_identifier(e,v.eventIdentifier),i.value=!0};return(l,t)=>{const s=(0,a.g2)("q-td"),d=(0,a.g2)("q-btn"),r=(0,a.g2)("q-tr"),v=(0,a.g2)("q-table"),f=(0,a.g2)("q-card-section"),_=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(_,{style:{"max-height":"70vh"},class:"scroll q-ma-md"},{default:(0,a.k6)(()=>[(0,a.bF)(f,{class:"no-margin q-py-none-xs",style:{width:"750px"}},{default:(0,a.k6)(()=>[(0,a.bF)(v,{flat:"",bordered:"",dense:"",rows:p.value,columns:g,"row-key":"nodeNumber","hide-bottom":"","virtual-scroll":"","rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0},{body:(0,a.k6)(e=>[(0,a.bF)(r,{props:e,class:"q-my-none q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{key:"nodeNumber",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)]),_:2},1032,["props"]),(0,a.bF)(s,{key:"name",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.name),1)]),_:2},1032,["props"]),(0,a.bF)(s,{key:"group",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.group),1)]),_:2},1032,["props"]),(0,a.bF)(s,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",color:"primary",size:"md",label:"Variables",onClick:l=>N(e.row.nodeNumber),"no-caps":""},null,8,["onClick"]),(0,a.bF)(d,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>k(e.row.nodeNumber),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1}),(0,a.bF)((0,o.R1)(Ol),{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),nodeNumber:u.value,eventIdentifier:e.eventIdentifier},null,8,["modelValue","nodeNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(ml),{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),callingModule:"Node List",message:m.value,onWaitingOnBusTrafficDialogEvent:t[2]||(t[2]=e=>b.value=e)},null,8,["modelValue","message"])],64)}}},td=ld,ad=td;x()(ld,"components",{QCard:A.A,QCardSection:h.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QBtn:fe.A});const od={class:"text-h6"},nd="LinkedNodesDialog",sd={__name:"LinkedNodesDialog",props:{modelValue:{type:Boolean,required:!0},eventIdentifier:{type:String,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),s=e,i=l,d=(0,a.EW)({get(){return s.modelValue},set(e){i("update:modelValue",e)}});(0,a.wB)(d,()=>{});const r=(0,o.KR)([]),u=(0,a.EW)(()=>t.state.nodes.updateTimestamp);(0,a.wB)(u,()=>{s.eventIdentifier&&c()});const c=async()=>{try{r.value=[];let e=Object.values(t.state.nodes);e.forEach(e=>{if(e.storedEventsNI&&Object.values(e.storedEventsNI).length>0){let l=Object.values(e.storedEventsNI);l.forEach(async l=>{l.eventIdentifier==s.eventIdentifier&&r.value.push(parseInt(e.nodeNumber))})}})}catch(e){console.log(nd+": update__nodes_table "+e)}};return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(0,a.$u)(()=>{s.eventIdentifier&&c()}),(l,i)=>{const u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-banner"),m=(0,a.g2)("q-card-section"),b=(0,a.g2)("q-card"),v=(0,a.g2)("q-dialog"),p=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(v,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=e=>d.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(b,{class:"q-pa-none q-ma-none",style:{"min-width":"850px"}},{default:(0,a.k6)(()=>[(0,a.bF)(m,{class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(c,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin g-py-none"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(u,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[p]])]),default:(0,a.k6)(()=>[(0,a.Lk)("div",od," Nodes linked to event: "+(0,n.v_)((0,o.R1)(t).getters.event_name(s.eventIdentifier)),1)]),_:1})]),_:1}),(0,a.bF)(b,null,{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(ad),{nodeNumberList:r.value,eventIdentifier:e.eventIdentifier},null,8,["nodeNumberList","eventIdentifier"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},id=sd,dd=id;x()(sd,"components",{QDialog:Ye.A,QCard:A.A,QCardSection:h.A,QBanner:Je.A,QBtn:fe.A}),x()(sd,"directives",{ClosePopup:al.A});const rd={class:"text-h6",style:{"min-width":"250px"}},ud="EventsView",cd={__name:"EventsView",setup(e){const l=(0,s.A)(),t=(0,a.WQ)("store"),i=(0,o.KR)(""),d={rowsPerPage:0};let r=(0,o.KR)([]);const u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(""),f=(0,o.KR)(),_=(0,o.KR)(0),y=(0,o.KR)(0),h=((0,o.KR)(!1),[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"group",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Event Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"linkedNodes",field:"linkedNodes",required:!0,label:"Linked Nodes",align:"left",sortable:!1},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}]),k=(0,a.EW)(()=>t.state.layout.updateTimestamp);(0,a.wB)(k,()=>{w()});const N=(0,a.EW)(()=>t.state.nodes.updateTimestamp);(0,a.wB)(N,()=>{w()});const x=(0,a.EW)(()=>Object.values(t.state.busEvents));(0,a.wB)(x,()=>{w()});const w=()=>{let e=[],l=t.state.layout.eventDetails;for(let o of Object.keys(l).sort()){var a=parseInt(o.substring(0,4),16);if(void 0==t.state.event_view_status[o]&&(t.state.event_view_status[o]="unknown"),"short"==t.state.events_view_mode&&a>0||"long"==t.state.events_view_mode&&0==a||"named"==t.state.events_view_mode&&""==l[o].name);else{let n={};n["eventIdentifier"]=o,n["nodeNumber"]=a,n["eventNumber"]=parseInt(o.slice(4,8),16),n["type"]=0==a?"short":"long",n["name"]=t.getters.event_name(o),n["colour"]=l[o].colour,n["group"]=l[o].group,n["status"]=t.state.event_view_status[o],n["linkedNodeCount"]=F(o),e.push(n)}}r.value=e},q=e=>e in t.state.layout.eventDetails?t.state.layout.eventDetails[e].colour:"blue",F=e=>{var l=0;let a=Object.keys(t.state.nodes);try{a.forEach(a=>{e in t.state.nodes[a].storedEventsNI&&l++})}catch{}return l};t.eventBus.on("BUS_TRAFFIC_EVENT",e=>{console.log(ud+": BUS_TRAFFIC_EVENT : opcode "+e.json.opCode);var l=e.json.eventIdentifier,a=e.json.opCode,o="unknown";"90"!=a&&"98"!=a&&"B0"!=a&&"B8"!=a&&"D0"!=a&&"D8"!=a&&"F0"!=a&&"F8"!=a||(console.log(ud+": BUS_TRAFFIC_EVENT : ON event "+l),o="on"),"91"!=a&&"99"!=a&&"B1"!=a&&"B9"!=a&&"D1"!=a&&"D9"!=a&&"F1"!=a&&"F9"!=a||(console.log(ud+": BUS_TRAFFIC_EVENT : OFF event "+l),o="off"),"unknown"!=o&&(void 0!=t.state.event_view_status[l]&&(t.state.event_view_status[l]=o),w())}),(0,a.KC)(()=>{w()});const V=()=>{console.log(ud+": clickAddEvent"),u.value=!0},C=e=>{console.log(ud+": clickDelete");l.notify({message:"Are you sure you want to delete event "+t.getters.event_name(e),timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{delete t.state.layout.eventDetails[e],t.state.update_layout_needed=!0,w()}},{label:"NO",color:"white",handler:()=>{}}]})},A=e=>{console.log(ud+": clickDeleteUnused");l.notify({message:"Continue with delete?",caption:"To be deleted, events must have no linked nodes and also no user provided name",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{let e=t.state.layout.eventDetails,l=0;for(let a of Object.keys(e).sort()){parseInt(a.substring(0,4),16);0==t.state.layout.eventDetails[a].name.length&&0==F(a)&&(console.log(ud+`: ${a} ${t.getters.event_name(a)}`),l++,delete t.state.layout.eventDetails[a],t.state.update_layout_needed=!0)}console.log(ud+`: events deleted ${l}`),w()}},{label:"NO",color:"white",handler:()=>{}}]})},E=e=>{console.log(ud+": clickEventName "+e),g.value=e,f.value=t.getters.event_name(e),c.value=!0},R=()=>{console.log(ud+": clickInfo"),v.value=!0},Q=e=>{console.log(ud+": clickLinkedNodes "+e),g.value=e,p.value=!0},I=()=>{console.log(ud+": clickScanNodes");var e=Object.keys(t.state.nodes);e.forEach(e=>{t.methods.request_all_node_events(e)})},L=(e,l)=>{console.log(ud+": send OFF "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_off_event(e,o):t.methods.long_off_event(a,o)},S=(e,l)=>{console.log(ud+": send ON "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_on_event(e,o):t.methods.long_on_event(a,o)},W=e=>{console.log(ud+": clickTeach "+e),g.value=e,b.value=!0},B=()=>{switch(console.log(ud+": clickToggleViewMode"),t.state.events_view_mode){case"all":t.state.events_view_mode="short";break;case"short":t.state.events_view_mode="long";break;case"long":t.state.events_view_mode="named";break;case"named":t.state.events_view_mode="all";break;default:t.state.events_view_mode="all"}w()};return(e,l)=>{const s=(0,a.g2)("q-btn"),f=(0,a.g2)("q-space"),k=(0,a.g2)("q-icon"),N=(0,a.g2)("q-input"),x=(0,a.g2)("q-banner"),w=(0,a.g2)("q-td"),F=(0,a.g2)("q-chip"),T=(0,a.g2)("q-tr"),D=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.bF)(x,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:l[0]||(l[0]=e=>B())}),(0,a.Lk)("div",rd,"view "+(0,n.v_)((0,o.R1)(t).state.events_view_mode)+" events",1),l[13]||(l[13]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[1]||(l[1]=e=>R())}),(0,a.bF)(f),l[14]||(l[14]=(0,a.eW)("      ")),(0,a.bF)(N,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(k,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),l[15]||(l[15]=(0,a.eW)("      ")),(0,a.bF)(f),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Delete Unused",onClick:l[3]||(l[3]=e=>A())}),(0,a.bF)(f),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"SCAN NODES","no-caps":"",onClick:l[4]||(l[4]=e=>I())}),(0,a.bF)(s,{class:"q-mx-xs q-my-none",color:"blue",size:"sm",label:"Add Event",onClick:l[5]||(l[5]=e=>V())})]),default:(0,a.k6)(()=>[l[16]||(l[16]=(0,a.Lk)("div",{class:"text-h6"},"Events View",-1))]),_:1,__:[16]}),(0,a.Lk)("div",null,[(0,a.bF)(D,{class:"eventsView-table",bordered:"",dense:"",rows:(0,o.R1)(r),columns:h,filter:i.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:d,"onUpdate:pagnation":l[6]||(l[6]=e=>d=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(T,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(w,{key:"eventName",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.name),1)]),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"group",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.group),1)]),_:2},1032,["props"]),(0,a.bF)(w,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"type",props:e,class:(0,n.C4)("text-"+q(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.type),1)]),_:2},1032,["props","class"]),(0,a.bF)(w,{key:"status",props:e},{default:(0,a.k6)(()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(F,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)(()=>l[17]||(l[17]=[(0,a.eW)("ON")])),_:1,__:[17]})):"off"==e.row.status?((0,a.uX)(),(0,a.Wv)(F,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)(()=>l[18]||(l[18]=[(0,a.eW)("OFF")])),_:1,__:[18]})):((0,a.uX)(),(0,a.Wv)(F,{key:2,color:"white","text-color":"blue"},{default:(0,a.k6)(()=>l[19]||(l[19]=[(0,a.eW)("unknown")])),_:1,__:[19]}))]),_:2},1032,["props"]),(0,a.bF)(w,{key:"linkedNodes",props:e},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.linkedNodeCount)+" ",1),(0,a.bF)(s,{dense:"",class:"q-mx-xs q-my-none",outline:"",color:"primary",size:"sm",label:"view",onClick:l=>Q(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"])]),_:2},1032,["props"]),(0,a.bF)(w,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>E(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>W(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>S(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>l[20]||(l[20]=[(0,a.eW)("send ON")])),_:2,__:[20]},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>L(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>l[21]||(l[21]=[(0,a.eW)("send OFF")])),_:2,__:[21]},1032,["onClick"]),(0,a.bF)(s,{disabled:0!=e.row.linkedNodeCount,dense:"",class:"q-mx-xs",outline:"",size:"md",color:"negative",label:"Delete",onClick:l=>C(e.row.eventIdentifier),"no-caps":""},null,8,["disabled","onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"])])]),(0,a.bF)((0,o.R1)(Hl),{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=e=>u.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(vt),{modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=e=>c.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(ht),{modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(dd),{modelValue:p.value,"onUpdate:modelValue":l[10]||(l[10]=e=>p.value=e),eventIdentifier:g.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(rt),{modelValue:m.value,"onUpdate:modelValue":l[11]||(l[11]=e=>m.value=e),sendingNodeNumber:_.value,eventNumber:y.value,eventIdentifier:g.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(Zi),{modelValue:v.value,"onUpdate:modelValue":l[12]||(l[12]=e=>v.value=e)},null,8,["modelValue"])],64)}}},md=(0,U.A)(cd,[["__scopeId","data-v-1dc12f57"]]),bd=md;x()(cd,"components",{QBanner:Je.A,QBtn:fe.A,QSpace:_e.A,QInput:$.A,QIcon:Et.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QChip:Al.A,QCardActions:Me.A,QCardSection:h.A,QField:G.A});const vd={__name:"BusEventsViewInfoDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){(0,a.WQ)("store");const t=e,o=l,n=(0,a.EW)({get(){return t.modelValue},set(e){o("update:modelValue",e)}});return(0,a.KC)(()=>{}),(0,a.sV)(()=>{}),(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card"),i=(0,a.g2)("q-dialog"),d=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(i,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(s,{style:{"min-width":"800px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[d]])]),default:(0,a.k6)(()=>[l[1]||(l[1]=(0,a.Lk)("div",{class:"text-h6"}," Information about the Bus Events View ",-1))]),_:1,__:[1]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[2]||(l[2]=[(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," The Bus Events view is intended to show the event activity on the CAN Bus from the start of the application ",-1),(0,a.Lk)("div",{class:"text_body1 text-weight-bold"}," There are some significant differences to how this view works compared to the 'Events View' ",-1)])),_:1,__:[2]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[3]||(l[3]=[(0,a.Lk)("div",{class:"text_body1"}," Events read from node will not appear in this view until they have been sent by a node & captured from the CAN Bus ",-1)])),_:1,__:[3]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[4]||(l[4]=[(0,a.Lk)("div",{class:"text_body1"}," For some nodes, default events can't be read from the node (as some do not treat them as 'stored events') ",-1),(0,a.Lk)("div",{class:"text_body1"}," But these default events will appear in this view once they've been sent ",-1)])),_:1,__:[4]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[5]||(l[5]=[(0,a.Lk)("div",{class:"text_body1"}," This view takes account of the source node, so if the same event has been sent by two different nodes, there will be two entries for that event ",-1),(0,a.Lk)("div",{class:"text_body1"}," This is intended to make it easy to see which nodes are sending which events ",-1)])),_:1,__:[5]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[6]||(l[6]=[(0,a.Lk)("div",{class:"text_body1"}," In this view, the 'send ON/OFF' feature will use the Source Node Number of the row selected, thus replicating the event from that specific node ",-1)])),_:1,__:[6]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[7]||(l[7]=[(0,a.Lk)("div",{class:"text_body1"}," The ON/OFF status for each event will be the most recent instance of that event, captured from the CAN Bus, from that particular sending node ",-1)])),_:1,__:[7]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[8]||(l[8]=[(0,a.Lk)("div",{class:"text_body1"}," The Bus Events view will be empty at startup, and can also be cleared, to only show events from that point onwards ",-1)])),_:1,__:[8]}),(0,a.bF)(s,{class:"q-pa-sm"},{default:(0,a.k6)(()=>l[9]||(l[9]=[(0,a.Lk)("div",{class:"text_body1"}," The SEARCH option will filter on all of the text columns (such as Name & Group), and is not case sensitive, e.g. will find both 'switch' and 'Switch' ",-1),(0,a.Lk)("div",{class:"text_body1"}," It also matches partial text, so searching for 'switch' will find both 'switch-01' and 'switch-02' ",-1)])),_:1,__:[9]})]),_:1})]),_:1},8,["modelValue"])}}},pd=vd,gd=pd;x()(vd,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A}),x()(vd,"directives",{ClosePopup:al.A});const fd={class:"text-h6",style:{"min-width":"250px"}},_d={class:"q-pa-xs row"},yd={class:"text-body2"},hd="BusEventsView",kd={__name:"BusEventsView",setup(e){const l=(0,s.A)(),t=(0,a.WQ)("store"),i=((0,o.KR)("nodes"),(0,o.KR)("")),d={rowsPerPage:0};let r=(0,o.KR)();const u=(0,o.KR)(!1),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(""),p=(0,o.KR)(),g=(0,o.KR)(0),f=(0,o.KR)(0),_=(0,o.KR)(!1),y=[{name:"eventName",field:"name",required:!0,label:"Event Name",align:"left",sortable:!0},{name:"group",field:"name",required:!0,label:"Group",align:"left",sortable:!0},{name:"eventIdentifier",field:"eventIdentifier",required:!0,label:"Event Identifier",align:"left",sortable:!0},{name:"nodeNumber",field:"nodeNumber",required:!0,label:"Source Node Number",align:"left",sortable:!0},{name:"eventNumber",field:"eventNumber",required:!0,label:"Event Number",align:"left",sortable:!0},{name:"type",field:"type",required:!0,label:"Type",align:"left",sortable:!0},{name:"status",field:"status",required:!0,label:"Status",align:"left",sortable:!0},{name:"count",field:"count",required:!0,label:"Count",align:"left",sortable:!0},{name:"actions",field:"actions",required:!0,label:"Actions",align:"left",sortable:!1}],h=(0,a.EW)(()=>Object.values(t.state.busEvents)),k=(0,a.EW)(()=>t.state.layout);(0,a.wB)(h,()=>{N()}),(0,a.wB)(k,()=>{N()});const N=()=>{let e=[];try{let o=t.state.busEvents;if(o)for(let n of Object.keys(o).sort(function(e,l){return o[e].eventIdentifier<o[l].eventIdentifier?-1:1})){var l=o[n].eventIdentifier,a=parseInt(o[n].eventIdentifier.slice(0,4),16);if("short"==t.state.events_view_mode&&a>0||"long"==t.state.events_view_mode&&0==a||"named"==t.state.events_view_mode&&""==t.state.layout.eventDetails[l].name.length);else{let a={};a["eventIdentifier"]=l,a["nodeNumber"]=o[n].nodeNumber,a["eventNumber"]=o[n].eventNumber,a["status"]=o[n].status,a["type"]=o[n].type,a["count"]=o[n].count,a["name"]=t.getters.event_name(l),a["colour"]=t.getters.event_colour(l),a["group"]=t.getters.event_group(l),e.push(a)}}}catch(e){console.log(hd+": update_bus_events "+e)}r.value=e},x=e=>t.getters.event_colour(e);(0,a.KC)(()=>{t.methods.refresh_bus_events(),N()}),(0,a.sV)(()=>{t.methods.refresh_bus_events(),N()});const w=()=>{console.log(hd+": clickClearAllBusEvents");l.notify({message:"Are you sure you want to clear all bus events?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{t.methods.clear_bus_events()}},{label:"NO",color:"white",handler:()=>{}}]})},q=e=>{console.log(hd+": clickEventName "+e),v.value=e,p.value=t.getters.event_name(e),u.value=!0},F=()=>{console.log(hd+": clickInfo"),b.value=!0},V=(e,l)=>{console.log(hd+": send OFF "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_off_event(e,o):t.methods.long_off_event(a,o)},C=(e,l)=>{console.log(hd+": send ON "+e+" "+l);var a=parseInt(l.slice(0,4),16),o=parseInt(l.slice(4,8),16);0==a?t.methods.short_on_event(e,o):t.methods.long_on_event(a,o)},A=e=>{console.log(hd+": clickTeach"),v.value=e,m.value=!0},E=()=>{console.log(hd+": clickToggleShowBusEventsJSON"),_.value?_.value=!1:_.value=!0},R=()=>{switch(console.log(hd+": clickToggleViewMode"),t.state.events_view_mode){case"all":t.state.events_view_mode="short";break;case"short":t.state.events_view_mode="long";break;case"long":t.state.events_view_mode="named";break;case"named":t.state.events_view_mode="all";break;default:t.state.events_view_mode="all"}N()};return(e,l)=>{const s=(0,a.g2)("q-btn"),p=(0,a.g2)("q-icon"),h=(0,a.g2)("q-input"),k=(0,a.g2)("q-banner"),N=(0,a.g2)("q-td"),Q=(0,a.g2)("q-chip"),I=(0,a.g2)("q-tr"),L=(0,a.g2)("q-table"),S=(0,a.g2)("q-card-section"),W=(0,a.g2)("q-card"),B=(0,a.g2)("q-card-actions");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("div",null,[(0,a.bF)(k,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-margin q-py-none"},{action:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"Toggle","no-caps":"",onClick:l[0]||(l[0]=e=>R())}),(0,a.Lk)("div",fd,"view "+(0,n.v_)((0,o.R1)(t).state.events_view_mode)+" events",1),l[10]||(l[10]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"info",label:"INFO","no-caps":"",onClick:l[1]||(l[1]=e=>F())}),l[11]||(l[11]=(0,a.eW)("      ")),(0,a.bF)(h,{class:"input-box","bg-color":"grey-3",style:{width:"200px"},filled:"",dense:"",borderless:"",debounce:"300",modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=e=>i.value=e),placeholder:"Search"},{default:(0,a.k6)(()=>[(0,a.bF)(p,{size:"sm",name:"search"})]),_:1},8,["modelValue"]),l[12]||(l[12]=(0,a.eW)("      ")),(0,a.bF)(s,{class:"q-mx-xs q-my-none",size:"sm",color:"blue",label:"CLEAR BUS EVENTS",onClick:l[3]||(l[3]=e=>w()),"no-caps":""})]),default:(0,a.k6)(()=>[l[13]||(l[13]=(0,a.Lk)("div",{class:"text-h6"}," Bus Events ",-1))]),_:1,__:[13]}),(0,a.bF)(W,null,{default:(0,a.k6)(()=>[(0,a.bF)(S,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{class:"bus-events-table",dense:"",rows:(0,o.R1)(r),columns:y,filter:i.value,"row-key":"eventIdentifier","virtual-scroll":"",pagnation:d,"onUpdate:pagnation":l[4]||(l[4]=e=>d=e),"rows-per-page-options":[0],"virtual-scroll-sticky-size-start":0,"hide-bottom":""},{body:(0,a.k6)(e=>[(0,a.bF)(I,{props:e},{default:(0,a.k6)(()=>[(0,a.bF)(N,{key:"eventName",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.name),1)]),_:2},1032,["props","class"]),(0,a.bF)(N,{key:"group",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.group),1)]),_:2},1032,["props","class"]),(0,a.bF)(N,{key:"eventIdentifier",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventIdentifier),1)]),_:2},1032,["props","class"]),(0,a.bF)(N,{key:"nodeNumber",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.nodeNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(N,{key:"eventNumber",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.eventNumber),1)]),_:2},1032,["props","class"]),(0,a.bF)(N,{key:"type",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.type),1)]),_:2},1032,["props","class"]),(0,a.bF)(N,{key:"status",props:e},{default:(0,a.k6)(()=>["on"==e.row.status?((0,a.uX)(),(0,a.Wv)(Q,{key:0,color:"white","text-color":"green"},{default:(0,a.k6)(()=>l[14]||(l[14]=[(0,a.eW)("ON")])),_:1,__:[14]})):((0,a.uX)(),(0,a.Wv)(Q,{key:1,color:"white","text-color":"red"},{default:(0,a.k6)(()=>l[15]||(l[15]=[(0,a.eW)("OFF")])),_:1,__:[15]}))]),_:2},1032,["props"]),(0,a.bF)(N,{key:"count",props:e,class:(0,n.C4)("text-"+x(e.row.eventIdentifier))},{default:(0,a.k6)(()=>[(0,a.eW)((0,n.v_)(e.row.count),1)]),_:2},1032,["props","class"]),(0,a.bF)(N,{key:"actions",props:e},{default:(0,a.k6)(()=>[(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Name",onClick:l=>q(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"primary",label:"Teach",onClick:l=>A(e.row.eventIdentifier),"no-caps":""},null,8,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>C(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>l[16]||(l[16]=[(0,a.eW)("send ON")])),_:2,__:[16]},1032,["onClick"]),(0,a.bF)(s,{dense:"",class:"q-mx-xs",outline:"",size:"md",color:"positive",onClick:l=>V(e.row.nodeNumber,e.row.eventIdentifier),"no-caps":""},{default:(0,a.k6)(()=>l[17]||(l[17]=[(0,a.eW)("send OFF")])),_:2,__:[17]},1032,["onClick"])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","filter"]),_.value?((0,a.uX)(),(0,a.Wv)(S,{key:0,class:"q-pa-sm"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",_d,[l[18]||(l[18]=(0,a.Lk)("div",{class:"text-body1"},[(0,a.eW)("Bus events"),(0,a.Lk)("br")],-1)),(0,a.Lk)("div",yd,[(0,a.Lk)("pre",null,(0,n.v_)((0,o.R1)(t).state.busEvents),1)])])]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(B,{align:"right",class:"text-primary"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{flat:"",label:"Toggle bus events json",onClick:l[5]||(l[5]=e=>E())})]),_:1})]),(0,a.bF)((0,o.R1)(vt),{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value=e),eventIdentifier:v.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(ht),{modelValue:m.value,"onUpdate:modelValue":l[7]||(l[7]=e=>m.value=e),eventIdentifier:v.value},null,8,["modelValue","eventIdentifier"]),(0,a.bF)((0,o.R1)(rt),{modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=e=>c.value=e),sendingNodeNumber:g.value,eventNumber:f.value,eventIdentifier:v.value},null,8,["modelValue","sendingNodeNumber","eventNumber","eventIdentifier"]),(0,a.bF)((0,o.R1)(gd),{modelValue:b.value,"onUpdate:modelValue":l[9]||(l[9]=e=>b.value=e)},null,8,["modelValue"])],64)}}},Nd=(0,U.A)(kd,[["__scopeId","data-v-309a78f8"]]),xd=Nd;x()(kd,"components",{QBanner:Je.A,QBtn:fe.A,QInput:$.A,QIcon:Et.A,QCard:A.A,QCardSection:h.A,QTable:Ze.A,QTr:el.A,QTd:ll.A,QChip:Al.A,QCardActions:Me.A,QField:G.A});const wd="SendCbusDialog",qd={__name:"SendCbusDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const t=(0,a.WQ)("store"),n=((0,s.A)(),(0,o.KR)()),i=(0,o.KR)(),r=(0,o.KR)([]),u=(0,o.KR)(),c=(0,o.KR)(!1);let m;const b=e,v=l,p=(0,a.EW)({get(){return b.modelValue},set(e){v("update:modelValue",e)}});(0,a.wB)(p,()=>{1==p.value&&(n.value=void 0,i.value=void 0,r.value=["0","0","0","0","0","0","0"],u.value=void 0)}),(0,a.wB)(n,()=>{console.log(wd+": Watch opCode");try{let e=n.value.toUpperCase().split("X");m=e.length>1?parseInt(e[1],16):parseInt(e[0]),console.log(wd+`: opcode ${m}`),m<32?i.value=0:m<64?i.value=1:m<96?i.value=2:m<128?i.value=3:m<160?i.value=4:m<192?i.value=5:m<224?i.value=6:m<=255&&(i.value=7),m>0&&(c.value=!0),console.log(wd+`: data length ${i.value}`)}catch(e){console.log(wd+`: Watch opCode ${e}`)}}),(0,a.$u)(()=>{});const g=()=>{console.log(wd+": clickSend"),u.value=(0,d.xT)(m,2);for(let e=0;e<i.value;e++){let l=r.value[e].toUpperCase().split("X"),t=0;t=l.length>1?parseInt(l[1],16):parseInt(l[0]),u.value=u.value+(0,d.xT)(t,2)}u.value=":SB780N"+u.value+";",console.log(wd+": clickSend: commandString "+u.value),t.methods.send_cbus_message(u.value)};return(e,l)=>{const t=(0,a.g2)("q-btn"),o=(0,a.g2)("q-banner"),s=(0,a.g2)("q-card-section"),d=(0,a.g2)("q-input"),u=(0,a.g2)("q-card"),m=(0,a.g2)("q-card-actions"),b=(0,a.g2)("q-dialog"),v=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(b,{modelValue:p.value,"onUpdate:modelValue":l[9]||(l[9]=e=>p.value=e),persistent:""},{default:(0,a.k6)(()=>[(0,a.bF)(u,{style:{width:"600px","min-height":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(o,{"inline-actions":"",style:{"min-height":"0"},class:"bg-primary text-white dense no-padding"},{action:(0,a.k6)(()=>[(0,a.bo)((0,a.bF)(t,{flat:"",color:"white",size:"md",label:"Close"},null,512),[[v]])]),default:(0,a.k6)(()=>[l[10]||(l[10]=(0,a.Lk)("div",{class:"text-h6"}," Send CBUS message ",-1))]),_:1,__:[10]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>l[11]||(l[11]=[(0,a.Lk)("div",{class:"text-body"},"Enter the bytes to construct & send a CBUS/VLCB command",-1)])),_:1,__:[11]}),(0,a.bF)(u,{class:"q-pa-sm q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(s,null,{default:(0,a.k6)(()=>l[12]||(l[12]=[(0,a.Lk)("div",{class:"text-body"},"Enter either decimal numbers",-1),(0,a.Lk)("div",{class:"text-body"},"Or hexidecimal number preceeded by '0x'",-1),(0,a.Lk)("div",{class:"text-body"},"E.g. a NERD command to node 256, in hexidecimal would be",-1),(0,a.Lk)("div",{class:"text-body"},"0x57 0x01 0x00",-1)])),_:1,__:[12]}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>l[13]||(l[13]=[(0,a.Lk)("div",{class:"text-body"},"enter the opcode in the first field, which will then expose further fields to complete as required by that opcode",-1)])),_:1,__:[13]}),(0,a.bF)(u,{class:"row"},{default:(0,a.k6)(()=>[(0,a.bF)(s,{class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),type:"text",class:"text-h6",style:{width:"50px"},autofocus:""},null,8,["modelValue"])]),_:1}),i.value>0?((0,a.uX)(),(0,a.Wv)(s,{key:0,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:r.value[0],"onUpdate:modelValue":l[1]||(l[1]=e=>r.value[0]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>1?((0,a.uX)(),(0,a.Wv)(s,{key:1,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:r.value[1],"onUpdate:modelValue":l[2]||(l[2]=e=>r.value[1]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>2?((0,a.uX)(),(0,a.Wv)(s,{key:2,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:r.value[2],"onUpdate:modelValue":l[3]||(l[3]=e=>r.value[2]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>3?((0,a.uX)(),(0,a.Wv)(s,{key:3,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:r.value[3],"onUpdate:modelValue":l[4]||(l[4]=e=>r.value[3]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>4?((0,a.uX)(),(0,a.Wv)(s,{key:4,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:r.value[4],"onUpdate:modelValue":l[5]||(l[5]=e=>r.value[4]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>5?((0,a.uX)(),(0,a.Wv)(s,{key:5,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:r.value[5],"onUpdate:modelValue":l[6]||(l[6]=e=>r.value[5]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0),i.value>6?((0,a.uX)(),(0,a.Wv)(s,{key:6,class:"q-pa-xs q-ma-none row"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{dense:"",modelValue:r.value[6],"onUpdate:modelValue":l[7]||(l[7]=e=>r.value[6]=e),type:"text",class:"text-h6",style:{width:"50px"}},null,8,["modelValue"])]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1}),(0,a.bF)(s,null,{default:(0,a.k6)(()=>[(0,a.bF)(m,{align:"right",class:"q-pa-none q-ma-none"},{default:(0,a.k6)(()=>[(0,a.bF)(t,{disable:!c.value,color:"blue",label:"Send",onClick:l[8]||(l[8]=e=>g())},null,8,["disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Fd=qd,Vd=Fd;x()(qd,"components",{QDialog:Ye.A,QCard:A.A,QBanner:Je.A,QBtn:fe.A,QCardSection:h.A,QInput:$.A,QCardActions:Me.A}),x()(qd,"directives",{ClosePopup:al.A});const Cd={class:"text-h6 no-margin no-padding float-right"},Ad={class:"text-h6 float-right"},Ed={class:"text-h6 float-right"},Rd={class:"text-h6 float-right"},Qd={class:"text-h6 float-right"},Id={class:"text-h6 float-right"},Ld={class:"text-bold text-blue"},Sd={class:"text-bold"},Wd="MainLayout",Bd={__name:"MainLayout",setup(e){const{getVerticalScrollPosition:l,setVerticalScrollPosition:t}=i.Ay,d=(0,s.A)(),r=(0,a.WQ)("store"),u=(0,o.KR)({}),c=(0,o.KR)(!1),m=(0,o.KR)(!1),b=(0,o.KR)(!1),v=(0,o.KR)(!1),p=(0,o.KR)(!1),g=(0,o.KR)(!1),f=(0,o.KR)(!1),_=(0,o.KR)(!1),y=(0,o.KR)(!1),h=((0,o.KR)(!0),(0,o.KR)(!1)),k=(0,o.KR)(0),N=(0,o.KR)(""),x=(0,o.KR)(!1),w=(0,o.KR)(!1),q=(0,o.KR)("dummyModule/index.html"),F=(0,o.KR)(null),V=(0,o.KR)("NodesView");var C=null;const A=(0,o.KR)(!1),E=(0,a.EW)(()=>Object.values(r.state.nodeTraffic));(0,a.wB)(E,()=>{F.value.setScrollPercentage("vertical",1),setTimeout(S,200)});const R=(0,a.EW)(()=>{var e="";try{e=r.state.layout.layoutDetails.title}catch(e){}return e});(0,a.KC)(()=>{r.methods.request_server_status(),r.methods.request_layout_list()}),(0,a.sV)(()=>{setInterval(Q,5e3),setInterval(I,1e3),setInterval(L,100)}),(0,a.$u)(()=>{F.value.setScrollPercentage("vertical",1)});const Q=()=>{r.methods.request_server_status()},I=()=>{1==r.state.update_layout_needed&&(r.state.update_layout_needed=!1,r.state.layout.updateTimestamp=Date.now(),r.methods.update_layout())},L=()=>{Date.now(),r.state.cbusTrafficTimeStamp},S=()=>{F.value.setScrollPercentage("vertical",1)};r.eventBus.on("GENERAL_MESSAGE_EVENT",(e,l,t,a)=>{console.log(Wd+": GENERAL_MESSAGE_EVENT "+JSON.stringify(e));try{a>0&&a<=2e3?d.notify({message:e,caption:l,timeout:a,type:t,position:"center"}):d.notify({message:e,caption:l,timeout:a,type:t,position:"center",actions:[{label:"Dismiss"}]})}catch(e){console.log(Wd+": MESSAGE_EVENT: "+e)}}),r.eventBus.on("REQUEST_NODE_NUMBER_EVENT",(e,l)=>{console.log(Wd+": REQUEST_NODE_NUMBER_EVENT - previous node number "+e+" moduleName "+l),k.value=e,N.value=l,y.value=!0}),r.eventBus.on("NETWORK_CONNECTION_FAILURE",(e,l,t,a)=>{if(r.state.networkConnection_notify)try{d.notify({message:e,caption:l,timeout:a,type:t,position:"center",actions:[{label:"Don't remind me again",handler:()=>{r.state.networkConnection_notify=!1}},{label:"Dismiss"}]})}catch(e){console.log(Wd+": NETWORK_CONNECTION_FAILURE: "+e)}}),r.eventBus.on("SERIAL_CONNECTION_FAILURE",(e,l,t,a)=>{if(r.state.serialConnection_notify)try{d.notify({message:e,caption:l,timeout:a,type:t,position:"center",actions:[{label:"Don't remind me again",handler:()=>{r.state.serialConnection_notify=!1}},{label:"Dismiss"}]})}catch(e){console.log(Wd+": SERIAL_CONNECTION_FAILURE: "+e)}}),r.eventBus.on("SERVER_CONNECT",()=>{C&&C(),d.notify({message:"MMC-server has connected",timeout:1e3,type:"info",position:"center"})}),r.eventBus.on("SERVER_DISCONNECT",()=>{C=d.notify({message:"MMC-server has disconnected",timeout:0,type:"warning",position:"center",actions:[{label:"Dismiss"}]})});const W=e=>{console.log(Wd+": clickAllBusTraffic"),r.methods.request_log_file("bustraffic.txt"),m.value=!0},B=()=>{console.log(Wd+": clickBusEventsView"),V.value="BusEventsView"},T=()=>{console.log(Wd+": clickCbusErrors"),b.value=!0},D=()=>{console.log(Wd+": clickEventView"),V.value="EventsView"},K=()=>{console.log(Wd+": clickExample"),x.value=!0},U=()=>{console.log(Wd+": clickNodeView"),V.value="NodesView"},O=()=>{console.log(Wd+": clickExit");d.notify({message:"Are you sure you want to close the application?",timeout:0,position:"center",color:"primary",actions:[{label:"YES",color:"white",handler:async()=>{r.methods.STOP_SERVER(),await sleep(50)}},{label:"NO",color:"white",handler:()=>{}}]})},M=()=>{console.log(Wd+": clickExport"),v.value=!0},X=()=>{console.log(Wd+": clickiframe"),w.value=!0},P=()=>{console.log(Wd+": clickImport"),g.value=!0},z=()=>{console.log(Wd+": clickJson"),p.value=!0},j=()=>{console.log(Wd+": clickLogs"),f.value=!0},$=e=>{console.log(Wd+": clickSingleBusEvent"),u.value=e,F.value.setScrollPercentage("vertical",1),_.value=!0},G=()=>{console.log(Wd+": clickSendCBUS"),A.value=!0},H=()=>{console.log(Wd+": clickSystem"),h.value=!0};return(e,l)=>{const t=(0,a.g2)("q-item-section"),s=(0,a.g2)("q-item"),i=(0,a.g2)("q-list"),d=(0,a.g2)("q-menu"),C=(0,a.g2)("q-btn"),E=(0,a.g2)("q-toolbar-title"),Q=(0,a.g2)("q-toolbar"),I=(0,a.g2)("q-space"),L=(0,a.g2)("q-header"),S=(0,a.g2)("q-banner"),Y=(0,a.g2)("q-item-label"),J=(0,a.g2)("q-scroll-area"),Z=(0,a.g2)("q-card"),ee=(0,a.g2)("q-drawer"),le=(0,a.g2)("q-page"),te=(0,a.g2)("q-page-container"),ae=(0,a.g2)("q-layout");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(ae,{view:"hHh lpR fFf"},{default:(0,a.k6)(()=>[(0,a.bF)(L,{class:"row bg-primary text-white no-margin no-padding",style:{height:"6vh"}},{default:(0,a.k6)(()=>[(0,a.bF)(Q,{class:"col no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(C,{flat:"",dense:"",icon:"menu"},{default:(0,a.k6)(()=>[(0,a.bF)(d,{"auto-close":""},{default:(0,a.k6)(()=>[(0,a.bF)(i,{style:{"min-width":"100px"}},{default:(0,a.k6)(()=>[(0,a.bF)(s,{clickable:"",onClick:l[0]||(l[0]=e=>M())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[28]||(l[28]=[(0,a.eW)("Export")])),_:1,__:[28]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[1]||(l[1]=e=>P())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[29]||(l[29]=[(0,a.eW)("Import")])),_:1,__:[29]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[2]||(l[2]=e=>j())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[30]||(l[30]=[(0,a.eW)("Logs")])),_:1,__:[30]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[3]||(l[3]=e=>z())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[31]||(l[31]=[(0,a.eW)("JSON")])),_:1,__:[31]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[4]||(l[4]=e=>T())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[32]||(l[32]=[(0,a.eW)("CBUS errors")])),_:1,__:[32]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[5]||(l[5]=e=>G())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[33]||(l[33]=[(0,a.eW)("Send CBUS message")])),_:1,__:[33]})]),_:1}),(0,a.bF)(s,{clickable:"",onClick:l[6]||(l[6]=e=>H())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[34]||(l[34]=[(0,a.eW)("System")])),_:1,__:[34]})]),_:1}),(0,o.R1)(r).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:0,clickable:"",onClick:l[7]||(l[7]=e=>K())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[35]||(l[35]=[(0,a.eW)("Example")])),_:1,__:[35]})]),_:1})):(0,a.Q3)("",!0),(0,o.R1)(r).state.develop?((0,a.uX)(),(0,a.Wv)(s,{key:1,clickable:"",onClick:l[8]||(l[8]=e=>X())},{default:(0,a.k6)(()=>[(0,a.bF)(t,null,{default:(0,a.k6)(()=>l[36]||(l[36]=[(0,a.eW)("Example iFrame")])),_:1,__:[36]})]),_:1})):(0,a.Q3)("",!0)]),_:1})]),_:1})]),_:1}),(0,a.bF)(E,{style:{"min-height":"0"},class:"no-margin no-padding"},{default:(0,a.k6)(()=>l[37]||(l[37]=[(0,a.Lk)("div",{class:"text-h6 no-margin no-padding"}," MMC ",-1)])),_:1,__:[37]})]),_:1}),(0,a.bF)(Q,{class:"col no-margin no-padding",style:{"min-width":"400px"}},{default:(0,a.k6)(()=>[(0,a.bF)(I),(0,a.Lk)("div",Cd,(0,n.v_)(R.value),1)]),_:1}),(0,a.bF)(Q,{class:"col no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(I)]),_:1}),(0,a.bF)(Q,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Ad,[(0,a.bF)(C,{size:"md",color:"secondary",label:"Bus Events",onClick:l[9]||(l[9]=e=>B()),"no-caps":""})])]),_:1}),(0,a.bF)(Q,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Ed,[(0,a.bF)(C,{size:"md",color:"secondary",label:"Events view",onClick:l[10]||(l[10]=e=>D()),"no-caps":""})])]),_:1}),(0,a.bF)(Q,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("div",Rd,[(0,a.bF)(C,{size:"md",color:"secondary",label:"Nodes view",onClick:l[11]||(l[11]=e=>U()),"no-caps":""})])]),_:1}),(0,a.bF)(Q,{class:"col no-margin q-py-none"},{default:(0,a.k6)(()=>[(0,a.bF)(I),(0,a.Lk)("div",Qd,[(0,a.bF)(C,{size:"md",color:"negative",label:"Exit",onClick:l[12]||(l[12]=e=>O()),"no-caps":""})])]),_:1})]),_:1}),(0,a.bF)(ee,{class:"no-margin no-padding",modelValue:c.value,"onUpdate:modelValue":l[14]||(l[14]=e=>c.value=e),"show-if-above":"",side:"left",width:250,dense:"",bordered:""},{default:(0,a.k6)(()=>[(0,a.bF)(S,{"inline-actions":"",style:{"min-height":"0px"},class:"bg-primary text-white dense no-margin q-py-none q-px-xs row"},{action:(0,a.k6)(()=>[(0,a.Lk)("div",Id,[(0,a.bF)(C,{size:"sm",color:"blue",label:"All",onClick:l[13]||(l[13]=e=>W())})])]),default:(0,a.k6)(()=>[l[38]||(l[38]=(0,a.Lk)("div",{class:"text-h6"},"Bus traffic",-1))]),_:1,__:[38]}),(0,a.bF)(Z,{class:"no-margin no-padding"},{default:(0,a.k6)(()=>[(0,a.bF)(J,{id:"demo",ref_key:"scrollAreaRef",ref:F,style:{height:"89vh"}},{default:(0,a.k6)(()=>[(0,a.bF)(i,null,{default:(0,a.k6)(()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,o.R1)(r).state.nodeTraffic,e=>((0,a.uX)(),(0,a.Wv)(s,{key:e,clickable:"",dense:"",onClick:l=>$(e)},{default:(0,a.k6)(()=>[(0,a.bF)(Y,{dense:"",caption:"",class:"q-pa-none q-my-none"},{default:(0,a.k6)(()=>[(0,a.Lk)("span",Ld,(0,n.v_)(e.direction),1),l[39]||(l[39]=(0,a.Lk)("span",null,": ",-1)),(0,a.Lk)("span",Sd,(0,n.v_)(e.json.text),1)]),_:2,__:[39]},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),0==(0,o.R1)(r).state.inStartup?((0,a.uX)(),(0,a.Wv)(te,{key:0,class:"main-page no-shadow no-margin q-pa-none"},{default:(0,a.k6)(()=>["BusEventsView"==V.value?((0,a.uX)(),(0,a.Wv)(le,{key:0},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(xd))]),_:1})):(0,a.Q3)("",!0),"EventsView"==V.value?((0,a.uX)(),(0,a.Wv)(le,{key:1},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(bd))]),_:1})):(0,a.Q3)("",!0),"NodesView"==V.value?((0,a.uX)(),(0,a.Wv)(le,{key:2},{default:(0,a.k6)(()=>[(0,a.bF)((0,o.R1)(is))]),_:1})):(0,a.Q3)("",!0)]),_:1})):(0,a.Q3)("",!0)]),_:1}),(0,a.bF)((0,o.R1)(ps),{modelValue:m.value,"onUpdate:modelValue":l[15]||(l[15]=e=>m.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ys),{modelValue:b.value,"onUpdate:modelValue":l[16]||(l[16]=e=>b.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ls),{modelValue:v.value,"onUpdate:modelValue":l[17]||(l[17]=e=>v.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ts),{modelValue:p.value,"onUpdate:modelValue":l[18]||(l[18]=e=>p.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Ys),{modelValue:g.value,"onUpdate:modelValue":l[19]||(l[19]=e=>g.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ti),{modelValue:f.value,"onUpdate:modelValue":l[20]||(l[20]=e=>f.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(ri),{modelValue:_.value,"onUpdate:modelValue":l[21]||(l[21]=e=>_.value=e),busMessage:u.value},null,8,["modelValue","busMessage"]),(0,a.bF)((0,o.R1)(vi),{modelValue:y.value,"onUpdate:modelValue":l[22]||(l[22]=e=>y.value=e),previousNodeNumber:k.value,moduleName:N.value},null,8,["modelValue","previousNodeNumber","moduleName"]),(0,a.bF)((0,o.R1)(Vd),{modelValue:A.value,"onUpdate:modelValue":l[23]||(l[23]=e=>A.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Di),{modelValue:(0,o.R1)(r).state.inStartup,"onUpdate:modelValue":l[24]||(l[24]=e=>(0,o.R1)(r).state.inStartup=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Pi),{modelValue:h.value,"onUpdate:modelValue":l[25]||(l[25]=e=>h.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(Hi),{modelValue:x.value,"onUpdate:modelValue":l[26]||(l[26]=e=>x.value=e)},null,8,["modelValue"]),(0,a.bF)((0,o.R1)(as),{modelValue:w.value,"onUpdate:modelValue":l[27]||(l[27]=e=>w.value=e),URL:q.value},null,8,["modelValue","URL"])],64)}}};var Td=t(2008),Dd=t(8416),Kd=t(6914),Ud=t(4436),Od=t(3999),Md=t(9150),Xd=t(6056),Pd=t(8958),zd=t(5205),jd=t(7716);const $d=(0,U.A)(Bd,[["__scopeId","data-v-4214d80a"]]),Gd=$d;x()(Bd,"components",{QLayout:Td.A,QHeader:Dd.A,QToolbar:Kd.A,QBtn:fe.A,QMenu:Ud.A,QList:Od.A,QItem:cs.A,QItemSection:ms.A,QToolbarTitle:Md.A,QSpace:_e.A,QDrawer:Xd.A,QBanner:Je.A,QCard:A.A,QScrollArea:Pd.A,QItemLabel:bs.A,QPageContainer:zd.A,QPage:jd.A})},7123:(e,l,t)=>{e.exports=t.p+"img/Short_Events_Sheet.1b011d1e.png"},8626:(e,l,t)=>{e.exports=t.p+"img/Nodes_sheet.22b132a9.png"},8749:(e,l,t)=>{e.exports=t.p+"img/Channels_sheet.239e4369.png"}}]);